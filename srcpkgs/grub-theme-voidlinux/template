# Template file for 'grub-theme-voidlinux'
pkgname=grub-theme-voidlinux
version=3.2
revision=1
depends="grub"
hostmakedepends="grub-utils grub-terminus source-sans-pro"
short_desc="Void Linux theme for GRUB"
maintainer="Mateusz Sylwestrzak <slymattz@gmail.com>"
license="GPL-3.0-only"
homepage="https://k1ng.dev/distro-grub-themes"
distfiles="https://github.com/AdisonCavani/distro-grub-themes/releases/download/v${version}/void-linux.tar"
checksum=471ad320253f2e4227ad0c8bd7c8f9b3a644fcb74ad884d290aa0eb5c54cc523

do_patch() {
	vsed -i theme.txt -e 's/Ubuntu Regular/Source Sans 3 Semibold/g'
}

do_install() {
	vmkdir /usr/share/grub/themes/void-linux
	rm *.pf2 # remove all the supplied GRUB fonts
	vcopy * /usr/share/grub/themes/void-linux
	grub-mkfont -s 20 -o $DESTDIR/usr/share/grub/themes/void-linux/source_sans3_semibold20.pf2 /usr/share/fonts/OTF/SourceSans3-Semibold.otf
	grub-mkfont -s 17 -o $DESTDIR/usr/share/grub/themes/void-linux/source_sans3_semibold17.pf2 /usr/share/fonts/OTF/SourceSans3-Semibold.otf
	vcopy /boot/grub/fonts/terminus14.pf2 /usr/share/grub/themes/void-linux/
}
