# Template file for 'guvcview'
pkgname=guvcview
version=2.0.8
revision=1
build_style=gnu-configure
configure_args="--disable-static --disable-debian-menu"
hostmakedepends="pkg-config intltool autoconf automake libtool glib-devel"
makedepends="eudev-libudev-devel gtk+3-devel SDL2-devel ffmpeg-devel libusb-devel
 pulseaudio-devel v4l-utils-devel portaudio-devel gsl-devel"
depends="desktop-file-utils"
short_desc="Simple GTK interface for capturing and viewing video from UVC devices"
maintainer="Orphaned <orphan@voidlinux.org>"
license="GPL-3.0-or-later"
homepage="http://guvcview.sourceforge.net/"
distfiles="${SOURCEFORGE_SITE}/${pkgname}/${pkgname}-src-${version}.tar.bz2"
checksum=a21f4e448286666cf27bafef5290cc953a0a1796b752e5bbe521266dc1230c81

post_patch() {
	sed '31a#include <locale.h>' -i  guvcview/guvcview.c
	# add missing EOL in this file to fix do_check()
	echo >> po/POTFILES.in
}

pre_configure() {
	autoreconf -fi
}
