# Template file for 'guvcview'
pkgname=guvcview
version=2.2.2
revision=1
build_style=cmake
# configure_args="-DUSE_SFML=ON"
# requires 3.0(.2) but everything else in void that uses SFML breaks with 3.0
hostmakedepends="pkg-config intltool autoconf automake libtool glib-devel"
makedepends="eudev-libudev-devel gtk+3-devel SDL2-devel ffmpeg-devel libusb-devel
 pulseaudio-devel v4l-utils-devel portaudio-devel gsl-devel"
# TODO: qt6 - zlice
depends="desktop-file-utils"
short_desc="Simple GTK interface for capturing and viewing video from UVC devices"
maintainer="Orphaned <orphan@voidlinux.org>"
license="GPL-3.0-or-later"
homepage="http://guvcview.sourceforge.net/"
distfiles="${SOURCEFORGE_SITE}/${pkgname}/${pkgname}-src-${version}.tar.bz2"
checksum=6a1b1348b99e79da957a0d9e237395a54757a09db7e0c0809f6c30668b69da3b

post_patch() {
	sed '31a#include <locale.h>' -i  guvcview/guvcview.c
	# add missing EOL in this file to fix do_check()
	echo >> po/POTFILES.in
}
