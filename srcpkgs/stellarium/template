# Template file for 'stellarium'
pkgname=stellarium
version=25.3
revision=2
build_style=cmake
configure_args="-DENABLE_SHOWMYSKY=Off -DUSE_PLUGIN_TELESCOPECONTROL=NO -DBUILD_MD2HTML_EXECUTABLE=OFF -DQT_VERSION_MAJOR=6"
hostmakedepends="perl gettext qt6-tools-devel qt6-declarative-host-tools"
makedepends="qt6-base-private-devel qt6-multimedia-devel qt6-location-devel qt6-serialport-devel qt6-charts-devel qt6-declarative-devel QXlsx-devel exiv2-devel nlopt-devel libmd4c-devel"
depends="desktop-file-utils"
short_desc="Open Source Planetarium"
maintainer="Andrew Benson <abenson+void@gmail.com>"
license="GPL-2.0-or-later"
homepage="https://stellarium.org/"
distfiles="https://github.com/Stellarium/stellarium/archive/refs/tags/v${version}.tar.gz"
checksum=37daa99ba5182fa89da348001e0ca35eed1e94092caa5dab656569e36c139757
replaces="stellarium-data>=0"

if [ $XBPS_TARGET_WORDSIZE -eq 64 ]
then
	makedepends+=" qt6-webengine-devel"
fi

do_patch() {
	sed -i 's/Gui Network/Gui GuiPrivate Network/g' CMakeLists.txt
}
