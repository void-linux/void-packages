# Template file for 'ouch'
pkgname=ouch
version=0.6.1
revision=2
build_style=cargo
configure_args="--no-default-features --features=use_zlib,use_zstd_thin"
hostmakedepends="pkg-config clang"
makedepends="liblzma-devel bzip2-devel libzip-devel libzstd-devel"
checkdepends="git"
short_desc="CLI utility for easily compressing and decompressing files and dirs"
maintainer="Orphaned <orphan@voidlinux.org>"
license="MIT"
homepage="https://github.com/ouch-org/ouch"
changelog="https://raw.githubusercontent.com/ouch-org/ouch/main/CHANGELOG.md"
distfiles="https://github.com/ouch-org/ouch/archive/refs/tags/${version}.tar.gz"
checksum=e6265071affab228ba7d3ca85f2206029445038b3a3d96036e9bf02b795ad651

pre_build() {
	export OUCH_ARTIFACTS_FOLDER=artifacts
}

post_install() {
	vlicense LICENSE
	vcompletion "artifacts/_ouch" zsh
	vcompletion "artifacts/ouch.fish" fish
	vcompletion "artifacts/ouch.bash" bash

	for page in artifacts/*.1; do
		vman ${page}
	done
}
