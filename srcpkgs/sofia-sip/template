# Template file for 'sofia-sip'
pkgname=sofia-sip
version=1.13.17
revision=1
build_style=gnu-configure
configure_args="--disable-static"
hostmakedepends="automake libtool pkg-config"
makedepends="libglib-devel lksctp-tools-devel openssl-devel"
checkdepends="check-devel"
short_desc="RFC3261 compliant SIP User-Agent library"
maintainer="chrysos349 <chrysostom349@gmail.com>"
license="GPL-3.0-or-later"
homepage="https://github.com/freeswitch/sofia-sip"
distfiles="https://github.com/freeswitch/sofia-sip/archive/v${version}.tar.gz"
checksum=daca3d961b6aa2974ad5d3be69ed011726c3e4d511b2a0d4cb6d878821a2de7a

pre_configure() {
	./autogen.sh
}

do_check() {
	TPORT_DEBUG=9 TPORT_TEST_HOST=0.0.0.0 make check
}

sofia-sip-devel_package() {
	depends="${sourcepkg}>=${version}_${revision} ${makedepends}"
	short_desc+=" - development files"
	pkg_install() {
		vmove usr/include
		vmove usr/lib/pkgconfig
		vmove "usr/lib/*.so"
	}
}
