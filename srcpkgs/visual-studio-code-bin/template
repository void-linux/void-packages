# Template file for 'visual-studio-code-bin'
pkgname=visual-studio-code-bin
version=1.24.1
revision=1
only_for_archs="x86_64"
wrksrc="${pkgname}-${version}"
homepage="https://code.visualstudio.com"
depends="alsa-lib GConf gtk+ libnotify libXtst nss python"
short_desc="Editor for building and debugging modern web and cloud applications"
maintainer="Leandro Vital <leavitals@gmail.com>"
license="microsoft"
repository=nonfree
restricted=yes
nostrip=yes

_baseUrl="https://packages.microsoft.com/repos/vscode/pool/main/c/code/"
_filename="code_${version}-1528912196_amd64.deb"
_vscodeUrl="${_baseUrl}/${_filename}"

distfiles="${_vscodeUrl}"
checksum=7b72995400c679f58e9a7745b751ce066b4692e80d8fdb4ad97b3e79070799b2

do_extract() {
	mkdir -p ${DESTDIR}
	ar x ${XBPS_SRCDISTDIR}/visual-studio-code-bin-${version}/${_filename}
}

do_install() {
	tar xpf data.tar.xz -C ${DESTDIR}
	vmkdir "usr/bin"
	ln -sf /usr/share/code/bin/code "${DESTDIR}/usr/bin/"
}
