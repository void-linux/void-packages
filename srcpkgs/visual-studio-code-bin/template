# Template file for 'visual-studio-code-bin'
pkgname=visual-studio-code-bin
version=1.25.1
revision=1
_rel=1531323788
only_for_archs="x86_64"
homepage="https://code.visualstudio.com"
depends="alsa-lib GConf gtk+ libnotify libXtst nss python"
short_desc="Editor for building and debugging modern web and cloud applications"
maintainer="Leandro Vital <leavitals@gmail.com>"
license="microsoft"
repository=nonfree
restricted=yes
nostrip=yes
noverifyrdeps=yes

distfiles="https://packages.microsoft.com/repos/vscode/pool/main/c/code/code_${version}-${_rel}_amd64.deb"

checksum=df7785f4b267407cbd3d58c3e4e210edbbee744fcf0bb5ae12bc4f8f4d796351

do_extract() {
    ar p ${XBPS_SRCDISTDIR}/${pkgname}-${version}/code_${version}-${_rel}_amd64.deb data.tar.xz | tar xJpf - ./usr
}

do_install() {
    
    vcopy usr/ /

    vmkdir "usr/bin"
    ln -sf /usr/share/code/bin/code "${DESTDIR}/usr/bin/"
}
