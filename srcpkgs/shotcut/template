# Template file for 'shotcut'
pkgname=shotcut
version=21.01.29
revision=1
build_style=qmake
configure_args="SHOTCUT_VERSION=VOID-$version DEFINES+=SHOTCUT_NOUPGRADE"
hostmakedepends="pkg-config qt5-tools qt5-qmake qt5-host-tools"
makedepends="gstreamer1-devel lame-devel libvpx-devel mlt-devel mlt-python3
 qt5-declarative-devel qt5-graphicaleffects qt5-multimedia-devel
 qt5-quickcontrols2-devel qt5-webkit-devel qt5-websockets-devel
 qt5-x11extras-devel x264-devel"
depends="frei0r-plugins qt5-graphicaleffects"
short_desc="Free, open source, cross-platform video editor"
maintainer="John <me@johnnynator.dev>"
license="GPL-3.0-or-later"
homepage="https://www.shotcut.org"
distfiles="https://github.com/mltframework/shotcut/archive/v${version}.tar.gz"
checksum=2e55e36d95344758f220b081b1f25f90eb3d0131b0a4af9d65871798079ee961

CXXFLAGS="-DHAVE_LOCALE_H=1"

post_configure() {
	# Hack to  make sure that the build_style does not override the
	# value of LINK when calling the translations Makefile
	cd translations
	qmake-qt5 PREFIX=/usr
	cd ${wrksrc}
	vsed -i -e 's/^LINK/override LINK/g' translations/Makefile
}
