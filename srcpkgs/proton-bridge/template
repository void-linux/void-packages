# Template file for 'proton-bridge'
pkgname=proton-bridge
version=1.2.7
revision=1
wrksrc="proton-bridge-${version}-live.1"
create_wrksrc=yes
build_wrksrc=${pkgname}-${version}-live.1
_githash="e137a3934da63027a815b99feb2d27ca67af897b"
build_style=gnu-makefile
#make_dirs="/var/log/dir 0755 root root"
hostmakedepends="git go pkg-config qt5-go rsync tar which"
makedepends="libsecret-devel libglvnd-devel"
depends="gnome-keyring"
short_desc="ProtonMail Bridge for e-mail clients"
maintainer="cinerea0 <cinerea0@protonmail.com>"
license="GPL-3.0-or-later"
homepage="https://protonmail.com/bridge"
distfiles="https://www.github.com/ProtonMail/proton-bridge/archive/v${version}-live.1.tar.gz
 https://github.com/therecipe/env_linux_amd64_513/archive/${_githash}.tar.gz"
checksum="5a4c19b769cd72097507de6840b79e56d37fa6a54cf7269d4fec28c05016ca45
 4b22aca118aabaf28da6ba39b5bf54c4a05e43fc354ce7682669dc4408b7d4fd"
nostrip="yes"
nopie="yes"

do_install() {
	vbin ./cmd/Desktop-Bridge/deploy/linux/${pkgname}-${version}-live.1 proton-bridge
	vdoc ./doc/index.md
	vdoc ./doc/bridge.md
	vdoc ./doc/communication.md
	vdoc ./doc/database.md
	vdoc ./doc/encryption.md
}
