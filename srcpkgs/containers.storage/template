# Template file for 'containers.storage'
pkgname=containers.storage
version=1.61.0
revision=1
build_wrksrc=storage
hostmakedepends="go-md2man"
depends="fuse-overlayfs"
short_desc="Storage configuration shared by podman, buildah, and skopeo"
maintainer="Cameron Nemo <cam@nohom.org>"
license="Apache-2.0"
homepage="https://github.com/containers/container-libs"
changelog="https://github.com/containers/container-libs/tags"
distfiles="https://github.com/containers/container-libs/archive/refs/tags/storage/v${version}.tar.gz"
checksum=6d620c7dd89a541da35243c92c39e5906a4ccdf573565d09284af5e5f44ab8ab
_manpage="containers-storage.conf.5"

do_build() {
	go-md2man -in "docs/${_manpage}.md" -out "$_manpage"
}

do_install() {
	vman "$_manpage"
	vsed -e 's/^#mount_program = "/mount_program = "/' -i storage.conf
	vinstall storage.conf 0644 usr/share/containers
}
