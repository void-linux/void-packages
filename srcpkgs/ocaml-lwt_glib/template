# Template file for 'ocaml-lwt_glib'
pkgname=ocaml-lwt_glib
version=0.0.0.20180119
revision=1
_commit="02596cd5ff620b07168895798ecca02e28d07b9b"
wrksrc="lwt_glib-${_commit}"
hostmakedepends="ocaml lwt dune pkg-config"
makedepends="glib-devel"
short_desc="GLib/GTK event loop for Lwt"
maintainer="John <johnz@posteo.net>"
license="LGPL-2.1-or-later"
homepage="https://github.com/aantron/lwt_glib"
distfiles="https://github.com/aantron/lwt_glib/archive/${_commit}.tar.gz"
checksum=fcf016951dda1d0f2ed1056ed59197b5729723c006f44874ee9f378aeb7206b7
nocross=yes

do_build() {
	jbuilder build
}

do_install() {
	export OPAMROOT="${wrksrc}/opam"
	opam init -n
	OCAMLFIND_DESTDIR="${DESTDIR}$(ocamlfind printconf destdir)" jbuilder install
}
