# Template file for 'serviio'
pkgname=serviio
version=2.1
revision=1
archs="x86_64"
depends="openjdk11 ffmpeg"
short_desc="Free DLNA media server"
maintainer="Domenico Panella <pandom79@gmail.com>"
license="custom"
homepage="http://www.serviio.org/"
distfiles="http://download.serviio.org/releases/${pkgname}-${version}-linux.tar.gz"
checksum=51748160b38e31ba54db1b11381d3d9d705852ed7757ad111e881327a16fb757

do_install() {

    #Define variable for Serviio home directory
    SERVIIO_HOME=/usr/share/java/$pkgname
    vmkdir ${SERVIIO_HOME}

    #Bin folder
    vmkdir /usr/bin
    vcopy bin ${SERVIIO_HOME}
    ln -s ${SERVIIO_HOME}/bin/${pkgname}-console.sh ${PKGDESTDIR}/usr/bin/${pkgname}-console

    #Config folder
    vcopy config ${SERVIIO_HOME}

    #Lib folder
    vcopy lib ${SERVIIO_HOME}

    #Library folder
    vcopy library ${SERVIIO_HOME}

    #Plugins folder
    vcopy plugins ${SERVIIO_HOME}

    #Log
    vmkdir /var/log
    ln -s ${SERVIIO_HOME}/log ${PKGDESTDIR}/var/log/${pkgname} 

    #Service
    vsv ${pkgname}

    #Desktop file
    vmkdir /usr/share/applications
    vcopy ${FILESDIR}/${pkgname}.desktop /usr/share/applications/

    #Icon file
    vmkdir /usr/share/icons/hicolor/48x48/apps
    vcopy ${FILESDIR}/${pkgname}.png /usr/share/icons/hicolor/48x48/apps

    #Licence
    vlicense LICENCE.txt

    #Doc
    vdoc README.txt
    vdoc NOTICE.txt
    vdoc RELEASE_NOTES.txt

  
}
