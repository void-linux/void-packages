# Template file for 'logwatch'
pkgname=logwatch
version=7.4.3
revision=1
noarch=yes
make_dirs="
	/var/cache/logwatch         0755 root root
	/etc/logwatch/scripts       0755 root root
	/etc/logwatch/conf/logfiles 0755 root root
	/etc/logwatch/conf/services 0755 root root
"
short_desc="Logwatch is a customizable, pluggable log-monitoring system"
maintainer="zeechs <sylv1pdt@gmail.com>"
license="MIT"
homepage="http://www.logwatch.org"
distfiles="${SOURCEFORGE_SITE}/${pkgname}/${pkgname}-${version}.tar.gz"
checksum=1dbdc48d65e150f2dbb43f1e4f4700d94166e053b1c7bbbdedf4ad670283720e

do_install() {
	vmkdir /etc/logwatch/conf
	vcopy conf/*.conf /etc/logwatch/conf/
	touch ${DESTDIR}/etc/logwatch/conf/override.conf

	vmkdir /usr/share/logwatch/scripts/logfiles
	vmkdir /usr/share/logwatch/scripts/services
	vmkdir /usr/share/logwatch/scripts/shared

	for i in scripts/logfiles/* ; do
		vmkdir /usr/share/logwatch/"$i"
		vcopy "$i"/* /usr/share/logwatch/"$i"/
	done
	vcopy scripts/services/* /usr/share/logwatch/scripts/services/
	vcopy scripts/shared/* /usr/share/logwatch/scripts/shared/

	vmkdir /usr/share/logwatch/default.conf/logfiles
	vmkdir /usr/share/logwatch/default.conf/services
	vmkdir /usr/share/logwatch/default.conf/html

	vcopy conf/*.conf /usr/share/logwatch/default.conf/
	vcopy conf/logfiles/*.conf /usr/share/logwatch/default.conf/logfiles/
	vcopy conf/services/*.conf /usr/share/logwatch/default.conf/services/
	vcopy conf/html/*.html /usr/share/logwatch/default.conf/html/

	vmkdir /usr/share/logwatch/lib
	vcopy lib/Logwatch.pm /usr/share/logwatch/lib/

	vman amavis-logwatch.1
	vman logwatch.8
	vman logwatch.conf.5
	vman override.conf.5
	vman postfix-logwatch.1
	vdoc HOWTO-Customize-LogWatch
	vdoc README
	vlicense LICENSE
	vbin scripts/logwatch.pl logwatch
}

