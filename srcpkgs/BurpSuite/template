# Template file for 'BurpSuite'
pkgname=BurpSuite
version=2020.2.1
revision=1
depends="openjdk"
short_desc="Manual toolkit for investigating web security"
maintainer="Antoine Guilbaud <antoine.guilbaud@yahoo.fr>"
license="custom:Proprietary"
homepage="https://portswigger.net/"
checksum="d60aae76f65bbea92775fff73a35ee395841ee817d7f7eff281970d79270d622"

_distfile="https://portswigger.net/burp/releases/download?product=community&version=${version}&type=Jar"
_filename="$pkgname$version.jar"

do_fetch() {
	mkdir -p "$wrksrc"
	cd "$wrksrc"

	$XBPS_FETCH_CMD \
		-o "$_filename" \
		"$_distfile"
	cksum=$($XBPS_DIGEST_CMD "$_filename")
	[ "$cksum" = "$checksum" ]
}

do_build() {
	cat > "$pkgname" << EOF
#!/bin/sh
exec /bin/java -jar /usr/share/$pkgname/$_filename "\$@"
EOF
}

do_install() {
	vbin "$pkgname"
	vinstall "$_filename" 644 "/usr/share/$pkgname"
	vlicense "$FILESDIR/LICENSE"
}
