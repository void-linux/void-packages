# Template file for 'postman'
pkgname=postman
version=10.4.5
revision=1
archs="x86_64"
makedepends="tar"
short_desc="API Platform for building and using APIs"
maintainer="fanyx <fanyx@fanyx.xyz>"
license="custom:Proprietary"
homepage="https://www.postman.com/"
distfiles="https://dl.pstmn.io/download/latest/linux64"
checksum=4b79ab21c859e2993c14126842a616de3ee29b33fe0c3812722950f3fc741a02
repository=nonfree
restricted=yes
nopie=y

do_extract() {
	tar -xvzf ${XBPS_SRCDISTDIR}/${pkgname}-${version}/linux64 Postman/app
}

do_install() {
	vmkdir usr/lib
	vcopy Postman/app usr/lib/postman

	vmkdir usr/share/applications
	vcopy ${FILESDIR}/postman.desktop usr/share/applications/

	vlicense ${FILESDIR}/TermsOfService.html

	mkdir libsave
	for lib in libffmpeg.so; do
		mv ${DESTDIR}/usr/lib/postman/$lib libsave
	done
	find ${DESTDIR}/usr/lib/postman/ -name '*.so*' -delete
	mv libsave/* ${DESTDIR}/usr/lib/postman/
}
