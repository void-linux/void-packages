# Template file for 'dee'
pkgname=dee
version=1.2.7
revision=1
build_style=gnu-configure
configure_args="CFLAGS=-Wno-error"
hostmakedepends="automake gobject-introspection pkg-config python3"
makedepends="icu-devel libglib-devel"
short_desc="Library for creating Model-View-Controller type programs across DBus"
maintainer="Earldridge Jazzed Pineda <earldridgejazzedpineda@gmail.com>"
license="LGPL-3.0-only"
homepage="https://launchpad.net/dee"
changelog="https://bazaar.launchpad.net/~unity-team/dee/trunk/download/head:/debian/changelog"
distfiles="https://launchpad.net/dee/1.0/${version}/+download/dee-${version}.tar.gz"
checksum=1bf0336ce684aa0f48d6eae2469628c1a9b43695a77443bc31a5790aa673bf8a
make_check=ci-skip # test-icu.c:64:test_ascii_folder: assertion failed

pre_configure() {
	autoreconf
}

dee-devel_package() {
	short_desc+=" - development files"
	depends="${sourcepkg}>=${version}_${revision}"
	pkg_install() {
		vmove usr/include
		vmove "usr/lib/*.so"
		vmove usr/lib/pkgconfig
		vmove usr/share/gir-1.0
		vmove usr/share/vala
	}
}
