# Template file for 'ocaml-topkg'
pkgname=ocaml-topkg
version=0.9.1
revision=1
wrksrc="topkg-${version}"
hostmakedepends="ocaml ocaml-result ocaml-findlib opam ocamlbuild"
depends="ocaml-result"
short_desc="Packager for distributing OCaml software"
maintainer="John Zimmermann <johnz@posteo.net>"
license="ISC"
homepage="http://erratique.ch/software/topkg"
distfiles="http://erratique.ch/software/topkg/releases/topkg-${version}.tbz"
checksum=a6fb7a308374c50201c0998ccb1ee878fffe4c131a73eef4833da0ebebfa99ea
nocross=yes

do_build() {
	pkg/pkg.ml build --pkg-name topkg
}

do_install() {
	opam-installer --prefix="${DESTDIR}/usr" \
	--libdir="${DESTDIR}$(ocamlc -where)" \
	--docdir="${DESTDIR}/usr/share/doc"

	vlicense LICENSE.md
}
