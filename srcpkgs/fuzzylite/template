# Template file for 'fuzzylite'
pkgname=fuzzylite
version=6.0
revision=1

maintainer='Coral Pink <coral.pink@disr.it>'
short_desc='Fuzzy logic control library in C++'

license='GPL-3.0-only'
homepage='https://fuzzylite.com/'

distfiles="https://github.com/fuzzylite/fuzzylite/archive/refs/tags/v${version}.tar.gz"

checksum='7e9f56deb9baf063de2232bfd8285f57ddccb651dae842fe3f587d0ac65ecdb0'

build_style='cmake'
build_wrksrc='fuzzylite'

configure_args='-Wno-dev'

# musl doesn't provide required execinfo.h header
if [ "$XBPS_TARGET_LIBC" = 'musl' ]; then
	configure_args+=' -DFL_BACKTRACE=OFF'
fi

post_install() {
	vman 'fuzzylite.1'
	vlicense '../LICENSE'
}

libfuzzylite_package() {
	short_desc+=' - library'
	pkg_install() {
		vmove "usr/lib/*.so.*"
	}
}

libfuzzylite-devel_package() {
	short_desc+=' - development files'
	depends="libfuzzylite>=${version}_${revision}"
	pkg_install() {
		vmove "usr/lib/*.so"
		vmove "usr/lib/*.a"
		vmove 'usr/include'
		vmove 'usr/lib/pkgconfig'
	}
}
