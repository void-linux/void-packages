From: Riccardo Schirone <sirmy15@gmail.com>
Date: Tue, 14 Mar 2023 20:56:59 +0100
Subject: [PATCH] rz_util: Fix cross-compilation when using system openssl

---
 librz/util/meson.build | 6 ++++--
 1 file changed, 4 insertions(+), 2 deletions(-)

diff --git a/librz/util/meson.build b/librz/util/meson.build
index 29def91b3e7..9f23dae3a38 100644
--- a/librz/util/meson.build
+++ b/librz/util/meson.build
@@ -1,6 +1,6 @@
 subdir('sdb/src')
 
-rz_util_sources = [
+rz_util_common_sources = [
   'alloc.c',
   'annotated_code.c',
   'ascii_table.c',
@@ -83,6 +83,7 @@ rz_util_sources = [
   'w32-sys.c',
   'x509.c',
 ]
+rz_util_sources = rz_util_common_sources
 
 rz_util_deps = [ldl, lrt, mth, th, utl] + platform_deps
 if zlib_dep.found()
@@ -162,8 +163,9 @@ if meson.is_cross_build()
     install_dir: rizin_incdir
   )
   rz_util_native_includes = [include_directories('.'), rz_util_includes]
+  rz_util_native_sources = rz_util_common_sources + ['big.c']
 
-  rz_util_native = static_library('rz_util_native', rz_util_sources, libsdb_sources,
+  rz_util_native = static_library('rz_util_native', rz_util_native_sources, libsdb_sources,
     include_directories: rz_util_native_includes,
     dependencies: rz_util_native_deps,
     implicit_include_directories: false,
