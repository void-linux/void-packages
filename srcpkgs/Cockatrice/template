# Template file for 'Cockatrice'
pkgname=Cockatrice
version=2.10.2
revision=1
build_style=cmake
configure_args="-DWITH_SERVER=1 -DWITH_CLIENT=1 -DWITH_ORACLE=1 -DTEST=1"
hostmakedepends="qt6-tools qt6-base pkg-config extra-cmake-modules protobuf zlib"
makedepends="qt6-base-devel liblzma-devel protobuf-devel qt6-svg-devel qt6-tools-devel
qt6-websockets-devel qt6-multimedia-devel abseil-cpp-devel gtest-devel"
short_desc="Cross-platform virtual tabletop for multiplayer card games"
maintainer="Jason Elswick <jason@jasondavid.us>"
license="GPL-2.0-only"
homepage="https://github.com/Cockatrice/Cockatrice"
distfiles="https://github.com/Cockatrice/Cockatrice/archive/refs/tags/2025-04-03-Release-${version}.tar.gz"
checksum=73cabec34604261b3ec2beb66b6a11faff0b0d1ca50f25cc58a45325a39225d4

if [ -n "$CROSS_BUILD" ]; then
	configure_args+="-DQt6_DIR=${XBPS_CROSS_BASE}/usr/lib/cmake/Qt6"
fi

if [ "$XBPS_TARGET_LIBC" = "musl" ]; then
	makedepends+=" libexecinfo-devel"
	configure_args+=" -DENABLE_LIBEXECINFO=1"
fi
