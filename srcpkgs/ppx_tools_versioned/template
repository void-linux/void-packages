# Template file for 'ppx_tools_versioned'
pkgname=ppx_tools_versioned
version=5.2
revision=1
hostmakedepends="ocaml dune ocaml-migrate-parsetree"
depends="ocaml-migrate-parsetree"
short_desc="Tools for authors of ppx rewriters"
maintainer="John Zimmermann <johnz@posteo.net>"
license="MIT"
homepage="https://github.com/ocaml-ppx/ppx_tools_versioned/"
distfiles="https://github.com/ocaml-ppx/ppx_tools_versioned/archive/${version}.tar.gz"
checksum=e8a4b7adac8c7a86a8db427834b42a114922e988c89fe0cdb02b7ceeb146c0fd
nocross=yes

do_build() {
	jbuilder build
}

do_install() {
	vmkdir $(ocamlfind printconf destdir)
	jbuilder install --prefix "${DESTDIR}/usr" --libdir "${DESTDIR}$(ocamlfind printconf destdir)"

	mv ${DESTDIR}/usr/{doc,share/}
	vlicense LICENSE
}
