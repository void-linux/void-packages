# Template file for 'golangci-lint'
pkgname=golangci-lint
version=1.35.0
revision=1
build_style=go
go_import_path=github.com/golangci/golangci-lint/cmd/golangci-lint
go_ldflags="-X main.version=${version} -X main.date=${SOURCE_DATE_EPOCH} -X main.commit=v${version}"
short_desc="Linters Runner for Go"
maintainer="Renato Aguiar <renato@renatoaguiar.net>"
license="GPL-3.0-only"
homepage="https://github.com/golangci/golangci-lint"
distfiles="https://github.com/golangci/golangci-lint/archive/v${version}.tar.gz"
checksum=71739de1aa88defc6f08c7e5118705069fee51f4fcf303cb9b7a39215ef0c56d

# XXX: LDFLAGS="-fuse-ld=bfd" does no longer work when cross compiling
# 'go build runtime/cgo: invalid flag in go:cgo_ldflag: -fuse-ld=bfd'
case "$XBPS_TARGET_MACHINE" in
	ppc*)	# @q66 : ppc64le does not (yet?) support the internal linker
		LDFLAGS="-fuse-ld=bfd"
		;;
	*)	# other targets can use go's internal linker
		go_ldflags=" -linkmode internal"
		;;
esac

post_install() {
	vdoc README.md
}
