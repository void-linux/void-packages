# Template file for 'spdlog'
pkgname=spdlog
version=1.15.2
revision=1
build_style=cmake
configure_args="-DSPDLOG_BUILD_EXAMPLE=OFF -DSPDLOG_FMT_EXTERNAL=ON
 -DSPDLOG_BUILD_SHARED=ON"
hostmakedepends="pkg-config"
makedepends="fmt-devel"
depends="libspdlog>=${version}_${revision} fmt-devel"
short_desc="Fast C++ logging library"
maintainer="skmpz <dem.procopiou@gmail.com>"
license="MIT"
homepage="https://github.com/gabime/spdlog"
distfiles="https://github.com/gabime/spdlog/archive/v${version}.tar.gz"
checksum=7a80896357f3e8e920e85e92633b14ba0f229c506e6f978578bdc35ba09e9a5d

if [ "$XBPS_CHECK_PKGS" ]; then
	configure_args+=" -DSPDLOG_BUILD_TESTS_HO=ON"
	hostmakedepends+=" catch2"
fi

libspdlog_package() {
	short_desc+=" - libraries"
	pkg_install() {
		vmove "usr/lib/*.so.*"
		vlicense LICENSE
	}
}
