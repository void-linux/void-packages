# Template file for 'gllock'
pkgname=gllock
version=09102019
revision=1
wrksrc="gllock-8123a6566e4e11f54b2ec1bd9469129fc44cd03b"
make_use_env=yes
hostmakedepends="git pkg-config"
makedepends="libXrandr-devel libX11-devel glew-devel xorgproto"
depends="libXrandr libX11 glew"
short_desc="Not so simple opengl based X display locker utility"
maintainer="Kira Patton <roundduckkira@protonmail.com>"
license="MIT"
homepage="https://github.com/kuravih/gllock"
distfiles="https://github.com/kuravih/gllock/archive/8123a6566e4e11f54b2ec1bd9469129fc44cd03b.tar.gz"
checksum=d97ff112f3f59302df282a05df239cfacee4437f9cd9f1ff38fe182b600b5b1c

do_build() {
	sed -i 's/CPPFLAGS =/CPPFLAGS +=/g' config.mk
	sed -i 's/CFLAGS =/CFLAGS +=/g' config.mk
	sed -i 's/LDFLAGS =/LDFLAGS +=/g' config.mk
	make CC=$CC INCS="-I." LIBS="-L/usr/lib -lc -lcrypt -L${X11LIB} -lX11 -lGL -lGLEW -lpthread" ${makejobs}
}

do_install() {
	make PREFIX=/usr DESTDIR=$DESTDIR install
	vlicense LICENSE
}
