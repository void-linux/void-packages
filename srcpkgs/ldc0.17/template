# Template file for 'ldc0.17'
pkgname=ldc0.17
version=0.17.6
revision=1
wrksrc="ldc-${version}-src"
build_style=cmake
configure_args="-DINCLUDE_INSTALL_DIR=/usr/include/dlang/ldc -DBUILD_SHARED_LIBS=ON
 -DBASH_COMPLETION_COMPLETIONSDIR=/usr/share/bash-completion"
conf_files="/etc/ldc2.conf"
hostmakedepends="llvm6.0 pkg-config libconfig-devel bash-completion"
depends="ldc0.17-runtime"
short_desc="Portable D programming language compiler based on LLVM, version 0.17"
maintainer="Orphaned <orphan@voidlinux.org>"
license="BSD-3-Clause, BSL-1.0, GPL-2.0-or-later"
homepage="https://wiki.dlang.org/LDC"
changelog="https://raw.githubusercontent.com/ldc-developers/ldc/master/CHANGELOG.md"
distfiles="https://github.com/ldc-developers/ldc/releases/download/v${version}/ldc-${version}-src.tar.gz"
checksum=868b8c07ab697306ea65f0006fc2b6b96db4df226e82f8f11cafbed6fa9ac561
nopie=yes
nocross=yes

post_install() {
	vlicense LICENSE
}

ldc0.17-runtime_package() {
	short_desc+=" - D runtime"
	pkg_install() {
		vmove "usr/lib/*.so*"
	}
}
