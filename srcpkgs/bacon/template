# Template file for 'bacon'
pkgname=bacon
version=4.7
revision=1
build_style=gnu-configure
configure_args="--with-bash --enable-gui-fltk"
hostmakedepends="pkg-config m4 which flex"
makedepends="fltk-devel"
short_desc="BASIC to C converter"
maintainer="Orphaned <orphan@voidlinux.org>"
license="MIT"
homepage="https://www.basic-converter.org"
changelog="https://www.basic-converter.org/stable/CHANGES"
distfiles="https://www.basic-converter.org/stable/bacon-${version}.tar.gz"
checksum=80a150cc39b7f0149207e94a4b4a89f4396b0ff9b81628b47cffbdd774d06f50
disable_parallel_build=yes
nocross=yes

if [ "$XBPS_TARGET_LIBC" = musl ]; then
	makedepends+=" musl-fts-devel"
	depends+=" musl-fts-devel"
	LDFLAGS="-lfts"
fi

if [ "$XBPS_TARGET_ENDIAN" = "be" ]; then
	broken="bacon.sh: line 776: 2242 Segmentation fault coproc COPROC ${g_BACONTOKEN}.exe"
fi

post_install() {
	rm -f ${DESTDIR}/usr/share/bacon/LICENSE
	vlicense LICENSE
}
