# Template file for 'bacon'
pkgname=bacon
version=5.0.2
revision=1
build_style=gnu-configure
configure_args="--with-bash --enable-gui-gtk4"
hostmakedepends="pkg-config m4 which flex"
makedepends="gtk4-devel gtksourceview5-devel libpng-devel"
short_desc="BASIC to C converter"
maintainer="Orphaned <orphan@voidlinux.org>"
license="MIT"
homepage="https://www.basic-converter.org"
changelog="https://www.basic-converter.org/stable/CHANGES"
distfiles="https://www.basic-converter.org/museum/bacon-${version}.tar.gz"
checksum=50950d3e1d3ab5405b89501c2875f55306035c81824c4ef29176f23cf507e721
disable_parallel_build=yes
nocross=yes

if [ "$XBPS_TARGET_LIBC" = musl ]; then
	makedepends+=" musl-fts-devel"
	depends+=" musl-fts-devel"
	LDFLAGS="-lfts"
fi

if [ "$XBPS_TARGET_ENDIAN" = "be" ]; then
	broken="bacon.sh: line 776: 2242 Segmentation fault coproc COPROC ${g_BACONTOKEN}.exe"
fi

post_install() {
	rm -f ${DESTDIR}/usr/share/bacon/LICENSE
	vlicense LICENSE.txt
}
