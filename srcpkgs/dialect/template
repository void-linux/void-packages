# Template file for 'dialect'
pkgname=dialect
version=2.5.0
revision=1
build_style=meson
hostmakedepends="blueprint-compiler desktop-file-utils gettext glib-devel
 gtk4-update-icon-cache pkg-config"
makedepends="libadwaita-devel libsoup3-devel python3-gobject-devel"
depends="gst-plugins-good1 libadwaita libsoup3 python3-BeautifulSoup4
 python3-dbus python3-gobject python3-gtts"
short_desc="Translation app for GNOME"
maintainer="chrysos349 <chrysostom349@gmail.com>"
license="GPL-3.0-or-later"
homepage="https://github.com/dialect-app/dialect"
changelog="https://raw.githubusercontent.com/dialect-app/dialect/main/NEWS.md"
_commit=1fdb2525674005ecde58f1498f00edfa0bd58b55
distfiles="https://github.com/dialect-app/dialect/archive/${version}.tar.gz
 https://github.com/dialect-app/po/archive/${_commit}.tar.gz"
checksum="5b506728175c60a642bb02723291193df815e04a42a0cdc5e3e41dcdf7d26b5f
 9de804d18d186d4996e300fb8d92d164f3429dda9baaa1fa9386e0fdc2803424"
skip_extraction="${_commit}.tar.gz"

post_extract() {
	vsrcextract -C po "${_commit}.tar.gz"
}

if [ "$CROSS_BUILD" ]; then
	export GI_TYPELIB_PATH="${XBPS_CROSS_BASE}/usr/lib/girepository-1.0"
fi
