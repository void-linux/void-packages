# Template file for 'glaxnimate'
pkgname=glaxnimate
version=0.5.1
revision=1
_cmake_modules_version=c97690cc0024a1842cd8de71334a2ee9c5f7e729
_cmake_lib_version=8af80b5668dbc6a0210e09a969a1b43fc99f39ba
_color_widgets_version=091c29463bbeec1a672598af4597055ba24842cd
_history_lineedit_version=5b761f436e8b31491e06b26460d28a2eaef0babc
build_wrksrc="$pkgname-$version"
build_style=cmake
configure_args="-DVERSION_SUFFIX= -DSCRIPTING_JS=ON -DSCRIPTING_PY=ON
 -Dpybind11_DIR=${XBPS_CROSS_BASE}/${py3_sitelib}/pybind11/share/cmake/pybind11/"
hostmakedepends="python3 qt5-qmake qt5-host-tools"
makedepends="qt5-devel qt5-tools-devel qt5-core qt5-widgets qt5-xml
 qt5-concurrent qt5-network qt5-svg-devel potrace-devel python3-devel
 python3-pybind11 ffmpeg-devel libarchive-devel"
depends="python3-lottie breeze-icons qt5-imageformats"
checkdepends="qt5-test"
short_desc="Simple vector animation program"
maintainer="classabbyamp <void@placeviolette.net>"
license="GPL-3.0-or-later"
homepage="https://glaxnimate.mattbas.org"
changelog="https://gitlab.com/mattbas/glaxnimate/-/raw/master/CHANGELOG.md"
distfiles="https://gitlab.com/mattbas/glaxnimate/-/archive/${version}/glaxnimate-${version}.tar.gz
 https://github.com/rpavlik/cmake-modules/archive/${_cmake_modules_version}.tar.gz
 https://gitlab.com/mattbas/CMake-Lib/-/archive/${_cmake_lib_version}/CMake-Lib-${_cmake_lib_version}.tar.gz
 https://gitlab.com/mattbas/Qt-Color-Widgets/-/archive/${_color_widgets_version}/Qt-Color-Widgets-${_color_widgets_version}.tar.gz
 https://gitlab.com/mattbas/Qt-History-LineEdit/-/archive/${_history_lineedit_version}/Qt-History-LineEdit-${_history_lineedit_version}.tar.gz"
checksum="77d9bee22bb58f2a6ecd082adad06a092ee60d0eafbd3b4bd8ae93936a9274be
 5bc7ec244e7b53b1f7c20d5339ac4c83701d7b0e8b23ff1522d05fb495b76273
 ef7a6a963b6117f161a41b34d8c2488b030c953bc4de935d8d4c9fa28114ed57
 6e2e36ebbdad9d7c89d7d5abb59bee4374b25cceeae1ec3353d3814b8a6b6ab9
 00e63231f41f8f0c9274990c6d1fb394ffa7e7bc72c673defeb87479c2110ca9"

post_extract() {
	cd $build_wrksrc
	rm -r cmake external/cmake-modules external/Qt-Color-Widgets external/Qt-History-LineEdit
	cp -r ../CMake-Lib-${_cmake_lib_version}/ cmake
	cp -r ../cmake-modules-${_cmake_modules_version}/ external/cmake-modules
	cp -r ../Qt-Color-Widgets-${_color_widgets_version}/ external/Qt-Color-Widgets
	cp -r ../Qt-History-LineEdit-${_history_lineedit_version}/ external/Qt-History-LineEdit
}
