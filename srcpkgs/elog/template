# Template file for 'elog'
pkgname=elog
_elogrel=1
version=3.1.4
revision=1
build_style=gnu-makefile
make_dirs="/etc/elog 0750 root elog
/var/lib/elog/logbooks 0750 elog elog"
system_accounts="elog"
hostmakedepends=""
makedepends="libressl-devel"
depends="libressl"
short_desc="Logbook system to manage notes through a Web interface"
maintainer="Christian Poulwey <christian.poulwey@t-online.de>"
license="GPL-3.0-or-later"
homepage="https://elog.psi.ch/elog/"
distfiles="https://elog.psi.ch/elog/download/tar/$pkgname-$version-$_elogrel.tar.gz"
checksum=4bfa2bef6cfa20aba73c9c6c044a4c83f20cf03e7de3c0dda4a4477f28b7b72e

do_build() {
	make $makejobs
}
do_install() {
	vbin	elog
	vbin	elogd
	vbin	elconv

	vman	man/elog.1

	vmkdir	usr/share/elog
	
	vcopy	resources	usr/share/elog
	vcopy	scripts		usr/share/elog
	vcopy	themes		usr/share/elog

	sed -i 	'/\[global\]/s/$/\nLogbook dir = \/var\/lib\/elog\/logbooks/' elogd.cfg
	sed -i '/\[global\]/s/$/\nResource dir = \/usr\/share\/elog/' elogd.cfg
	vsconf	elogd.cfg

	vsv	elogd
}
