# Template file for 'cookcli'
pkgname=cookcli
version=0.21.0
revision=1
build_style=cargo
configure_args="--no-default-features"
hostmakedepends="nodejs pkg-config"
makedepends="openssl-devel"
short_desc="CLI + embedded web-server to work with Cooklang recipes"
maintainer="Trong-Lanh, Rémi Nɢᴜʏᴇɴ <tl.remi.nguyen@gmail.com>"
license="MIT"
homepage="https://cooklang.org/"
changelog="https://raw.githubusercontent.com/cooklang/${pkgname}/refs/tags/v${version}/CHANGELOG.md"
distfiles="https://github.com/cooklang/${pkgname}/archive/refs/tags/v${version}.tar.gz"
checksum=b4f7ace0d2d294ad16c989a99937dadb403e8410106aa6f05e7164098d7fa8cc

pre_build() {
	npm install
	npm audit fix
	npm run build-css
}

post_install() {
	vlicense LICENSE
	vsed -i '/update\.md/d' docs/README.md
	vdoc docs/README.md
	vdoc docs/doctor.md
	vdoc docs/import.md
	vdoc docs/lsp.md
	vdoc docs/pantry.md
	vdoc docs/recipe.md
	vdoc docs/report.md
	vdoc docs/search.md
	vdoc docs/seed.md
	vdoc docs/server.md
	vdoc docs/shopping-list.md
}
