# Template build file for 'sessreg'.
pkgname=sessreg
version=1.1.1
revision=1
build_style=gnu-configure
hostmakedepends="pkg-config"
makedepends="libX11-devel"
short_desc="Manage utmp/wtmp entries for xdm"
homepage="http://xorg.freedesktop.org"
license="MIT"
maintainer="Juan RP <xtraeme@voidlinux.eu>"
distfiles="${XORG_SITE}/app/$pkgname-$version.tar.bz2"
checksum=78a76ae3f3f6a26547a34630d1b740f42344848b5fb6d7c9c7f7da255e35a6e1

case "$XBPS_TARGET_MACHINE" in
	*-musl)
		# musl does not define _WTMPX_FILE, use WTMP_FILE instead.
		CFLAGS="-D_WTMPX_FILE=WTMP_FILE -D_PATH_WTMPX=_PATH_WTMP"
		# musl does not define _UTMPX_FILE, use UTMP_FILE instead.
		CFLAGS+=" -D_UTMPX_FILE=UTMP_FILE -D_PATH_UTMPX=_PATH_UTMP"
		;;
esac

post_install() {
	vlicense COPYING
}
