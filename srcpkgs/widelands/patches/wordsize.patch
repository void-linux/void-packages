--- a/src/base/macros.h
+++ b/src/base/macros.h
@@ -28,6 +28,9 @@
 #endif
 #endif
 
+/* Used for wordsize only */
+#include <limits.h>
+
 /* Macros for disabling GCC warnings and errors
  * From http://dbp-consulting.com/tutorials/SuppressingGCCWarnings.html and
  * slightly modified to remove support entirely for GCC < 4.6 because we'll
@@ -135,10 +138,10 @@
 #define PRIuS PRIu32
 #endif
 #else
-#if __WORDSIZE == 64
+#if (ULONG_MAX == 0xffffffffffffffff)
 #define PRIuS "lu"
 #else
-#if defined(__WORDSIZE32_SIZE_ULONG) && __WORDSIZE32_SIZE_ULONG
+#if (ULONG_MAX == 0xffffffff)
 #define PRIuS "lu"
 #else
 #define PRIuS "u"
