--- a/configure.in
+++ b/configure.in
@@ -33,6 +33,15 @@ gl_EARLY
 AC_PROG_CC
 AM_PROG_CC_C_O
 
+AC_TYPE_LONG_LONG_INT
+
+if test "$ac_cv_type_long_long_int" = yes; then
+  ac_cv_type_long_long=yes
+  AC_DEFINE(HAVE_LONG_LONG, 1, [Define if you have the 'long long' type.])
+else
+  ac_cv_type_long_long=no
+fi
+
 # Find the posix library needed on INTERACTIVE UNIX (ISC)
 dnl
 dnl From the Autoconf 2.53 manual (AC_ISC_POSIX):
@@ -150,7 +159,7 @@ AM_CONDITIONAL(MAKE_TARGETS_IN_VPATH, \
 		|| test $srcdir = .)
 
 AC_HEADER_DIRENT
-AC_HEADER_STDC
+AC_DEFINE(STDC_HEADERS, 1, "stdc headers")
 AC_HEADER_SYS_WAIT
 AC_CHECK_HEADERS(\
 	direct.h \
@@ -180,6 +189,7 @@ AC_CHECK_MEMBERS([struct stat.st_blksize
 AC_CHECK_MEMBERS([struct stat.st_rdev])
 
 AC_FUNC_FSEEKO
+AC_CHECK_FUNCS(fseeko)
 if test $ac_cv_func_fseeko = no; then
     AC_LIBOBJ(fseeko)
     AC_LIBOBJ(ftello)
@@ -207,7 +217,7 @@ gl_INIT
 dnl For one reason or another, the autogenerated m4/gnulib.m4 wants
 dnl AM_GNU_GETTEXT([external]) called directly from here.
 AM_GNU_GETTEXT([external])
-AM_GNU_GETTEXT_VERSION dnl work around for autoconf-2.57 bug.
+AM_GNU_GETTEXT_VERSION(0.19.8) dnl work around for autoconf-2.57 bug.
 # The error module still poses merge problems.
 AC_FUNC_STRERROR_R
 dnl The following macros can be called by other GNULIB macros but are also
@@ -220,8 +230,8 @@ AC_REQUIRE([gt_TYPE_WCHAR_T])
 AC_REQUIRE([gt_TYPE_WINT_T])
 AC_REQUIRE([gl_AC_TYPE_INTMAX_T])
 AC_REQUIRE([gl_FUNC_MMAP_ANON])
-AC_REQUIRE([gl_AC_TYPE_LONG_LONG])])
+])
 CCVS_CALL_GNULIB_MACROS_ONCE()
 dnl Until I persuade the GNULIB folks to integrate this module.
 gl_GLOB
 
--- a/m4/allocsa.m4
+++ b/m4/allocsa.m4
@@ -10,6 +10,5 @@ AC_DEFUN([gl_ALLOCSA],
   dnl @ALLOCA@ and @LTALLOCA@.
   AC_REQUIRE([gl_FUNC_ALLOCA])
   AC_REQUIRE([gl_EEMALLOC])
-  AC_REQUIRE([gl_AC_TYPE_LONG_LONG])
   AC_REQUIRE([gt_TYPE_LONGDOUBLE])
 ])
--- a/m4/intmax_t.m4
+++ b/m4/intmax_t.m4
@@ -18,7 +18,6 @@ AC_DEFUN([gl_AC_TYPE_INTMAX_T],
   AC_REQUIRE([gl_AC_HEADER_INTTYPES_H])
   AC_REQUIRE([gl_AC_HEADER_STDINT_H])
   if test $gl_cv_header_inttypes_h = no && test $gl_cv_header_stdint_h = no; then
-    AC_REQUIRE([gl_AC_TYPE_LONG_LONG])
     test $ac_cv_type_long_long = yes \
       && ac_type='long long' \
       || ac_type='long'
@@ -51,7 +50,6 @@ AC_DEFUN([gt_AC_TYPE_INTMAX_T],
     AC_DEFINE(HAVE_INTMAX_T, 1,
       [Define if you have the 'intmax_t' type in <stdint.h> or <inttypes.h>.])
   else
-    AC_REQUIRE([gl_AC_TYPE_LONG_LONG])
     test $ac_cv_type_long_long = yes \
       && ac_type='long long' \
       || ac_type='long'
--- a/m4/vasnprintf.m4
+++ b/m4/vasnprintf.m4
@@ -23,7 +23,6 @@ AC_DEFUN([gl_FUNC_VASNPRINTF],
 AC_DEFUN([gl_PREREQ_PRINTF_ARGS],
 [
   AC_REQUIRE([bh_C_SIGNED])
-  AC_REQUIRE([gl_AC_TYPE_LONG_LONG])
   AC_REQUIRE([gt_TYPE_LONGDOUBLE])
   AC_REQUIRE([gt_TYPE_WCHAR_T])
   AC_REQUIRE([gt_TYPE_WINT_T])
@@ -32,7 +31,6 @@ AC_DEFUN([gl_PREREQ_PRINTF_ARGS],
 # Prequisites of lib/printf-parse.h, lib/printf-parse.c.
 AC_DEFUN([gl_PREREQ_PRINTF_PARSE],
 [
-  AC_REQUIRE([gl_AC_TYPE_LONG_LONG])
   AC_REQUIRE([gt_TYPE_LONGDOUBLE])
   AC_REQUIRE([gt_TYPE_WCHAR_T])
   AC_REQUIRE([gt_TYPE_WINT_T])
@@ -45,7 +43,6 @@ AC_DEFUN([gl_PREREQ_PRINTF_PARSE],
 AC_DEFUN([gl_PREREQ_VASNPRINTF],
 [
   AC_REQUIRE([AC_FUNC_ALLOCA])
-  AC_REQUIRE([gl_AC_TYPE_LONG_LONG])
   AC_REQUIRE([gt_TYPE_LONGDOUBLE])
   AC_REQUIRE([gt_TYPE_WCHAR_T])
   AC_REQUIRE([gt_TYPE_WINT_T])
