# Template file for 'osmin'
pkgname=osmin
version=1.8.7
revision=1
_libosmscout_version=1.9.2
build_style=cmake
configure_args="-DCMAKE_C_COMPILER=/usr/bin/clang -DCMAKE_CXX_COMPILER=/usr/bin/clang++ ."
hostmakedepends="qt5-qmake pkg-config qt5-host-tools git"
makedepends="marisa-devel libxml2-devel qt5-declarative-devel qt5-3d clang libgomp-devel
 libomp-devel qt5-declarative-devel qt5-tools-devel
 qt5-svg-devel   qt5-quickcontrols2-devel qt5-sensors-devel
 qt5-multimedia-devel qt5-remoteobjects-devel qt5-location-devel"
short_desc="GPS Navigator On-Road/Off-Road"

archs="~armv6l-musl ~armv7l ~i686" # libomp-devel
license="GPL-3.0-only"
maintainer="Eloi Torrents <eloitor@disroot.org>"
homepage="https://github.com/janbar/osmin"
distfiles="
 https://github.com/janbar/osmin/archive/refs/tags/${version}.tar.gz
 https://github.com/janbar/libosmscout/archive/refs/tags/${pkgname}-${_libosmscout_version}.tar.gz"
checksum="
 39ffdeb300de23ddebbd8042ccc9fcbc5411258f3b8f104d089842afc1b5a05e
 c74e61d07c2447e8959ca5a19c1ffd0c5ae61dd880bf614f12df02e9106fa585"
nopie_files="/usr/bin/osmin"

pre_configure() {
	rmdir -v backend/libosmscout
	mv -v ../libosmscout-${pkgname}-${_libosmscout_version} backend/libosmscout
}
