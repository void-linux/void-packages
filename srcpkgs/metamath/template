# Template file for 'metamath'
pkgname=metamath
version=0.179
revision=1
build_style=gnu-configure
hostmakedepends="autoconf automake"
short_desc="Constructs mathematics from scratch, starting from ZFC"
maintainer="Zhengqun Koo <root@zhengqunkoo.com>"
license="GPL-2.0-or-later"
homepage="http://us.metamath.org"
distfiles="http://us.metamath.org/downloads/metamath.tar.gz"
checksum=9bcf83d0a05c13fb0b71638170f3bf7afe43a43529b4684fa1a49c3ecf011687

do_extract() {
	tar -xzf ${XBPS_SRCDISTDIR}/${pkgname}-${version}/${pkgname}.tar.gz \
		--strip-components=1
}

post_extract() {
	# Remove metamath databases, needed only for tests
	sed -ie "/dist_pkgdata_DATA/,/^\s*$/{d}" Makefile.am
}

pre_configure() {
	autoreconf -i
}
