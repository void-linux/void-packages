From a34c208c262a5c66b560d9cb2e4652344a12b485 Mon Sep 17 00:00:00 2001
From: Twilighttony <starrbeartony14@zoho.com>
Date: Wed, 6 Oct 2021 01:42:09 -0400
Subject: [PATCH] changes

---
 custom/conf/app.example.ini | 146 +++++++++++++-----------------------
 1 file changed, 51 insertions(+), 95 deletions(-)

diff --git a/custom/conf/app.example.ini b/custom/conf/app.example.ini
index 0a25e7e5c..53399e099 100644
--- a/custom/conf/app.example.ini
+++ b/custom/conf/app.example.ini
@@ -15,7 +15,7 @@
 APP_NAME = ; Gitea: Git with a cup of tea
 ;;
 ;; RUN_USER will automatically detect the current user - but you can set it here change it if you run locally
-RUN_USER = ; git
+RUN_USER = _gitea
 ;;
 ;; Application run mode, affects performance and debugging. Either "dev", "prod" or "test", default is "prod"
 RUN_MODE = ; prod
@@ -48,8 +48,8 @@ RUN_MODE = ; prod
 ;; will be started on PORT_TO_REDIRECT and it will redirect plain, non-secure http requests to the main
 ;; ROOT_URL.  Defaults are false for REDIRECT_OTHER_PORT and 80 for
 ;; PORT_TO_REDIRECT.
-;REDIRECT_OTHER_PORT = false
-;PORT_TO_REDIRECT = 80
+REDIRECT_OTHER_PORT = false
+PORT_TO_REDIRECT = 80
 ;;
 ;; Timeout for any write to the connection. (Set to 0 to disable all timeouts.)
 ;PER_WRITE_TIMEOUT = 30s
@@ -58,7 +58,7 @@ RUN_MODE = ; prod
 ;PER_WRITE_PER_KB_TIMEOUT = 30s
 ;;
 ;; Permission for unix socket
-;UNIX_SOCKET_PERMISSION = 666
+UNIX_SOCKET_PERMISSION = 660
 ;;
 ;; Local (DMZ) URL for Gitea workers (such as SSH update) accessing web service.
 ;; In most cases you do not need to change the default value.
@@ -85,14 +85,14 @@ RUN_MODE = ; prod
 ;SSH_PORT = 22
 ;;
 ;; The port number the builtin SSH server should listen on
-;SSH_LISTEN_PORT = %(SSH_PORT)s
+SSH_LISTEN_PORT = %(SSH_PORT)s
 ;;
 ;; Root path of SSH directory, default is '~/.ssh', but you have to use '/home/git/.ssh'.
-;SSH_ROOT_PATH =
+SSH_ROOT_PATH = /var/lib/gitea
 ;;
 ;; Gitea will create a authorized_keys file by default when it is not using the internal ssh server
 ;; If you intend to use the AuthorizedKeysCommand functionality then you should turn this off.
-;SSH_CREATE_AUTHORIZED_KEYS_FILE = true
+SSH_CREATE_AUTHORIZED_KEYS_FILE = true
 ;;
 ;; Gitea will create a authorized_principals file by default when it is not using the internal ssh server
 ;; If you intend to use the AuthorizedPrincipalsCommand functionality then you should turn this off.
@@ -174,14 +174,14 @@ RUN_MODE = ; prod
 ;; $ openssl pkcs12 -in cert.pfx -out key.pem -nocerts -nodes
 ;; Paths are relative to CUSTOM_PATH
 ;CERT_FILE = https/cert.pem
-;KEY_FILE = https/key.pem
+KEY_FILE = https/key.pem
 ;;
 ;; Root directory containing templates and static files.
 ;; default is the path where Gitea is executed
-;STATIC_ROOT_PATH =
+STATIC_ROOT_PATH = /var/lib/gitea
 ;;
 ;; Default path for App data
-;APP_DATA_PATH = data
+APP_DATA_PATH = /var/lib/gitea/data
 ;;
 ;; Enable gzip compression for runtime-generated content, static resources excluded
 ;ENABLE_GZIP = false
@@ -199,10 +199,10 @@ RUN_MODE = ; prod
 ;LANDING_PAGE = home
 ;;
 ;; Enables git-lfs support. true or false, default is false.
-;LFS_START_SERVER = false
+LFS_START_SERVER = false
 ;;
 ;; Where your lfs files reside, default is data/lfs.
-;LFS_CONTENT_PATH = data/lfs
+LFS_CONTENT_PATH = /var/lib/gitea/data/lfs
 ;;
 ;; LFS authentication secret, change this yourself
 LFS_JWT_SECRET =
@@ -243,10 +243,10 @@ LFS_JWT_SECRET =
 ;;
 ;; MySQL Configuration
 ;;
-DB_TYPE = mysql
-HOST = 127.0.0.1:3306 ; can use socket e.g. /var/run/mysqld/mysqld.sock
-NAME = gitea
-USER = root
+;DB_TYPE = mysql
+;HOST = 127.0.0.1:3306 ; can use socket e.g. /var/run/mysqld/mysqld.sock
+;NAME = gitea
+;USER = root
 ;PASSWD = ;Use PASSWD = `your password` for quoting if you use special characters in the password.
 ;SSL_MODE = false ; either "false" (default), "true", or "skip-verify"
 ;CHARSET = utf8mb4 ;either "utf8" or "utf8mb4", default is "utf8mb4".
@@ -269,9 +269,9 @@ USER = root
 ;;
 ;; SQLite Configuration
 ;;
-;DB_TYPE = sqlite3
-;PATH= ; defaults to data/gitea.db
-;SQLITE_TIMEOUT = ; Query timeout defaults to: 500
+DB_TYPE = sqlite3
+PATH= /var/lib/gitea/data/gitea.db ; defaults to data/gitea.db
+SQLITE_TIMEOUT = 500 ; Query timeout defaults to: 500
 ;;
 ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
 ;;
@@ -435,7 +431,7 @@ TRUSTED_FACETS = ; e.g. http://localhost:3000/
 ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
 ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
 ;; Root path for the log files - defaults to %(GITEA_WORK_DIR)/log
-;ROOT_PATH =
+ROOT_PATH = /var/log/gitea
 ;;
 ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
 ;; Main Logger
@@ -741,10 +734,10 @@ PATH =
 ;[repository]
 ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
 ;; Root path for storing all repository data. It must be an absolute path. By default, it is stored in a sub-directory of `APP_DATA_PATH`.
-;ROOT =
+ROOT = /var/lib/gitea/repositories
 ;;
 ;; The script type this server supports. Usually this is `bash`, but some users report that only `sh` is available.
-;SCRIPT_TYPE = bash
+SCRIPT_TYPE = bash
 ;;
 ;; DETECTED_CHARSETS_ORDER tie-break order for detected charsets.
 ;; If the charsets have equal confidence, tie-breaking will be done by order in this list
@@ -831,27 +827,27 @@ PATH =
 
 ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
 ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
-;[repository.local]
+[repository.local]
 ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
 ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
 ;;
 ;; Path for local repository copy. Defaults to `tmp/local-repo`
-;LOCAL_COPY_PATH = tmp/local-repo
+LOCAL_COPY_PATH = /var/lib/gitea/tmp/local-repo
 
 ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
 ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
-;[repository.upload]
+[repository.upload]
 ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
 ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
 ;;
 ;; Whether repository file uploads are enabled. Defaults to `true`
-;ENABLED = true
+ENABLED = true
 ;;
 ;; Path for uploads. Defaults to `data/tmp/uploads` (tmp gets deleted on gitea restart)
-;TEMP_PATH = data/tmp/uploads
+TEMP_PATH = /var/lib/gitea/data/tmp/uploads
 ;;
 ;; Comma-separated list of allowed file extensions (`.zip`), mime types (`text/plain`) or wildcard type (`image/*`, `audio/*`, `video/*`). Empty value or `*/*` allows all types.
-;ALLOWED_TYPES =
+ALLOWED_TYPES =
 ;;
 ;; Max size of each file in megabytes. Defaults to 3MB
 ;FILE_MAX_SIZE = 3


@@ -1035,10 +1027,10 @@ PATH =
 ;SHOW_USER_EMAIL = true
 ;;
 ;; Set the default theme for the Gitea install
-;DEFAULT_THEME = auto
+;DEFAULT_THEME = gitea
 ;;
 ;; All available themes. Allow users select personalized themes regardless of the value of `DEFAULT_THEME`.
-;THEMES = auto,gitea,arc-green
+;THEMES = gitea,arc-green
 ;;
 ;; All available reactions users can choose on issues/prs and comments.
 ;; Values can be emoji alias (:smile:) or a unicode emoji.
@@ -1175,16 +1167,16 @@ PATH =
 ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
 ;;
 ;; Issue indexer type, currently support: bleve, db or elasticsearch, default is bleve
-;ISSUE_INDEXER_TYPE = bleve
+ISSUE_INDEXER_TYPE = bleve
 ;;
 ;; Issue indexer storage path, available when ISSUE_INDEXER_TYPE is bleve
-;ISSUE_INDEXER_PATH = indexers/issues.bleve
+ISSUE_INDEXER_PATH = /var/lib/gitea/indexers/issues.bleve
 ;;
 ;; Issue indexer connection string, available when ISSUE_INDEXER_TYPE is elasticsearch
 ;ISSUE_INDEXER_CONN_STR = http://elastic:changeme@localhost:9200
 ;;
 ;; Issue indexer name, available when ISSUE_INDEXER_TYPE is elasticsearch
-;ISSUE_INDEXER_NAME = gitea_issues
+ISSUE_INDEXER_NAME = gitea_issues
 ;;
 ;; Timeout the indexer if it takes longer than this to start.
 ;; Set to zero to disable timeout.
@@ -1538,10 +1530,10 @@ PATH =
 ;GC_INTERVAL_TIME = 86400
 ;;
 ;; Session life time in seconds, default is 86400 (1 day)
-;SESSION_LIFE_TIME = 86400
+SESSION_LIFE_TIME = 86400
 ;;
 ;; SameSite settings. Either "none", "lax", or "strict"
-;SAME_SITE=lax
+SAME_SITE=lax
 
 ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
 ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
@@ -1641,7 +1633,7 @@ PATH =
 ;;
 ;; Location the UI time display i.e. Asia/Shanghai
 ;; Empty means server's location setting
-;DEFAULT_UI_LOCATION =
+DEFAULT_UI_LOCATION =
 
 ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
 ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
@@ -1679,7 +1671,7 @@ PATH =
 ;; Notice if not success
 ;NO_SUCCESS_NOTICE = false
 ;; Time interval for job to run
-;SCHEDULE = @midnight
+;SCHEDULE = @every 24h
 ;; Archives created more than OLDER_THAN ago are subject to deletion
 ;OLDER_THAN = 24h
 
@@ -1705,7 +1697,7 @@ PATH =
 ;[cron.repo_health_check]
 ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
 ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
-;SCHEDULE = @midnight
+;SCHEDULE = @every 24h
 ;; Enable running Repository health check task periodically.
 ;ENABLED = true
 ;; Run Repository health check task when Gitea starts.
@@ -1730,7 +1722,7 @@ PATH =
 ;RUN_AT_START = true
 ;; Notice if not success
 ;NO_SUCCESS_NOTICE = false
-;SCHEDULE = @midnight
+;SCHEDULE = @every 24h
 
 ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
 ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
@@ -1744,7 +1736,7 @@ PATH =
 ;; Notice if not success
 ;NO_SUCCESS_NOTICE = false
 ;; Interval as a duration between each synchronization. (default every 24h)
-;SCHEDULE = @midnight
+;SCHEDULE = @every 24h
 
 ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
 ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
@@ -1759,7 +1751,7 @@ PATH =
 ;; Notice if not success
 ;NO_SUCCESS_NOTICE = false
 ;; Interval as a duration between each synchronization (default every 24h)
-;SCHEDULE = @midnight
+;SCHEDULE = @every 24h
 ;; Create new users, update existing user data and disable users that are not in external source anymore (default)
 ;;   or only create new users if UPDATE_EXISTING is set to false
 ;UPDATE_EXISTING = true
@@ -1777,7 +1769,7 @@ PATH =
 ;; Notice if not success
 ;NO_SUCCESS_NOTICE = false
 ;; Interval as a duration between each synchronization (default every 24h)
-;SCHEDULE = @midnight
+;SCHEDULE = @every 24h
 ;; deleted branches than OLDER_THAN ago are subject to deletion
 ;OLDER_THAN = 24h
 
@@ -1793,7 +1785,7 @@ PATH =
 ;; Whether to always run at start up time (if ENABLED)
 ;RUN_AT_START = false
 ;; Time interval for job to run
-;SCHEDULE = @midnight
+;SCHEDULE = @every 24h
 ;; OlderThan or PerWebhook. How the records are removed, either by age (i.e. how long ago hook_task record was delivered) or by the number to keep per webhook (i.e. keep most recent x deliveries per webhook).
 ;CLEANUP_TYPE = OlderThan
 ;; If CLEANUP_TYPE is set to OlderThan, then any delivered hook_task records older than this expression will be deleted.
@@ -1883,7 +1875,7 @@ PATH =
 ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
 ;ENABLED = false
 ;RUN_AT_START = false
-;NO_SUCCESS_NOTICE = false
+;NO_SUCCESS_NOTICE = f;alse
 ;SCHEDULE = @every 72h
 
 ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
@@ -1907,7 +1899,7 @@ PATH =
 ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
 ;ENABLED = false
 ;RUN_AT_START = false
-;NO_SUCCESS_NOTICE = false
+;NO_SUCCESS_NOTICE = f;alse
 ;SCHEDULE = @every 72h
 
 ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

@@ -1974,8 +1960,8 @@ PATH =
 ;[i18n]
 ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
 ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
-;LANGS = en-US,zh-CN,zh-HK,zh-TW,de-DE,fr-FR,nl-NL,lv-LV,ru-RU,uk-UA,ja-JP,es-ES,pt-BR,pt-PT,pl-PL,bg-BG,it-IT,fi-FI,tr-TR,cs-CZ,sr-SP,sv-SE,ko-KR,el-GR,fa-IR,hu-HU,id-ID,ml-IN
-;NAMES = English,简体中文,繁體中文（香港）,繁體中文（台灣）,Deutsch,français,Nederlands,latviešu,русский,Українська,日本語,español,português do Brasil,Português de Portugal,polski,български,italiano,suomi,Türkçe,čeština,српски,svenska,한국어,ελληνικά,فارسی,magyar nyelv,bahasa Indonesia,മലയാളം
+;LANGS = en-US,zh-CN,zh-HK,zh-TW,de-DE,fr-FR,nl-NL,lv-LV,ru-RU,uk-UA,ja-JP,es-ES,pt-BR,pt-PT,pl-PL,bg-BG,it-IT,fi-FI,tr-TR,cs-CZ,sr-SP,sv-SE,ko-KR
+;NAMES = English,简体中文,繁體中文（香港）,繁體中文（台灣）,Deutsch,français,Nederlands,latviešu,русский,Українська,日本語,español,português do Brasil,Português de Portugal,polski,български,italiano,suomi,Türkçe,čeština,српски,svenska,한국어
 
 ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
 ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

2.33.0

