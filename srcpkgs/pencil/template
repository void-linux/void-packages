# Template file for 'pencil'
pkgname=pencil
version=3.1.0
revision=1
archs="x86_64"
hostmakedepends="nodejs yarn"
short_desc="Open-source GUI prototyping tool"
maintainer="Jlll1 <arghantentua@tutanota.com>"
license="GPL-2.0-only"
homepage="https://pencil.evolus.vn/"
distfiles="https://github.com/evolus/pencil/archive/v${version}.tar.gz"
checksum=e14eddd0aad28919cfdf8d47b726f9c75a3a0d2042605e8da96309c23a995f44

post_extract() {
	yarn install --ignore-engines
}

do_build() {
	./node_modules/.bin/build --linux --x64
}

do_install() {
	vmkdir usr/lib/pencil
	vcopy dist/linux-unpacked/* usr/lib/pencil

	vmkdir usr/bin
	ln -s /usr/lib/pencil/pencil ${DESTDIR}/usr/bin/

	vmkdir usr/share/applications
	vinstall ${FILESDIR}/pencil.desktop 644 usr/share/applications/

	vmkdir usr/share/icons/hicolor
	for size in 16 24 32 48 64 96 128 256; do
		vinstall build/icons/${size}x${size}.png 644 usr/share/icons/hicolor/${size}x${size}/apps/pencil.png
	done
}
