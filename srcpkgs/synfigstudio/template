# Template file for 'synfigstudio'
pkgname=synfigstudio
version=1.3.16
revision=1
build_style=gnu-configure
wrksrc="synfig-${version}"
build_wrksrc=synfig-studio
configure_args="--disable-update-mimedb"
hostmakedepends="pkg-config intltool gettext-devel libtool automake"
makedepends="ETL synfig-devel gtkmm-devel libltdl-devel boost-devel"
short_desc="Vector based 2D animation studio"
maintainer="newbluemoon <blaumolch@mailbox.org>"
license="GPL-2.0-or-later"
homepage="http://www.synfig.org/"
distfiles="https://github.com/synfig/synfig/archive/v${version}.tar.gz"
checksum=69113f9e45ccd2e216b2ddeb8a9eb007a9b9c1f9f65032da911b5ef21aa3c3fc
python_version=3 #unverified
CXXFLAGS="-Wno-deprecated-copy"

if [ -n "$CROSS_BUILD" ]; then
	# uses synfig to create some icons
	hostmakedepends+=" synfig"
fi

pre_configure() {
        libtoolize --ltdl --copy --force
        autopoint --force
        AUTOPOINT='intltoolize --automake --copy' autoreconf --force --install --verbose
        sed 's/itlocaledir = $(prefix)\/$(DATADIRNAME)\/locale/itlocaledir = $(datarootdir)\/locale/' < po/Makefile.in.in > po/Makefile.in.in.tmp
        mv -f po/Makefile.in.in.tmp po/Makefile.in.in
}

synfigstudio-devel_package() {
	depends="${sourcepkg}>=${version}_${revision}"
	short_desc+=" - development files"
	pkg_install() {
		vmove usr/include
		vmove usr/lib/*.so
	}
}
