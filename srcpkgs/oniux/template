# Template file for 'oniux'
pkgname=oniux
version=0.7.0
revision=1
archs="x86_64* i686* aarch64* arm*" # ring
build_style=cargo
hostmakedepends="pkg-config"
makedepends="libzstd-devel sqlite-devel openssl-devel"
short_desc="Isolate an arbitrary application over the Tor network"
maintainer="Duncaen <duncaen@voidlinux.org>"
license="MIT OR Apache-2.0"
homepage="https://gitlab.torproject.org/tpo/core/oniux"
changelog="https://gitlab.torproject.org/tpo/core/oniux/-/tags"
distfiles="https://gitlab.torproject.org/tpo/core/oniux/-/archive/v${version}/oniux-v${version}.tar.gz"
checksum=e84e9237e16b6f119ef2c02c05f94161fdd903727f9bf6038ccd2418228e8473

# aws-lc-sys only ships pre-generated files for certain architectures
case "${XBPS_TARGET_MACHINE}" in
armv[67]l*)
	hostmakedepends+=" cmake rust-bindgen"
	;;
esac

post_install() {
	vlicense LICENSE-MIT
}
