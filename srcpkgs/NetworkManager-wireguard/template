# Template file for 'NetworkManager-wireguard'
pkgname=NetworkManager-wireguard
version=20181128
revision=1
_githash=61646ade26750c52626a44b025cb1b165681c662
wrksrc="network-manager-wireguard-${_githash}"
build_style=gnu-configure
configure_args="--disable-static"
hostmakedepends="pkg-config intltool automake gettext-devel glib-devel libtool"
makedepends="NetworkManager-devel gtk+3-devel libglib-devel libsecret-devel network-manager-applet-devel"
depends="wireguard"
short_desc="NetworkManager WireGuard plugin"
maintainer="aliasless <aliasless@riseup.net>"
license="GPL-2.0-or-later"
homepage="https://github.com/max-moser/network-manager-wireguard"
distfiles="https://github.com/max-moser/network-manager-wireguard/archive/${_githash}.tar.gz"
checksum="9c3c76a7de17a685b2ec1e23252d77d6b4ab778df4b7fa82a14d72734167866c"
lib32disabled=yes

pre_configure() {
	if [ "$CROSS_BUILD" ]; then
		autogen_args="--host $XBPS_CROSS_TRIPLET"
	fi

	./autogen.sh $autogen_args
}
