# Template file for 'ollama'
pkgname=ollama
version=0.1.20
revision=1
archs="i686 x86_64"
build_style=go
go_import_path="github.com/jmorganca/${pkgname}"
hostmakedepends="cmake git"
short_desc="Get up and running with large language models, locally"
maintainer="Eugen Zagorodniy <zag@disroot.org>"
license=MIT
homepage="https://ollama.ai/"
system_accounts=_ollama
_ollama_homedir=/var/lib/ollama
make_dirs="${_ollama_homedir} 0775 _ollama _ollama"

do_fetch() {
	git clone -b v${version} https://github.com/jmorganca/${pkgname}.git ${pkgname}-${version}
}

pre_build() {
	go generate ./...
}

do_install() {
	vlicense LICENSE
	vbin _build-ollama-xbps/bin/ollama
	vsv ollama
}
