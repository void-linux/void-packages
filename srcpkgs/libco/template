# Template file for 'libco'
pkgname=libco
version=1.0.1
revision=1
short_desc="Cooperative multithreading library written in C89"
maintainer="Julio Galvan <julio@epazote.net>"
license="ISC"
homepage="https://github.com/freeekanayaka/libco"
distfiles="https://github.com/freeekanayaka/libco/archive/v${version}.tar.gz"
checksum=b5a49b0352e52edffc0046b592e4414945a2b637f7433f8c526b8cdaab9d24bd

do_build() {
	make
}

do_install() {
	vinstall libco.so 0664 /usr/lib/ libco.so.${version}
	ln -s libco.so.${version} ${DESTDIR}/usr/lib/libco.so.1
	ln -s libco.so.${version} ${DESTDIR}/usr/lib/libco.so
	vinstall libco.pc 0664 /usr/lib/pkgconfig
	vinstall libco.a 0664 /usr/lib/
	vinstall libco.h 0664 /usr/include/
	vlicense ${FILESDIR}/LICENSE
}

libco-devel_package() {
	depends="libco>=${version}_${revision}"
	short_desc+=" - development files"
	pkg_install() {
		vmove usr/include
		vmove usr/lib/pkgconfig
		vmove "usr/lib/*.a"
	}
}
