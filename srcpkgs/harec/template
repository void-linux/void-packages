# Template file for 'harec'
pkgname=harec
version=0.24.2
revision=1
build_style=gnu-makefile
make_use_env=yes
checkdepends="qbe"
short_desc="Hare bootstrap compiler"
maintainer="Jonas Fentker <jonas@fentker.eu>"
license="GPL-3.0-only"
homepage="https://git.sr.ht/~sircmpwn/harec"
distfiles="https://git.sr.ht/~sircmpwn/${pkgname}/archive/${version}.tar.gz"
checksum="88b3961b236fbfe3a0dfb46bb954741fa5c031bbda6d07fbc238c98f0abb41a2"

do_configure() {
	cp configs/linux.mk config.mk
	vsed -e "s/^ARCH = x86_64$/ARCH=${XBPS_TARGET_MACHINE}/" \
	     -e '/^PREFIX/d' \
	     -e '/^CC/d' \
	     -e '/^AS/d' \
	     -e '/^LD/d' \
	     -i config.mk
}
