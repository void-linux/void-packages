# Template file for 'harec'
pkgname=harec
version=0.24.0
revision=1
build_style=gnu-makefile
make_use_env=yes
checkdepends="qbe"
short_desc="Hare bootstrap compiler"
maintainer="Jonas Fentker <jonas@fentker.eu>"
license="GPL-3.0-only"
homepage="https://git.sr.ht/~sircmpwn/harec"
distfiles="https://git.sr.ht/~sircmpwn/${pkgname}/archive/${version}.tar.gz"
checksum="add6a7c4cbfd130c5e9fcecd2d43bec39640ed9f9cfbe9166e4b7e945a46b7de"

do_configure() {
	cp configs/linux.mk config.mk
	vsed -e "s/^ARCH = x86_64$/ARCH=${XBPS_TARGET_MACHINE}/" \
	     -e '/^PREFIX/d' \
	     -e '/^CC/d' \
	     -e '/^AS/d' \
	     -e '/^LD/d' \
	     -i config.mk
}
