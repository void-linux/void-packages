# Template file for 'Mousai'
pkgname=Mousai
version=0.7.7
revision=1
build_style=meson
build_helper=rust
hostmakedepends="cargo python3 gettext glib-devel pkg-config gtk4-update-icon-cache desktop-file-utils"
makedepends="gtk4-devel libadwaita-devel gstreamer1-devel gst-plugins-base1-devel libsoup3-devel rust-std"
depends="python3-gobject python3-requests"
short_desc="Identify any songs in seconds"
maintainer="Orphaned <orphan@voidlinux.org>"
license="GPL-3.0-or-later"
homepage="https://github.com/SeaDve/Mousai"
changelog="https://github.com/SeaDve/Mousai/releases"
distfiles="https://github.com/SeaDve/Mousai/releases/download/v${version}/mousai-${version}.tar.xz"
checksum=7e3c26dcb546d226474edce91504b23da4c9e61f0249edf255699024351f7eb4

post_patch() {
	if [ "$CROSS_BUILD" ]; then
		vsed -i src/meson.build \
			-e "s%rust_target /%'${RUST_TARGET}' / rust_target /%"
	fi
}
