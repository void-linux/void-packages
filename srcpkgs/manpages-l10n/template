# Template file for 'manpages-l10n'
pkgname=manpages-l10n
version=4.17.0
revision=1
build_style=meta
hostmakedepends="po4a"
short_desc="Translations of manpages"
maintainer="Érico Nogueira <ericonr@disroot.org>"
license="GPL-3.0-or-later"
homepage="https://manpages-l10n-team.pages.debian.net/manpages-l10n/"
changelog="https://salsa.debian.org/manpages-l10n-team/manpages-l10n/-/raw/master/CHANGES.md"
distfiles="https://salsa.debian.org/manpages-l10n-team/manpages-l10n/-/archive/${version}/manpages-l10n-v${version}.tar.gz"
checksum=0afbe8196b091d37bb25702185a903ff69622e3dfbbf400f54ccc1260dcaa4c4

do_configure() {
	./configure --prefix=/usr --enable-compression=none
}

do_build() {
	make ${makejobs}
}

do_install() {
	make DESTDIR=${DESTDIR} install
}

post_install() {
	find $DESTDIR -name '*systemd*' -delete
}

# lang name for package <space> description <space> dir name (if different)
_languages=(
 'cs    "Czech (Čeština)"'
 'da    "Danish (Dansk)"'
 'de    "German (Deutsch)"'
 'el    "Greek (Ελληνικά)"'
 'es    "Spanish (Español)"'
 'fi    "Finnish (Suomi)"'
 'fr    "French (Français)"'
 'hu    "Hungarian (Magyar Nyelv)"'
 'id    "Indonesian (Bahasa Indonesia)"'
 'it    "Italian (Italiano)"'
 'mk    "Macedonian (Македонски)"'
 'nb    "Norwegian Bokmål (Bokmål)"'
 'nl    "Dutch (Nederlands)"'
 'pl    "Polish (Polski)"'
 'pt-br "Brazilian Portuguese (Português Brasileiro)" pt_BR'
 'ro    "Romanian (Limba Română)"'
 'ru    "Russian (Русский)"'
 'sr    "Serbian (Српски Језик)"'
 'sv    "Swedish (Svenska)"'
 'uk    "Ukrainian (Украї́нська Мо́ва)"'
 'vi    "Vietnamese (Tiếng Việt)"'
)

for _line in "${_languages[@]}"; do
	_pkgname="manpages-${_line%% *}"
	depends+=" ${_pkgname}"

	eval "${_pkgname}_package() {
		_pkgtmpl "$_line"
	}"
done

_pkgtmpl() {
	_lang="${3:-$1}"
	short_desc+=" - $2"
	pkg_install() {
		vmove "usr/share/man/${_lang}"
	}
}
