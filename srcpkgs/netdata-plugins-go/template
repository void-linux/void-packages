# Template file for 'netdata-plugins-go'
pkgname=netdata-plugins-go
version=0.51.0
revision=1
build_style=go
go_import_path="github.com/netdata/go.d.plugin/cmd/godplugin"
depends="netdata"
short_desc="Netdata - Go Plugins"
maintainer="sn0w <me@sn0w.cx>"
license="GPL-3.0-or-later"
homepage="https://www.netdata.cloud/"
distfiles="https://github.com/netdata/go.d.plugin/archive/refs/tags/v${version}.tar.gz"
checksum=4ac52ffc34f8682c3f12869fbccbdafe0027eb8498256b8e451d05566e435dc6

do_install() {
	vmkdir usr/lib/netdata/conf.d
	vcopy config/go.d usr/lib/netdata/conf.d
	vcopy config/go.d.conf usr/lib/netdata/conf.d

	for f in ${GOPATH}/bin/* ${GOPATH}/bin/**/*; do
		if [ -f "$f" ] && [ -x "$f" ]; then
			vinstall "$f" 755 usr/libexec/netdata/plugins.d go.d.plugin
			break
		fi
	done
}
