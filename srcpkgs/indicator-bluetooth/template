# Template file for 'indicator-bluetooth'
pkgname=indicator-bluetooth
version=0.0.6+17.10.20170605
revision=1
build_style=gnu-configure
configure_args="--prefix=/usr --libexecdir=/usr/lib --disable-static"
hostmakedepends="automake gettext-devel glib-devel intltool pkg-config python3
 vala"
depends="bluez dconf libnotify"
short_desc="Indicator to connect to Bluetooth devices"
maintainer="Earldridge Jazzed Pineda <earldridgejazzedpineda@gmail.com>"
license="GPL-3.0-only"
homepage="https://launchpad.net/indicator-bluetooth"
distfiles="https://launchpad.net/ubuntu/+archive/primary/+files/indicator-bluetooth_${version}.orig.tar.gz"
checksum=d67cf0687526c9e9e70c451242fd6f3db0588ce052d2ef498680fcea0083e846
CFLAGS="-Wno-error"

post_patch() {
	sed -i \
	 -e 's/gio-unix-2.0 >= $GIO_REQUIRED_VERSION/gio-unix-2.0 >= $GIO_REQUIRED_VERSION])/g' \
	 -e '/url-dispatcher-1 >= $URL_DISPATCHER_1_REQUIRED_VERSION])/d' \
	 configure.ac
	rm vapi/url-dispatcher.vapi
}

pre_configure() {
	intltoolize -f
	autoreconf -vfi
}

post_configure() {
	sed -i -e '/--pkg url-dispatcher \\/d' src/Makefile.in
}

pre_build() {
	export SED=sed
}
