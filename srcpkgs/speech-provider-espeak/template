# Template file for 'speech-provider-espeak'
pkgname=speech-provider-espeak
version=0.1.0
revision=1
build_style=meson
build_helper=rust
hostmakedepends="pkg-config cargo clang19 llvm19"
makedepends="rust-std libspeechprovider-devel libespeak-ng-devel"
short_desc="Spiel speech provider that features the very capable eSpeak-NG engine"
maintainer="oreo639 <oreo6391@gmail.com>"
license="GPL-3.0-or-later"
homepage="https://project-spiel.org/"
distfiles="https://github.com/project-spiel/speech-provider-espeak/archive/refs/tags/SPEECH_PROVIDER_ESPEAK_${version//./_}.tar.gz"
checksum=1ef78b61a8792f5fd2f1b85ad8384d9e810e081c02668c40701aa00115e9503e

post_patch() {
	[ -z "$CROSS_BUILD" ] && return 0

	vsed -i cargo.py \
		-e "s;os.path.join(CARGO_TARGET_DIR, 'release', APP_BIN);os.path.join(CARGO_TARGET_DIR, '${RUST_TARGET}', 'release', APP_BIN);"
}
