# Template file for xbps-src
pkgname=xbps-updater
version=1.1.0
revision=1
short_desc="GUI tool for updating XBPS packages"
maintainer="Your Name <your@email.com>"
license="GPL-3.0-or-later"
homepage="https://github.com/binarylinuxx/xbps_updater"
distfiles="https://github.com/binarylinuxx/xbps_updater/archive/refs/tags/v1.1.0.tar.gz"
checksum="a55f79c5bac67c26aa91cc3443d56f4925d2355902f158ae4864d7bc90f3288b"
wrksrc="xbps_updater-1.0.0"
service="files/xbps-updater/run/run"

makedepends="python3 python3-gobject desktop-file-utils"
hostmakedepends="desktop-file-utils"

do_install() {
    vbin xbps_updater.py
    vinstall upd.svg 644 /usr/share/icons
    sed -e "s|Exec=.*|Exec=/usr/bin/xbps_updater.py|" \
        -e "s|Icon=.*|Icon=/usr/share/icons/upd.svg|" \
        xbps_updater.desktop > xbps_updater.desktop.tmp
    vinstall xbps_updater.desktop.tmp 644 /usr/share/applications
    rm xbps_updater.desktop.tmp
    vinstall xbps_updater 644 /usr/bin
}

post_install() {
    echo "DESTDIR is set to ${DESTDIR}"
    update-desktop-database ${DESTDIR}/usr/share/applications
}


