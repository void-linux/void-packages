# Template file for 'swww'
pkgname=swww
version=0.11.2
revision=1
build_style=cargo
hostmakedepends="scdoc pkg-config"
makedepends="liblz4-devel wayland-devel wayland-protocols"
short_desc="Solution to your Wayland Wallpaper Woes"
maintainer="Daniel Martinez <danielmartinez@cock.li>"
license="GPL-3.0-only"
homepage="https://codeberg.org/LGFae/awww"
changelog="https://codeberg.org/LGFae/awww/src/branch/main/CHANGELOG.md"
distfiles="https://codeberg.org/LGFae/awww/archive/v${version}.tar.gz"
checksum=0bd1d3a7461b1bc0b99f49aa64ce01d3e84412c5afd6534a1221c4aa3341ccd6

post_build() {
	./doc/gen.sh
}

# overriding do_install(), since by default it will pointlessly rebuild the package again
do_install() {

	vbin target/${RUST_TARGET}/release/swww
	vbin target/${RUST_TARGET}/release/swww-daemon

	for doc in doc/generated/*; do
		vman $doc
	done

	vcompletion completions/swww.bash bash
	vcompletion completions/swww.fish fish
	vcompletion completions/_swww zsh
}
