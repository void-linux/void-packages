# Template file for 'dinit'
pkgname=dinit
version=0.16.1
revision=1
build_style=gnu-makefile
make_install_args="SBINDIR=/usr/bin"
hostmakedepends="m4"
checkdepends="libsanitizer-devel"
short_desc="Service manager and init system"
maintainer="Uli Baum <xeji@cat3.de>"
license="Apache-2.0"
homepage="https://davmac.org/projects/dinit/"
changelog="https://raw.githubusercontent.com/davmac314/dinit/master/NEWS"
distfiles="https://github.com/davmac314/dinit/archive/v${version}.tar.gz"
checksum=fecab916da569e7fda1ad7651eb2cc639885ac203f4729d55612108b69cd5140
disable_parallel_check=yes

post_patch() {
	# don't build shutdown/halt/reboot commands, we don't use dinit as system init
	sed -e 's/BUILD_SHUTDOWN=yes/BUILD_SHUTDOWN=no/' configs/mconfig.Linux > mconfig
}
