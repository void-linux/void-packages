# Template file for 'Hilbish'
pkgname=Hilbish
version=2.3.4
revision=1
_luainspect_version=b611db6bfa9c12ce35dd4972032fbbd2ad5ba965
_lualunacolors_version=34a57c964590f89aa065188a588c7b38aff99c28
_luasucculent_version=96dc95c24989be6596ccb9f7f7244d37f03d4acd
build_style=go
go_import_path=hilbish
go_ldflags="-X main.dataDir=/usr/share/hilbish"
short_desc="Advanced, comfortable Lua-configured (Unix/Windows) shell"
maintainer="Gornak40 <s-kozelsk@yandex.ru>"
license="MIT"
homepage="https://hilbish.sammyette.party"
changelog="https://raw.githubusercontent.com/sammy-ette/Hilbish/refs/heads/master/CHANGELOG.md"
distfiles="https://github.com/sammy-ette/Hilbish/archive/refs/tags/v${version}.tar.gz
 https://github.com/kikito/inspect.lua/archive/${_luainspect_version}.tar.gz
 https://github.com/Rosettea/Lunacolors/archive/${_lualunacolors_version}.tar.gz
 https://github.com/Rosettea/Succulent/archive/${_luasucculent_version}.tar.gz"
checksum="747f509bf8091cd0decb631c0402e6caeb6ba82f35328d2125ae730b332ea0fc
 a6ea53684eb83ea7a17674e6c9f76ca9c15fa870425c53cb13f4a463124aa37d
 f414060c076a353f917ede6aa77d254e0aef60514dff22a62e6587c42135074b
 b699fbaa90b9f55e55d0ed01f5abbbc74233647fb942f2704c9ca6df5db9154d"
skip_extraction="${_luainspect_version}.tar.gz ${_lualunacolors_version}.tar.gz ${_luasucculent_version}.tar.gz"
register_shell="/usr/bin/hilbish"

post_extract() {
	vsrcextract -C libs/inspect "${_luainspect_version}.tar.gz"
	vsrcextract -C libs/lunacolors "${_lualunacolors_version}.tar.gz"
	vsrcextract -C libs/succulent "${_luasucculent_version}.tar.gz"
}

post_install() {
	vmkdir /usr/share/hilbish
	vcopy nature /usr/share/hilbish
	vcopy libs /usr/share/hilbish
	vcopy emmyLuaDocs /usr/share/hilbish
	vcopy .hilbishrc.lua /usr/share/hilbish

	vlicense LICENSE

	vmkdir /usr/share/doc/hilbish
	vcopy "docs/*" /usr/share/doc/hilbish
}
