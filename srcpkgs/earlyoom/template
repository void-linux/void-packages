# Template file for 'earlyoom'
pkgname=earlyoom
version=1.9.0
revision=1
build_style=gnu-makefile
make_check_target=test
hostmakedepends="$(vopt_if man pandoc)"
checkdepends="go"
short_desc="Userspace Early OOM Daemon for Linux"
maintainer="Leah Neukirchen <leah@vuxu.org>"
license="MIT"
homepage="https://github.com/rfjakob/earlyoom"
distfiles="https://github.com/rfjakob/${pkgname}/archive/v${version}.tar.gz"
checksum=b2fe5e1e071a5a000b22fb9602c068fd69d09c057f0ba972dfc5d85daf464b2a
CFLAGS="-DVERSION='\"v${version}\"'"

build_options="man"
desc_option_man="Use pandoc for manpages"

case "$XBPS_MACHINE" in
	x86_64*|i686|ppc64le*|ppc64) build_options_default="man" ;;
esac

do_install() {
	vbin earlyoom
	if [ "$build_option_man" ]; then
		vman earlyoom.1
	fi
	vsv earlyoom
	vlicense LICENSE
}
