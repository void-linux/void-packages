# Template file for 'linuxcommandlibrary'
pkgname=linuxcommandlibrary
version=3.4.12
revision=1
archs="x86_64 aarch64 armv7l"
hostmakedepends="openjdk17"
depends="virtual?java-runtime glibc"
checkdepends="sdkmanager"
short_desc="Linux reference app with basics, tips and formatted man pages"
maintainer="zenobit <zenobit@disroot.org>"
license="Apache-2.0"
homepage="http://linuxcommandlibrary.com/"
changelog="https://github.com/SimonSchubert/LinuxCommandLibrary/releases"
distfiles="https://github.com/SimonSchubert/LinuxCommandLibrary/archive/refs/tags/v${version}.tar.gz"
checksum=742c0145ca26d577744de242edb11cd07383545bd8f46f658664596e26569adf

export JAVA_HOME=/usr/lib/jvm/openjdk17
export ANDROID_SDK_ROOT=/tmp/android-sdk

do_build() {
	chmod +x gradlew
	./gradlew :cli:createJar
}

do_install() {
	vinstall cli/build/libs/linuxcommandlibrary.jar 644 /usr/lib/linuxcommandlibrary
	vinstall "${FILESDIR}/lcl.desktop" 0644 "usr/share/applications/"
	vinstall art/web_hi_res_144.png 0644 usr/share/icons/hicolor/apps lcl.png
}

do_check() {
	./gradlew :common:cleanTestDebugUnitTest :common:testDebugUnitTest
}
