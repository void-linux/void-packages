# Template file for 'flyctl'
pkgname=flyctl
version=0.0.351
revision=1
build_style=go
build_helper=qemu
go_import_path="github.com/superfly/flyctl"
go_ldflags="
 -X github.com/superfly/flyctl/internal/buildinfo.environment=production
 -X github.com/superfly/flyctl/internal/buildinfo.version=$version
 -X github.com/superfly/flyctl/internal/buildinfo.commit=df8c42a
"
short_desc="Command line tools for fly.io services"
maintainer="Antonio Gurgel <antonio@goorzhel.com>"
license="Apache-2.0"
homepage="https://github.com/superfly/flyctl"
distfiles="https://github.com/superfly/flyctl/archive/refs/tags/v${version}.tar.gz"
checksum=fc6fe8fbdd5c6d4b8cea4216770c111a78b06264255345d20c9c768593b6033c

pre_build() {
	local _date
	if [ "$SOURCE_DATE_EPOCH" ]; then
		_date="$(date --utc --date "@$SOURCE_DATE_EPOCH" +"%Y-%m-%dT%H:%M:%SZ")"
		go_ldflags+=" -X github.com/superfly/flyctl/internal/buildinfo.buildDate=${_date}"
	fi
}
