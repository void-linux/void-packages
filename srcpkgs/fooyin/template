# Template file for 'fooyin'
pkgname=fooyin
version=0.9.1
revision=2
_libvgm_rev="305b1bad78f7486c9e4058191abdd9195775efa0"
build_style=cmake
configure_args="
 -DBUILD_PCH=ON
 -DBUILD_WERROR=OFF"
hostmakedepends="pkg-config qt6-base qt6-tools"
makedepends="qt6-base-devel qt6-svg-devel alsa-lib-devel
 ffmpeg6-devel icu-devel libarchive-devel libebur128-devel
 libgme-devel libopenmpt-devel libsndfile-devel pipewire-devel SDL2-devel
 taglib-devel KDSingleApplication"
depends="qt6-svg"
checkdepends="gtest-devel"
short_desc="Customisable music player"
maintainer="Ivan MiriÄ‡ <imiric-gh@proton.me>"
license="GPL-3.0-only"
homepage="https://www.fooyin.org/"
changelog="https://raw.githubusercontent.com/fooyin/fooyin/refs/heads/master/CHANGELOG.md"
distfiles="https://github.com/fooyin/fooyin/archive/v${version}.tar.gz
 https://github.com/ValleyBell/libvgm/archive/${_libvgm_rev}.tar.gz"
checksum="3559e2ffcd6ad82d72b90bcba3a3e607437329702339a3a3c989e28d28199b1d
 f62685b9853ec0ecd0c3001d8af3622543c7597315c4a1ddab595d5afb32c729"

skip_extraction="${_libvgm_rev}.tar.gz"

if [ "$XBPS_CHECK_PKGS" ]; then
	configure_args+=" -DBUILD_TESTING=ON"
fi

post_extract() {
	vsrcextract -C 3rdparty/libvgm "${_libvgm_rev}.tar.gz"
}
