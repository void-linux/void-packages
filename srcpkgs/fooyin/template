# Template file for 'fooyin'
pkgname=fooyin
version=0.9.2
revision=1
_libvgm_rev="1aed079c8c9c3f3f4bc52080690e513db3ebaf25"
build_style=cmake
configure_args="
 -DBUILD_PCH=ON
 -DBUILD_WERROR=OFF"
hostmakedepends="pkg-config qt6-base-devel qt6-tools"
makedepends="qt6-base-devel qt6-svg-devel alsa-lib-devel
 ffmpeg-devel icu-devel libarchive-devel libebur128-devel
 libgme-devel libopenmpt-devel libsndfile-devel pipewire-devel SDL2-devel
 taglib-devel KDSingleApplication"
depends="qt6-svg"
checkdepends="gtest-devel"
short_desc="Customisable music player"
maintainer="Ivan MiriÄ‡ <imiric-gh@proton.me>"
license="GPL-3.0-only"
homepage="https://www.fooyin.org/"
changelog="https://raw.githubusercontent.com/fooyin/fooyin/refs/heads/master/CHANGELOG.md"
distfiles="https://github.com/fooyin/fooyin/archive/v${version}.tar.gz
 https://github.com/ValleyBell/libvgm/archive/${_libvgm_rev}.tar.gz"
checksum="a3b0e880047790d169223983d4f9a26a2196499275d57321b15e9578dd716a94
 d573a2fd247ff87bb33d9883175e7326203548a5ec24a123a25a4832844f4759"

skip_extraction="${_libvgm_rev}.tar.gz"

if [ "$XBPS_CHECK_PKGS" ]; then
	configure_args+=" -DBUILD_TESTING=ON"
fi

post_extract() {
	vsrcextract -C 3rdparty/libvgm "${_libvgm_rev}.tar.gz"
}
