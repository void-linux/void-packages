# Template file for 'kcm-wacomtablet'
pkgname=kcm-wacomtablet
version=6.5.2
revision=1
build_style=cmake
configure_args="-DKF6_HOST_TOOLING=/usr/lib/cmake
 -DKDE_INSTALL_QTPLUGINDIR=lib/qt6/plugins"
hostmakedepends="pkg-config gettext extra-cmake-modules qt6-base qt6-tools
 kf6-kcmutils kf6-kpackage kf6-kconfig kf6-kdoctools"
makedepends="qt6-declarative-devel plasma-workspace-devel libwacom-devel
 xf86-input-wacom-devel libinput-devel qt6-base-private-devel libplasma-devel
 libxkbcommon-devel kf6-kcoreaddons-devel kf6-ki18n-devel kf6-kglobalaccel-devel
 kf6-kconfig-devel kf6-kxmlgui-devel kf6-kwidgetsaddons-devel libX11-devel
 libXext-devel kf6-kdoctools-devel kf6-kwindowsystem-devel
 kf6-knotifications-devel libICE-devel kf6-kdbusaddons-devel kf6-kio-devel
 plasma5support-devel libxcb-devel
 kf6-kcmutils-devel kf6-kpackage-devel"
depends="xf86-input-wacom"
checkdepends="dbus"
short_desc="GUI for the Wacom Linux Drivers"
maintainer="Piraty <mail@piraty.dev>"
license="GPL-2.0-or-later"
homepage="https://invent.kde.org/plasma/wacomtablet"
distfiles="${KDE_SITE}/plasma/${version}/${pkgname#kcm-}-${version}.tar.xz"
checksum=c00d59a37ad86d68a6f5f1120b09b4d946fa1cd8c48c575d6671f8566479bc63

do_check() {
	cd build
	# disable failing tests
	dbus-run-session ctest -E "Test.KDED.TabletHandler|Test.KDED.XInputAdaptor|Test.KDED.XsetWacomAdaptor"
}
