# Template file for 'Aegisub'
pkgname=Aegisub
version=3.3.3
revision=1
build_style=cmake
build_helper=cmake-wxWidgets-gtk3
cmake_builddir="BUILD"
configure_args="-DwxWidgets_CONFIG_EXECUTABLE=$WX_CONFIG
 -DWITH_PORTAUDIO=$(vopt_if portaudio ON OFF)
 -DWITH_OPENAL=$(vopt_if openal ON OFF) -DWITH_FFTW3=$(vopt_if fftw ON OFF)"
hostmakedepends="gettext-devel intltool pkg-config git LuaJIT"
makedepends="alsa-lib-devel boost-devel libcurl-devel fontconfig-devel
 freetype-devel hunspell-devel icu-devel libass-devel libffms2-devel
 MesaLib-devel wxWidgets-gtk3-devel LuaJIT-devel $(vopt_if fftw fftw-devel)
 $(vopt_if openal libopenal-devel) $(vopt_if portaudio portaudio-devel)"
short_desc="Subtitle editor (ssa, ass, srt)"
maintainer="Orphaned <orphan@voidlinux.org>"
license="BSD-3-Clause, MIT"
homepage="https://github.com/wangqr/Aegisub"
distfiles="https://github.com/wangqr/Aegisub/archive/v${version}.tar.gz"
checksum="b73518ee6576abf9716dc436fb76086de83d2a387a6b41b5051e0e1b7860e9aa"

build_options="fftw openal portaudio"
build_options_default="fftw"

desc_option_fftw="Enable support for rendering of audio waveforms/spectrum"
desc_option_openal="Enable support for openal"

CXXFLAGS="-D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64"

pre_build() {
	export FORCE_GIT_VERSION="$version"
}

post_install() {
	vlicense LICENCE
}
