# Template file for 'python3-ruamel.yaml.clib'
pkgname=python3-ruamel.yaml.clib
version=0.2.6
revision=3
wrksrc="yaml.clib-${version}"
build_style=python3-module
hostmakedepends="python3-setuptools python3-Cython"
makedepends="python3-devel"
depends="python3"
short_desc="Reader, parser and emitter for ruamel.yaml (Python3)"
maintainer="Andrew Benson <abenson+void@gmail.com>"
license="MIT"
homepage="http://yaml.readthedocs.io/"
# distfiles="${PYPI_SITE}/r/ruamel.yaml.clib/ruamel.yaml.clib-${version}.tar.gz"
distfiles="https://github.com/ruamel/yaml.clib/archive/refs/tags/${version}.tar.gz"
checksum=8cf038c76dd3c5c3a4954bf5232e7eca248050688c0592fa41ca507578790d8a

export RUAMEL_NO_PIP_INSTALL_CHECK=1
make_check=no

pre_configure() {
	mkdir ruamel.yaml.clib
	cp _ruamel_yaml.pxd _ruamel_yaml.pyx ruamel.yaml.clib
	cd ruamel.yaml.clib
	cython -3 _ruamel_yaml.pyx
	cp * ..
	cd ..
}

post_install() {
	vlicense LICENSE
}
