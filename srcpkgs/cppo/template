# Template file for 'cppo'
pkgname=cppo
version=1.6.4
revision=1
build_style=gnu-makefile
hostmakedepends="ocaml dune ocamlbuild"
depends="dune ocamlbuild"
short_desc="C-style preprocessor for OCaml"
maintainer="John Zimmermann <johnz@posteo.net>"
license="BSD-3-Clause"
homepage="https://github.com/mjambon/cppo/"
distfiles="https://github.com/mjambon/cppo/archive/v${version}.tar.gz"
checksum=470a5225a5d3b06ced29581250562ef84b7a8bc6b9a632c96443391a443bab49
nocross=yes

do_install() {
	export OPAMROOT="${wrksrc}"/opam
	opam init -n

	make OCAMLFIND_DESTDIR="${DESTDIR}$(ocamlfind printconf destdir)" install

	vbin opam/system/bin/cppo

	vlicense LICENSE.md
}
