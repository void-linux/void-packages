# Template build file for 'tdb'.
pkgname=tdb
version=1.2.2
distfiles="http://samba.org/ftp/tdb/tdb-$version.tar.gz"
build_style=gnu_configure
short_desc="Hierarchical pool based memory allocator with destructors"
maintainer="Juan RP <xtraeme@gmail.com>"
checksum=faee3dbb5c0af896c98f5edf3ab68b2ed9bc4992376666f2cd502873a1b2f892
long_desc="
 This is a simple database API. It is modelled after the structure of GDBM.
 TDB features, unlike GDBM, multiple writers support with appropriate locking
 and transactions."

subpackages="libtdb tdb-devel tdb-python"

Add_dependency run glibc
Add_dependency run libtdb

Add_dependency build pkg-config
Add_dependency build automake
Add_dependency build python

pre_configure()
{
	cd ${wrksrc} && ./autogen.sh
}

post_install()
{
	# _PUBLIC_ is only defined internally!
	sed -i -e "s|_PUBLIC_ ||g" ${DESTDIR}/usr/include/tdb.h
}
