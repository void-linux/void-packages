# Template file for 'samrewritten'
pkgname=samrewritten
version=1.1.0
revision=1
build_style=cargo
configure_args="--features adwaita"
hostmakedepends="pkg-config"
makedepends="openssl-devel dbus-devel gtk4-devel libadwaita-devel"
short_desc="Modern Steam achievements manager for Windows and Linux"
maintainer="Ludovico Piero <lewdovico@gnuweeb.org>"
license="GPL-3.0-only"
homepage="https://github.com/PaulCombal/SamRewritten"
changelog="https://github.com/PaulCombal/SamRewritten/releases"
distfiles="https://github.com/PaulCombal/SamRewritten/archive/refs/tags/v${version}.tar.gz"
checksum=7c87b089057a2b09c73d8a836685b7028e624412037c2ef0c8a20b434f25008b
make_check=no # Require network access and a running Steam client.

post_install() {
		vinstall package/samrewritten.desktop 644 usr/share/applications

		vinstall assets/org.samrewritten.SamRewritten.gschema.xml 644 usr/share/glib-2.0/schemas

		vmkdir usr/share/icons/hicolor/64x64/apps
		install -m644 assets/icon_64.png \
					${DESTDIR}/usr/share/icons/hicolor/64x64/apps/samrewritten.png

		vmkdir usr/share/icons/hicolor/256x256/apps
		install -m644 assets/icon_256.png \
					${DESTDIR}/usr/share/icons/hicolor/256x256/apps/samrewritten.png
}
