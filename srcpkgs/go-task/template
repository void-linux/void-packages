# Template file for 'go-task'
pkgname=go-task
version=3.27.1
revision=1
build_style=go
go_import_path=github.com/go-task/task/v3
go_package="${go_import_path}/cmd/task"
go_ldflags="-X github.com/go-task/task/v3/internal/version.version=v${version}"
short_desc="Simple task runner written in Go"
maintainer="Martin Chlumsky <martin.chlumsky@gmail.com>"
license="MIT"
homepage="https://taskfile.dev/"
distfiles="https://github.com/go-task/task/archive/refs/tags/v$version.tar.gz"
checksum=508b6612ca30ef4404aa674a2fb2a93e414eb5b06afe34e090145e70f0dc940a

post_install() {
	vlicense LICENSE

	mv ${DESTDIR}/usr/bin/{,go-}task

	vsed -e 's/complete -F _task task/complete -F _task go-task/' -i completion/bash/task.bash
	vsed -e 's/set GO_TASK_PROGNAME task/set GO_TASK_PROGNAME go-task/' -i completion/fish/task.fish
	vsed -e 's/#compdef task/#compdef go-task/' -i completion/zsh/_task
	vsed -e 's/cmd=(task)/cmd=(go-task)/' -i completion/zsh/_task

	vcompletion completion/bash/task.bash bash
	vcompletion completion/fish/task.fish fish
	vcompletion completion/zsh/_task zsh
}
