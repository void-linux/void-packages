# Template file for 'intel-media-sdk'
pkgname=intel-media-sdk
version=23.2.2
revision=1
archs="x86_64*"
build_style=cmake
configure_args="-Wno-dev -DBUILD_SAMPLES=OFF -DBUILD_TESTS=ON"
hostmakedepends="pkg-config"
makedepends="libva-devel libdrm-devel intel-gmmlib-devel"
short_desc="Intel Media SDK"
maintainer="Stefano Ragni <st3r4g@protonmail.com>"
license="MIT, BSD-3-Clause"
homepage="https://github.com/Intel-Media-SDK/MediaSDK"
distfiles="https://github.com/Intel-Media-SDK/MediaSDK/archive/refs/tags/intel-mediasdk-${version}.tar.gz"
checksum=12f23a78104edc1c9bfa755effd2723866d107ad752f72d3839fcc8db0503cec

post_install() {
	vlicense LICENSE
}

libmfx_package() {
	depends="${makedepends} ${sourcepkg}-${version}_${revision}"
	short_desc="Intel MediaSDK mfx lib"
	pkg_install() {
		vmove usr/lib/mfx
		vmove "usr/lib/libmfx*.so*"
	}
}

libmfx-devel_package() {
	depends="${makedepends} ${sourcepkg}-${version}_${revision}"
	short_desc+=" - development files"
	pkg_install() {
		vmove usr/include
		vmove usr/lib/pkgconfig
	}
}
