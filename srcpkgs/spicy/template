# Template file for 'spicy'
pkgname=spicy
version=1.14.0
revision=1
build_style=cmake
build_helper=qemu
hostmakedepends="flex python3"
makedepends="libfl-devel zlib-devel"
short_desc="Generate Robust Parsers for Protocols & File Formats"
maintainer="Andrew Benson <abenson+void@gmail.com>"
license="BSD-3-Clause"
homepage="https://docs.zeek.org/projects/spicy/en/latest/"
distfiles="https://github.com/zeek/spicy/releases/download/v${version}/spicy.tar.gz"
checksum=d44e0784eaccaab45ef2e7500d97c68b83a998268a791a1b2dcab88132d39677
CFLAGS=-D_FILE_OFFSET_BITS=64
CXXFLAGS=-D_FILE_OFFSET_BITS=64

if [ "$CROSS_BUILD" ]; then
	export CROSSCOMPILE_EMULATOR="/usr/bin/qemu-${XBPS_TARGET_QEMU_MACHINE}-static"
else
	export CROSSCOMPILE_EMULATOR=
fi

post_install() {
	vlicense LICENSE
}
