# Template file for 'dra'
pkgname=dra
version=0.3.8
revision=1
archs="x86_64* i686* aarch64* arm*" # uses ring
build_style=cargo
build_helper=qemu
# skip integration tests as they are run on docker
make_check_args="-- --skip archives:: --skip debian::"
short_desc="Command line tool to download release assets from GitHub"
maintainer="Marcin Puc <tranzystorek.io@protonmail.com>"
license="MIT"
homepage="https://github.com/devmatteini/dra"
changelog="https://raw.githubusercontent.com/devmatteini/dra/main/CHANGELOG.md"
distfiles="https://github.com/devmatteini/dra/archive/refs/tags/${version}.tar.gz"
checksum=58ce5b96bc1531717935b0e1dbbeaf753344a09f5f762903de0e7e1679948878

post_install() {
	DRA="${DESTDIR}/usr/bin/dra"
	for shell in bash fish zsh; do
		vtargetrun ${DRA} completion ${shell} > dra.${shell}
		vcompletion dra.${shell} ${shell}
	done

	vlicense LICENSE
}
