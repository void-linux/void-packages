# Template file for 'intel-lpmd'
pkgname=intel-lpmd
version=0.0.8
revision=1
archs="x86_64"
build_style=gnu-configure
hostmakedepends="automake autoconf-archive dbus-glib-devel elogind-devel
	glib-devel gtk-doc libxml2-devel libnl3-devel pkg-config upower-devel"
short_desc="Linux daemon used to optimize active idle power on Intel hybrid CPUs"
maintainer="Anthony Eadicicco <void@aead.xyz>"
license="GPL-2.0-only"
homepage="https://github.com/intel/intel-lpmd"
distfiles="https://github.com/intel/intel-lpmd/archive/refs/tags/v${version}.tar.gz"
checksum=f4049a814fe9e67702850e9d84d43d5e37c6a3c3d6aded1234c4810f0c38833c

pre_configure() {
	./autogen.sh

	# The default mode '0' only works on systemd; see intel_lpmd_config.xml(5)
	sed -i 's,<Mode>0</Mode>,<Mode>1</Mode>,' data/intel_lpmd_config*.xml
}

post_install() {
	vsv intel_lpmd
}
