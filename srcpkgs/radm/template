# Template file for 'radm'
pkgname=radm
version=0.6.4
revision=1
build_style=cargo
hostmakedepends="clang libclang make $(vopt_if man pandoc)"
makedepends="pam-devel"
depends="seatd pam"
short_desc="Console-based display manager for Wayland sessions"
maintainer="Antonio Gurgel <antonio@goorzhel.com>"
license="MIT"
homepage="https://sr.ht/~goorzhel/radm/"
distfiles="https://git.sr.ht/~goorzhel/radm/archive/${version}.tar.gz"
checksum=106353ecac4cc7bc0ac371c2f97686f485730b2c96e41fd1db95b9b7ec945396

build_options="man"
desc_option_man="Use pandoc for manpages"

case "$XBPS_MACHINE" in
	x86_64*|i686|ppc64le*|ppc64) build_options_default="man" ;;
esac

post_install() {
	if [ "$build_option_man" ]; then
		make res/radm.1
		vman res/radm.1
	fi

	vinstall res/pam 644 etc/pam.d radm
	vinstall res/rsyslog 644 etc/rsyslog.d radm
	vlicense LICENSE
	vsv radm
}
