# Template file for 'ocaml-yojson'
pkgname=ocaml-yojson
version=1.4.1
revision=1
wrksrc="yojson-${version}"
build_style=gnu-makefile
hostmakedepends="ocaml dune cppo ocaml-biniou ocaml-easy-format"
depends="ocaml-biniou ocaml-easy-format"
short_desc="Low-level JSON parsing and pretty-printing library for OCaml"
maintainer="John <johnz@posteo.net>"
license="BSD-3-Clause"
homepage="https://github.com/mjambon/yojson"
distfiles="https://github.com/mjambon/yojson/archive/v${version}.tar.gz"
checksum=c081a8cb5a03bddbcac4614f468cf5edafe11805277572af4071e362be6611fb
nocross=yes

do_install() {
	export OPAMROOT="${wrksrc}"/opam
	opam init -n

	make OCAMLFIND_DESTDIR="${DESTDIR}$(ocamlfind printconf destdir)" install

	vlicense LICENSE
}
