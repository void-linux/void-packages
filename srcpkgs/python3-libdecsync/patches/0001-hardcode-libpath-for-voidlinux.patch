From 5a2024669f4cc03e79c2a5ae856edd635bd87b9e Mon Sep 17 00:00:00 2001
From: Alexis Ehret <git@08a.re>
Date: Tue, 13 Sep 2022 18:04:32 +0200
Subject: [PATCH 1/1] hardcode libpath for voidlinux

Signed-off-by: Alexis Ehret <git@08a.re>
---
 libdecsync/__init__.py | 27 +--------------------------
 setup.py               |  1 -
 2 files changed, 1 insertion(+), 27 deletions(-)

diff --git a/libdecsync/__init__.py b/libdecsync/__init__.py
index fa2d14d..484c6dc 100644
--- a/libdecsync/__init__.py
+++ b/libdecsync/__init__.py
@@ -29,32 +29,7 @@ import sys
 class DecsyncException(Exception):
     pass
 
-os_name = platform.system()
-machine_type = platform.machine()
-platform_bits = platform.architecture()[0]
-if os_name == "Linux":
-    if machine_type == "x86_64":
-        libpath = resource_filename(__name__, "libs/libdecsync_amd64.so")
-    elif machine_type.startswith("arm") or machine_type.startswith("aarch"):
-        if platform_bits == "64bit":
-            libpath = resource_filename(__name__, "libs/libdecsync_arm64.so")
-        else:
-            libpath = resource_filename(__name__, "libs/libdecsync_arm32.so")
-    else:
-        raise Exception("libdecsync: Machine type '" + machine_type + "' not supported")
-elif os_name == "Windows":
-    if platform_bits == "64bit":
-        libpath = resource_filename(__name__, "libs/decsync_x64.dll")
-    else:
-        libpath = resource_filename(__name__, "libs/decsync_x86.dll")
-elif os_name == "Darwin":
-    if machine_type == "x86_64":
-        libpath = resource_filename(__name__, "libs/libdecsync_amd64.dylib")
-    else:
-        libpath = resource_filename(__name__, "libs/libdecsync_arm64.dylib")
-else:
-    raise Exception("libdecsync: Operating system '" + os_name + "' not supported")
-
+libpath = "/usr/lib/libdecsync.so.0"
 _libdecsync = CDLL(libpath)
 
 def _errcheckDecsync(result, func, args):
diff --git a/setup.py b/setup.py
index a79755a..6853f70 100644
--- a/setup.py
+++ b/setup.py
@@ -14,7 +14,6 @@ setup(
     keywords=["decsync"],
     license="LGPLv2+",
     packages=["libdecsync"],
-    package_data={"libdecsync":["libs/*"]},
     classifiers=[
         "Programming Language :: Python :: 3",
         "Operating System :: POSIX :: Linux",
-- 
2.37.3

