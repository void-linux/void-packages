# Template file for 'mergerfs'
pkgname=mergerfs
version=2.25.0
revision=1
build_style=gnu-makefile
make_build_args="INTERNAL_FUSE=0"
hostmakedepends="automake libtool pandoc pkg-config gettext-devel"
makedepends="attr-devel fuse-devel"
short_desc="FUSE union filesystem"
maintainer="Orphaned <orphan@voidlinux.eu>"
license="ISC"
homepage="https://github.com/trapexit/mergerfs"
distfiles="${homepage}/archive/${version}/${pkgname}-${version}.tar.gz"
checksum=396ebd580fd13c07fcb2379321a912d7efc61ea926a8abd8b04eccb5d3922be0

pre_build() {
	sed -i 's|^CFLAGS[[:blank:]]*=|override CFLAGS +=|g' Makefile
	sed -i 's|^LDFLAGS[[:blank:]]*=|override LDFLAGS +=|g' Makefile

	echo "#pragma once" > src/version.hpp
	echo "static const char MERGERFS_VERSION[] = \"${version}\";" >> src/version.hpp
}

post_install() {
	vlicense LICENSE
}
