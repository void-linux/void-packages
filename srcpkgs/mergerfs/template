# Template file for 'mergerfs'
pkgname=mergerfs
version=2.29.0
revision=1
build_style=gnu-makefile
hostmakedepends="automake libtool pkg-config which"
short_desc="FUSE union filesystem"
maintainer="Orphaned <orphan@voidlinux.org>"
license="ISC"
homepage="https://github.com/trapexit/mergerfs"
distfiles="${homepage}/releases/download/${version}/${pkgname}-${version}.tar.gz"
checksum=b33a2cfd933ee03a799c145cca70595290648eb8d7cde9459318afb709fff19d

pre_build() {
	sed -i 's|^CFLAGS[[:blank:]]*=|override CFLAGS +=|g' Makefile
	sed -i 's|^LDFLAGS[[:blank:]]*=|override LDFLAGS +=|g' Makefile

	echo "#pragma once" > src/version.hpp
	echo "static const char MERGERFS_VERSION[] = \"${version}\";" >> src/version.hpp
}

post_install() {
	vlicense LICENSE
}
