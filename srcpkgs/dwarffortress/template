# Template file for 'dwarffortress'
pkgname=dwarffortress
version=52.05
revision=1
_urlver=${version//./_}
archs="x86_64"
depends="gtk+ SDL SDL_ttf SDL_image virtual?libGL glu"
short_desc="Control a dwarven outpost in a randomly generated world"
maintainer="Rutpiv <roger_freitas@live.com>"
license="custom: Proprietary"
homepage="https://www.bay12games.com/dwarves/"
distfiles="https://www.bay12games.com/dwarves/df_${_urlver}_linux.tar.bz2"
checksum=2cf6e4b7db3f2f1ff4b6f3796da73a774afbfa7af83febb7c660cda3e1171e4c

nostrip_files="Dwarf_Fortress"
nopie="distfiles are precompiled as PIE"
repository=nonfree
noshlibprovides=yes

do_install() {
	vbin ${FILESDIR}/dwarffortress
	vbin dwarfort
	rm dwarfort
	vmkdir /usr/share/dwarffortress
	vmkdir /usr/lib/dwarffortress/libs
	vcopy lib* /usr/lib/dwarffortress/libs
	rm lib*
	vcopy * /usr/share/dwarffortress/
	echo "${version}" >"${DESTDIR}/usr/share/dwarffortress/version.txt"
	vlicense "readme.txt" dwarffortress.txt
}
