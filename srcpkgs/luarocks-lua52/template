# Template file for 'luarocks-lua52'
pkgname=luarocks-lua52
version=3.0.4
revision=1
archs=noarch
wrksrc="${pkgname%-*}-${version}"
build_style=configure
configure_args="
 --prefix=/usr
 --sysconfdir=/etc
 --lua-version=5.2
 --with-lua-include=/usr/include/lua5.2
 --versioned-rocks-dir"
hostmakedepends="lua52-devel"
makedepends="lua52-devel"
depends="lua52 curl unzip"
conf_files="/etc/luarocks/config-5.2.lua"
short_desc="Package management for Lua modules - Lua 5.2"
maintainer="Duncaen <duncaen@voidlinux.org>"
license="MIT"
homepage="http://luarocks.org/"
distfiles="http://luarocks.org/releases/luarocks-${version}.tar.gz"
checksum=1236a307ca5c556c4fed9fdbd35a7e0e80ccf063024becc8c3bf212f37ff0edf

alternatives="
 luarocks:luarocks:/usr/bin/luarocks-5.2
 luarocks:luarocks-admin:/usr/bin/luarocks-admin-5.2"

pre_configure() {
	sed -i -e '457,465d' configure
}
pre_install() {
	sed -i -e 's;env lua;env lua5.2;g' src/bin/luarocks{,-admin}
}
post_install() {
	vlicense COPYING
}
