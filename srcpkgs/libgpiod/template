# Template file for 'libgpiod'
pkgname=libgpiod
version=1.6.3
revision=1
build_style=gnu-configure
configure_args="--disable-static --enable-tools --disable-tests --disable-bindings-cxx --disable-bindings-python"
hostmakedepends="automake autoconf-archive libtool pkg-config help2man"
short_desc="C library and tools for interacting with the linux GPIO character device"
maintainer="yd.zhang <yd.zhang@ilabservice.com>"
license="GPL-2.0-or-later"
homepage="https://git.kernel.org/pub/scm/libs/${pkgname}/${pkgname}.git"
distfiles="${homepage}/snapshot/${pkgname}-${version}.tar.gz"
checksum=eb446070be1444fd7d32d32bbca53c2f3bbb0a21193db86198cf6050b7a28441

pre_configure() {
	NOCONFIGURE=1 ./autogen.sh
}

post_install() {
	vlicense COPYING
}

libgpiod-devel_package() {
	short_desc+=" - development files"
	depends="${sourcepkg}-${version}_${revision}"
	pkg_install() {
		vmove usr/include
		vmove "usr/lib/*.so"
		vmove usr/lib/pkgconfig
	}
}

libgpiod-tools_package() {
	short_desc+=" - tools"
	pkg_install() {
		vmove usr/bin
		vmove usr/share/
	}
}
