# Template file for 'gamescope'
pkgname=gamescope
version=3.11.51
revision=1
_vkroots=e6b89494142eec0ac6061f82a947d2f1246d3d7a
archs="x86_64* i686"
create_wrksrc=yes
build_wrksrc=$pkgname-$version
build_style=meson
# configure_args="-Dforce_fallback_for=stb -Dpipewire=enabled"
hostmakedepends="pkg-config glslang Vulkan-Headers xorg-server-xwayland"
makedepends="SDL2-devel hwids libX11-devel libXcomposite-devel libXdamage-devel libXext-devel libXfixes-devel libXrender-devel libXres-devel libXtst-devel libXxf86vm-devel libcap-devel libdrm-devel libliftoff-devel libpipewire libseat-devel libxkbcommon-devel stb vulkan-loader wayland-devel wayland-protocols wlroots-devel"
depends="xorg-server-xwayland"
short_desc="SteamOS session compositing window manager"
maintainer="sirkhancision <jsantiago12tone@gmail.com>"
license="BSD-2-Clause"
homepage="https://github.com/Plagman/gamescope"
distfiles="https://github.com/Plagman/gamescope/archive/refs/tags/${version}.tar.gz
 https://github.com/Joshua-Ashton/vkroots/archive/${_vkroots}.tar.gz>vkroots-${_vkroots}.tar.gz"
checksum="0ffe1c3e3cdf40e20b45b758f8e4c334c5c0941eb05437e59e9c6aaf8c948a1e
 501568cf7f868b1b7fda71030a20ca9cb785025c89f45a156534270c376758ce"

pre_configure() {
	rmdir subprojects/vkroots
	cp -r "../vkroots-${_vkroots}" subprojects/vkroots
}

post_install() {
	vlicense LICENSE
}
