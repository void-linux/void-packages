# Template file for 'pueue'
pkgname=pueue
version=0.1.6
revision=1
build_style=cargo
short_desc="Daemon for managing long running shell commands"
maintainer="Neel Chotai <neel@chot.ai>"
license="MIT"
homepage="https://github.com/Nukesor/pueue"
distfiles="https://github.com/Nukesor/pueue/archive/v${version}.tar.gz"
checksum=6b11643497cedfa7517d1c041951be907f6e138e8efc339cd36309943995b8f1

case "$XBPS_TARGET_MACHINE" in
	aarch64*|arm*) broken="-m64 flag not supported by ARM compiler"
esac

pre_install() {
	rm utils/pueued.service
}

post_install() {
	vdoc README.md
	vlicense LICENSE

	vinstall utils/completions/pueue.bash 644 usr/share/bash-completion/completions
	# zsh completions currently broken
	#vinstall utils/completions/_pueue 644 usr/share/zsh/site-functions
	vinstall utils/completions/pueue.fish 644 usr/share/fish/vendor_completions.d
}
