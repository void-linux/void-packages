# Template file for 'pragha'
pkgname=pragha
version=1.3.4
revision=1
build_style=gnu-configure
hostmakedepends="automake libtool xfce4-dev-tools glib-devel gettext-devel
 pkg-config"
makedepends="
 gtk+3-devel glib-devel gstreamer1-devel sqlite-devel taglib-devel gupnp-devel
 $(vopt_if peas libpeas-devel) libxfce4ui-devel totem-pl-parser-devel gst-plugins-base1-devel
 libnotify-devel libcdio-devel libcdio-paranoia-devel libcddb-devel libxml2-devel
 libkeybinder3-devel glyr-devel rygel-devel grilo-devel libgudev-devel libmtp-devel
 gssdp-devel libsoup-devel"
short_desc="Pragha is a Lightweight Music Player for GNU/Linux"
maintainer="VargMon <vargmon98@gmail.com>"
license="GPL-3.0-or-later"
homepage="https://pragha-music-player.github.io/"
distfiles="https://github.com/pragha-music-player/pragha/archive/v${version}.tar.gz"
checksum=8be35959f526d079cc19221653cb691fb66251e6819f994062e0b02e08b1809b

build_options="peas"
build_options_default="peas"
desc_option_peas="Enable libpeas plugin library"

CPPFLAGS="-I${XBPS_CROSS_BASE}/usr/include/libxml2 -I${XBPS_CROSS_BASE}/usr/include/gupnp-1.2"
CPPFLAGS+=" -I${XBPS_CROSS_BASE}/usr/include/gssdp-1.2 -I${XBPS_CROSS_BASE}/usr/include/libsoup-2.4"

pre_configure() {
	CPP=$CPP ./autogen.sh
}

pragha-devel_package() {
	short_desc+=" - development files"
	depends="${sourcepkg}>=${version}_${revision}"
	pkg_install() {
		vmove usr/include/pragha/plugins
		vmove usr/lib/pragha/plugins/devices/libdeviceclient.so
	}
}
