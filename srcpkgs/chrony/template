# Template file for 'chrony'
pkgname=chrony
version=1.26
revision=7
build_style=gnu-configure
makedepends="libcap-devel readline-devel"
short_desc="Sets your computer's clock from time servers on the Net"
maintainer="Juan RP <xtraeme@gmail.com>"
license="GPL-2"
homepage="http://chrony.tuxfamily.org/"
distfiles="http://download.tuxfamily.org/chrony/$pkgname-$version.tar.gz"
checksum=fb191ca4ba59e192c96d022618ca3eaee49f3c11f9af8dd7297020b27bf3e05b
long_desc="
 It consists of a pair of programs: chronyd. This is a daemon which runs in
 background on the system. It obtains measurements (e.g. via the network) of
 the system's offset relative to other systems, and adjusts the system time
 accordingly. For isolated systems, the user can periodically enter the
 correct time by hand (using chronyc). In either case, chronyd determines the
 rate at which the computer gains or loses time, and compensates for this.
 Chronyd implements the NTP protocol and can act as either a client or a
 server. chronyc: this is a command-line driven control and monitoring program.
 An administrator can use this to fine-tune various parameters within the
 daemon, add or delete servers etc whilst the daemon is running."

system_accounts="chrony"
systemd_services="chrony.service on"
conf_files="/etc/chrony.conf"
make_dirs="
/var/log/chrony 0755 chrony chrony
/var/db/chrony	0755 chrony chrony"

post_install() {
	vinstall ${FILESDIR}/chrony.conf 644 etc
	vinstall ${FILESDIR}/chrony.service 644 lib/systemd/system
	vinstall ${FILESDIR}/chrony.logrotate 644 etc/logrotate.d chrony
	rm -rf ${DESTDIR}/usr/share/doc
}
