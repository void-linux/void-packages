# Template file for 'swi-prolog'
pkgname=swi-prolog
version=10.0.0
revision=1
build_style=cmake
build_helper="qemu"
configure_args="-DBUILD_TESTING=OFF"
hostmakedepends="pkg-config"
makedepends="SDL3-devel SDL3_image-devel cairo-devel gmp-devel libarchive-devel
 libyaml-devel ncurses-devel openssl-devel pango-devel pcre2-devel
 unixodbc-devel zlib-devel"
short_desc="Comprehensive free Prolog environment"
maintainer="Leah Neukirchen <leah@vuxu.org>"
license="LGPL-2.1-or-later"
homepage="http://www.swi-prolog.org/"
changelog="http://www.swi-prolog.org/ChangeLog?branch=stable"
distfiles="http://www.swi-prolog.org/download/stable/src/swipl-${version}.tar.gz"
checksum=98c552c48fc8b44dcd4440abbfed632cceb75055fde267be12f340bea8106590
CFLAGS=-D_FILE_OFFSET_BITS=64
CXXFLAGS=-D_FILE_OFFSET_BITS=64

if [ "$XBPS_TARGET_LIBC" = "glibc" ]; then
	makedepends+=" libxcrypt-devel"
fi

if [ "$XBPS_TARGET_WORDSIZE" = 32 ]; then
	broken="churning on CHR bootstrap compilation"
fi
