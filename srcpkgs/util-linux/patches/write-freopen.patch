From b89fdd9c05a6e5f12ab56441389e5ee9d1d7f30f Mon Sep 17 00:00:00 2001
From: Karel Zak <kzak@redhat.com>
Date: Tue, 6 Sep 2011 03:18:46 +0200
Subject: [PATCH] write: fix path for freopen()

Reported-by: xinglp <xinglp@gmail.com>
Signed-off-by: Karel Zak <kzak@redhat.com>
---
 term-utils/write.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

diff --git a/term-utils/write.c b/term-utils/write.c
index a825f62..a70eb7b 100644
--- a/term-utils/write.c
+++ b/term-utils/write.c
@@ -322,7 +322,7 @@ void do_write(char *tty, char *mytty, uid_t myuid)

	if (strlen(tty) + 6 > sizeof(path))
		errx(EXIT_FAILURE, _("tty path %s too long"), tty);
-	printf(path, "/dev/%s", tty);
+	snprintf(path, sizeof(path), "/dev/%s", tty);
	if ((freopen(path, "w", stdout)) == NULL)
		err(EXIT_FAILURE, "%s", path);

--
1.7.6.1
