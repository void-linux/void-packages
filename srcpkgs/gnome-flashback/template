# Template file for 'gnome-flashback'
pkgname=gnome-flashback
version=3.36.3
revision=1
build_helper=gir
build_style=gnu-configure
configure_args="--with-compiz-session --enable-compile-warnings=minimum"
hostmakedepends="gettext-devel pkg-config automake glib-devel gettext libtool"
makedepends="gtk+3-devel pam-devel gsettings-desktop-schemas-devel elogind-devel
 gdm-devel libcompizconfig-devel libglib-devel gdk-pixbuf-devel upower-devel ibus-devel
 polkit-devel pulseaudio-devel libcanberra-devel libxcb-devel libX11-devel pango-devel
 libxkbfile-devel gnome-bluetooth-devel gnome-desktop-devel gnome-panel-devel"
depends="gnome-bluetooth gnome-session gnome-settings-daemon
 gnome-panel gnome-themes-extra metacity"
short_desc="GNOME 3 session with similar user experience to the GNOME 2.x series"
maintainer="shizonic <realtiaz@gmail.com>"
license="GPL-3.0-or-later"
homepage="https://wiki.gnome.org/Projects/GnomeFlashback"
distfiles="${GNOME_SITE}/${pkgname}/${version%.*}/${pkgname}-${version}.tar.xz"
checksum=2dba9ea40f2da81c22954a8ccc29f8f1fa4ca8395a6bb552506635832751c1a7

pre_configure() {
	autoreconf -vfi
}

post_install() {
	vinstall ${FILESDIR}/gnome-flashback.pam 644 /etc/pam.d gnome-flashback
	vsed -i -e "s/ --systemd//g" ${DESTDIR}/usr/libexec/gnome-flashback-{compiz,metacity}
}
