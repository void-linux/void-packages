# Template file for 'dssi-vst'
pkgname=dssi-vst
version=0.9.2
revision=3
homepage="http://breakfastquay.com/dssi-vst/"
distfiles="http://code.breakfastquay.com/attachments/download/10/${pkgname}-${version}.tar.bz2"
short_desc="Run Windows VST plugins on Linux"
maintainer="davehome <davehome@redthumb.info.tm>"
license="GPL"
checksum=9934603b9959982022a5ab6147b60f915cc6f324d6585ea7c1e9eae7070c9262
long_desc="
 dssi-vst is an adapter that allows users of Linux audio software to take VST
 and VSTi audio effects and instrument plugins compiled for Windows, and load
 them into native LADSPA or DSSI plugin hosts. Plugins run at full speed for
 most audio processing, although their user interfaces are slower because of
 the Windows emulation."

only_for_archs=i686

Add_dependency run dssi
Add_dependency run ladspa-sdk
Add_dependency run ladspa-sdk-progs

Add_dependency build jack-devel
Add_dependency build alsa-lib-devel
Add_dependency build libstdc++-devel
Add_dependency build liblo-devel
Add_dependency build dssi-devel
Add_dependency build ladspa-sdk
Add_dependency build wine-unstable		# Needs wineg++ to build
Add_dependency build wine-unstable-devel	# Needs windows.h to build

do_configure()
{
	sed -i -e "s|/usr/local|${DESTDIR}/usr|" Makefile
}

do_build()
{
	make ${makejobs}
}

do_install()
{
	mv dssi-vst-server.exe dssi-vst-server
	mv dssi-vst-scanner.exe dssi-vst-scanner
	make ${makejobs} install
}
