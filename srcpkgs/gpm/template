# Template file for 'gpm'
pkgname=gpm
version=1.20.7
revision=8
build_style=gnu-configure
configure_args="--sbindir=/usr/bin"
hostmakedepends="automake libtool flex wget"
makedepends="ncurses-devel libfl-devel"
short_desc="Mouse server for the console and xterm"
maintainer="Juan RP <xtraeme@voidlinux.eu>"
homepage="http://www.nico.schottelius.org/software/gpm/"
license="GPL-2"
distfiles="http://www.nico.schottelius.org/software/gpm/archives/${pkgname}-${version}.tar.lzma"
checksum=a955053b36556ffa7c628ce18fd6de7d625966573fa412fb08869533d8f7385c

# SSL certificate subject doesn't match host www.nico.schottelius.org
XBPS_FETCH_CMD="wget --no-check-certificate"

pre_configure() {
	./autogen.sh
}
post_install() {
	cd ${DESTDIR}/usr/lib
	ln -s libgpm.so.2.* libgpm.so
	touch ${DESTDIR}/usr/share/info/dir

	vinstall ${FILESDIR}/gpm.sh 644 etc/profile.d
	vsv gpm
}
gpm-devel_package() {
	depends="libgpm-${version}_${revision}"
	short_desc+=" - development files"
	pkg_install() {
		vmove usr/include
		vmove "usr/lib/*.a"
		vmove "usr/lib/*.so"
	}
}
libgpm_package() {
	short_desc+=" - runtime library"
	pkg_install() {
		vmove "usr/lib/*.so.*"
	}
}
