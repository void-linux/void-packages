The macro major() is defined in sys/sysmacros.h

--- a/src/daemon/open_console.c	2012-10-26 23:21:38.000000000 +0200
+++ b/src/daemon/open_console.c	2015-06-22 16:13:14.921927918 +0200
@@ -25,6 +25,7 @@
 
 /* Linux specific (to be outsourced in gpm2 */
 #include <linux/serial.h>           /* for serial console check */
+#include <sys/sysmacros.h>          /* for major() */
 #include <asm/ioctls.h>            /* for serial console check */
 
 
