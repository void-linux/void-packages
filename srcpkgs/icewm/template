# Template file for 'icewm'
pkgname=icewm
version=1.5.4
revision=1
build_style=cmake
configure_args="-DENABLE_LTO=ON -DCONFIG_LIBRSVG=ON
 -DCONFIG_EXTERNAL_TRAY=ON -DENABLE_ALSA=ON"
hostmakedepends="asciidoc gettext-devel libtool mkfontdir perl pkg-config"
makedepends="libSM-devel libXft-devel libXinerama-devel libXpm-devel
 libXrandr-devel libao-devel librsvg-devel libsndfile-devel"
depends="shared-mime-info"
short_desc="Window Manager designed for speed, usability, and consistency"
maintainer="Juan RP <xtraeme@voidlinux.org>"
license="GPL-2.0-or-later"
homepage="https://github.com/bbidulock/icewm"
distfiles="https://github.com/ice-wm/icewm/releases/download/${version}/icewm-${version}.tar.xz"
checksum=895c81d6672a3eaa91c76a0807ea8fea6789b8a3c8626635f1c11d7c5ca059ea

# No c++ warnings for 'One Defintion Rules' and make sure LTO goes ok
CXXFLAGS="-Wno-odr -fno-strict-aliasing"

post_install() {
	# icewmtray is not installed by 'make install'
	vbin build/icewmtray
}
