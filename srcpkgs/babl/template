# Template file for 'babl'
pkgname=babl
version=0.1.116
revision=1
build_style=meson
build_helper=gir
configure_args="-Dwith-docs=false -Denable-gir=true"
hostmakedepends="pkg-config vala-devel gobject-introspection"
makedepends="lcms2-devel vala-devel"
short_desc="Dynamic pixel format translation library"
maintainer="classabbyamp <void@placeviolette.net>"
license="LGPL-3.0-only"
homepage="https://gegl.org/babl/"
changelog="https://gitlab.gnome.org/GNOME/babl/-/raw/master/NEWS"
distfiles="https://download.gimp.org/pub/babl/${version%.*}/babl-${version}.tar.xz"
checksum=50fae069867c7ade1259888ff1e3db85fec86d708252e5385b5a4f39a78ec483

case "$XBPS_TARGET_MACHINE" in
	arm*) configure_args+=" -Db_lto=false"
esac

babl-devel_package() {
	depends="lcms2-devel ${sourcepkg}>=${version}_${revision}"
	short_desc+=" - development files"
	pkg_install() {
		vmove usr/include
		vmove usr/share/vala
		vmove usr/lib/pkgconfig
		vmove "usr/lib/*.so"
		vmove "usr/share/gir-*"
	}
}
