diff --git f.file.cc f.file.cc
index ef8d59a..de26b74 100644
--- f.file.cc
+++ f.file.cc
@@ -3344,16 +3344,17 @@ int find_imagefiles(cchar *folder, int flags, char **&flist, int &NF, int Finit)
 
    globflags = GLOB_NOSORT;
    Fimages = Fthumbs = Fdirs = Frecurse = 0;
-   
+
    if (flags & 1) Fimages = 1;
    if (flags & 2) Fthumbs = 1;
    if (flags & 4) globflags += GLOB_PERIOD;
    if (flags & 8) Fdirs = 1;
    if (flags & 16) Frecurse = 1;
-   
+
+#ifdef __GLIBC__
    if (Fdirs && ! Fimages && ! Fthumbs)
       globflags += GLOB_ONLYDIR;
-
+#endif
    globdata.gl_pathc = 0;                                                        //  glob() setup
    globdata.gl_offs = 0;
    globdata.gl_pathc = 0;
