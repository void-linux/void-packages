# Template file for 'shadowsocks-rust'
pkgname=shadowsocks-rust
version=1.24.0
revision=1
build_style=cargo
hostmakedepends="pkg-config"
makedepends="libzstd-devel"
short_desc="Rust port of shadowsocks, a fast lightweight obfuscated tunnel proxy"
maintainer="JkktBkkt <apkabikov@gmail.com>"
license="MIT"
homepage="https://github.com/shadowsocks/shadowsocks-rust"
changelog="https://github.com/shadowsocks/shadowsocks-rust/releases"
distfiles="https://github.com/shadowsocks/shadowsocks-rust/archive/refs/tags/v${version}.tar.gz"
checksum=a89865d1c5203de1b732017dd032e85f943d1592e8d3152eb7d2c4f3fca387bf

system_accounts="_shadowsocks"
make_dirs="/etc/shadowsocks-rust 0755 root root"

# periodically hangs while trying to connect to www.example.com:80
make_check_args="-- --skip=http_proxy"

post_install() {
	vlicense LICENSE
	vsv shadowsocks-rust-server
	vsv shadowsocks-rust-client
	vsconf examples/config.json
	vsconf examples/config_ext.json
}
