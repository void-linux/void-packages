From 2bb3e383c12f46f0ad599386edc51972effc5930 Mon Sep 17 00:00:00 2001
From: "R.J.V. Bertin" <rjvbertin@gmail.com>
Date: Wed, 21 Feb 2018 23:15:24 +0100
Subject: [PATCH] migrate away from KGlobalSettings::*Font() methods

Differential revision: https://phabricator.kde.org/D10725
---
 qt5/style/qtcurve.cpp     | 2 +-
 qt5/style/qtcurve_api.cpp | 4 ++--
 2 files changed, 3 insertions(+), 3 deletions(-)

--- a/qt5/style/qtcurve.cpp
+++ b/qt5/style/qtcurve.cpp
@@ -4271,7 +4271,7 @@ void Style::applyKdeSettings(bool pal)
         QApplication::setFont(mnu, "QMenuBar");
         QApplication::setFont(mnu, "QMenu");
         QApplication::setFont(mnu, "KPopupTitle");
-        QApplication::setFont(KGlobalSettings::toolBarFont(), "QToolBar");
+        QApplication::setFont(g.readEntry("toolBarFont", QApplication::font()), "QToolBar");
     }
 }
 #endif
--- a/qt5/style/qtcurve_api.cpp
+++ b/qt5/style/qtcurve_api.cpp
@@ -48,6 +48,7 @@
 #include <QRadioButton>
 #include <QTextEdit>
 #include <QFontMetrics>
+#include <QFontDatabase>
 #include <QDial>
 #include <QLabel>
 #include <QStackedLayout>
@@ -2486,7 +2487,7 @@ Style::drawControl(ControlElement elemen
                 }
 #ifdef QTC_QT5_ENABLE_KDE
                 if (opts.dwtSettings & DWT_FONT_AS_PER_TITLEBAR) {
-                    painter->setFont(KGlobalSettings::windowTitleFont());
+                    painter->setFont(QFontDatabase::systemFont(QFontDatabase::TitleFont));
                 }
 #endif
                 QFontMetrics fm(painter->fontMetrics());
@@ -5465,7 +5466,7 @@ void Style::drawComplexControl(ComplexCo
                 font.setBold(true);
                 painter->setFont(font);
 #else
-                painter->setFont(KGlobalSettings::windowTitleFont());
+                painter->setFont(QFontDatabase::systemFont(QFontDatabase::TitleFont));
 #endif
 
                 QFontMetrics fm(painter->fontMetrics());
