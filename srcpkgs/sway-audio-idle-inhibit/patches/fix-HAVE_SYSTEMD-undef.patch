diff --git a/include/idle.hpp b/include/idle.hpp
index fa4abcb..9230426 100644
--- a/include/idle.hpp
+++ b/include/idle.hpp
@@ -1,6 +1,6 @@
 #pragma once

-#if HAVE_SYSTEMD
+#if defined(HAVE_SYSTEMD) && HAVE_SYSTEMD
 #include <systemd/sd-bus.h>
 #include <systemd/sd-login.h>
 #elif HAVE_ELOGIND
