# Template file for 'azahar-emulator'
pkgname=azahar-emulator
version=2123.3
revision=1
build_style=cmake
configure_args="-DCMAKE_BUILD_TYPE=Release -DENABLE_QT=ON -DENABLE_SDL2=ON -DENABLE_WEB_SERVICE=OFF -DUSE_DISCORD_PRESENCE=ON"
hostmakedepends="pkg-config cmake ninja python3 git qt6-tools qt6-base glslang"
makedepends="smpeg2-devel boost-devel catch2 libzstd-devel openssl-devel
 qt6-base-devel qt6-multimedia-devel qt6-tools-devel qt6-wayland-devel
 qt6-svg-devel qt6-declarative-devel SDL2_mixer-devel SDL2_image-devel
 SDL2-devel ffmpeg-devel vulkan-loader-devel qt6-base-private-devel crypto++-devel
 libxkbcommon-devel alsa-lib-devel libusb-devel libglvnd-devel SPIRV-Headers
 soundtouch-devel gamemode sndio-devel qt6-multimedia-private-devel gstreamermm-devel
 qt6-tools-private-devel ffmpeg-devel"
short_desc="Nintendo 3DS emulator based on Citra and Lime3DS"
maintainer="Luis F. Rosales <Lfssjquantum@murena.io>"
license="GPL-2.0-only"
homepage="https://azahar-emu.org"
distfiles="https://github.com/azahar-emu/azahar/releases/download/${version}/azahar-unified-source-${version}.tar.xz"
checksum=e0d321ffda7c0e372c67bfbddc92e997a29c93deae93ef790c2b38a8506fb6a9
pre_configure() {
	local qt_ver=$(ls /usr/include/qt6/QtGui/ | grep '^[0-9]' | head -1)
	if [ -n "$qt_ver" ]; then
		export CXXFLAGS="$CXXFLAGS -I/usr/include/qt6/QtGui/$qt_ver/QtGui"
		msg_normal "Applied fix: Added Qt6 private headers path ($qt_ver)\n"
	fi
}
