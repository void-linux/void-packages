# Template file for 'puyovs'
pkgname=puyovs
version=2022.11.28
revision=1
build_wrksrc=${pkgname}-nightly
build_style="cmake"
short_desc="PuyoVS"
maintainer="poopingpenis <poopingpeniz@outlook.com"
license="GPL-3.0"
homepage="https://puyovs.com/"
distfiles="https://github.com/puyonexus/puyovs/archive/refs/tags/nightly.tar.gz https://github.com/g-truc/glm/archive/refs/tags/0.9.9.8.tar.gz>glm-v0.9.9.8.tar.gz https://github.com/zlib-ng/zlib-ng/archive/refs/tags/2.0.6.tar.gz>zlib-ng-v2.0.6.tar.gz https://github.com/randy408/libspng/archive/refs/tags/v0.7.2.tar.gz>libspng-v0.7.2.tar.gz https://github.com/libsdl-org/SDL_ttf/archive/refs/tags/release-2.20.1.tar.gz>SDL_ttf-v2.20.1.tar.gz https://github.com/libsdl-org/SDL/archive/refs/tags/release-2.24.1.tar.gz>SDL-v2.24.1.tar.gz https://github.com/libsdl-org/freetype/archive/6fc77cee03e078e97afcee0c0e06a2d3274b9a29.tar.gz>freetype-6fc77cee03e078e97afcee0c0e06a2d3274b9a29.tar.gz https://github.com/libsdl-org/harfbuzz/archive/6022fe2f68d028ee178284f297b3902ffdf65b03.tar.gz>harfbuzz-6022fe2f68d028ee178284f297b3902ffdf65b03.tar.gz"
checksum="1dd507d7bcc98728129e9a21e753c75a5df957ac6a3c074876646e12f49ee8d3 7d508ab72cb5d43227a3711420f06ff99b0a0cb63ee2f93631b162bfe1fe9592 8258b75a72303b661a238047cb348203d88d9dddf85d480ed885f375916fcab6 4acf25571d31f540d0b7ee004f5461d68158e0a13182505376805da99f4ccc4e 520bb84423dc705164781b6f00d81e7016fbdd884b2bd2b2f24335269a0130a7 b59404c1a9991c9c5a8227ee6476c27c916f3c891b199a8025a761d06b48afbb 6ef7cb491ff87bd69cf71fc824daafa45ca1b75f735ad804f7384a0e4d9191fc b8951f92bd901e7b2144753b9177b19d7e4c5ae1ef47119c51b91cca9c9bccf9"
makedepends="qt5-devel"

post_extract() {
	mv ${XBPS_BUILDDIR}/${pkgname}-${version}/glm-0.9.9.8/* ${pkgname}-nightly/ThirdParty/glm/glm
	mv ${XBPS_BUILDDIR}/${pkgname}-${version}/zlib-ng-2.0.6/* ${pkgname}-nightly/ThirdParty/zlib-ng/zlib-ng
	mv ${XBPS_BUILDDIR}/${pkgname}-${version}/libspng-0.7.2/* ${pkgname}-nightly/ThirdParty/libspng/libspng
	mv ${XBPS_BUILDDIR}/${pkgname}-${version}/SDL_ttf-release-2.20.1/* ${pkgname}-nightly/ThirdParty/sdl-ttf/sdl-ttf
	mv ${XBPS_BUILDDIR}/${pkgname}-${version}/SDL-release-2.24.1/* ${pkgname}-nightly/ThirdParty/sdl/sdl
	mv ${XBPS_BUILDDIR}/${pkgname}-${version}/freetype-*/* ${pkgname}-nightly/ThirdParty/sdl-ttf/sdl-ttf/external/freetype
	mv ${XBPS_BUILDDIR}/${pkgname}-${version}/harfbuzz-*/* ${pkgname}-nightly/ThirdParty/sdl-ttf/sdl-ttf/external/harfbuzz
}

post_install() {
	mv /destdir/puyovs-${version}/usr/bin/PuyoVS /destdir/puyovs-${version}/usr/bin/puyovs
	vinstall ${FILESDIR}/puyovs.desktop 644 /usr/share/applications/
	vinstall ${FILESDIR}/puyovs.png 644 /usr/share/pixmaps/
}