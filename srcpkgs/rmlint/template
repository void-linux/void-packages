# Template file for 'rmlint'
pkgname=rmlint
version=2.10.3
revision=2
build_style=scons
make_build_args="VERBOSE=1"
hostmakedepends="pkg-config python3-Sphinx python3-setuptools glib-devel"
makedepends="libblkid-devel elfutils-devel json-glib-devel"
depends="python3-cairo python3-colorlog python3-gobject python3-parsedatetime"
short_desc="Extremely fast tool to remove duplicates"
maintainer="Andrea Brancaleoni <abc@pompel.me>"
license="GPL-3.0-or-later"
homepage="http://rmlint.rtfd.org/"
changelog="https://raw.githubusercontent.com/sahib/rmlint/master/CHANGELOG.md"
distfiles="https://github.com/sahib/${pkgname}/archive/v${version}.tar.gz"
checksum=8ffdbd5d09d15c8717ae55497e90d6fa46f085b45ac1056f2727076da180c33e

pre_build() {
	make_build_args+=" --prefix=${DESTDIR}/usr"
}

pre_install() {
	vbin rmlint
	vman docs/_build/man/rmlint.1
	make_install_args="${make_build_args} --prefix=${DESTDIR}/usr -j1"
}

post_install() {
	rm -f "${DESTDIR}/usr/share/glib-2.0/schemas/gschemas.compiled"
}
