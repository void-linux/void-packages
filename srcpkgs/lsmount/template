# Template file for 'lsmount'
pkgname=lsmount
version=0.2.4
revision=1
build_style=gnu-makefile
make_use_env=yes
hostmakedepends="pkg-config asciidoc"
makedepends="libconfig-devel ncurses-devel"
short_desc="/proc/mounts formatter with configurable colours, alignment & filtering"
maintainer="a dinosaur <nick@a-dinosaur.com>"
license="ISC"
homepage="https://www.lsmount.org/"
distfiles="https://github.com/Llandon/lsmount/archive/refs/tags/v${version}.tar.gz"
checksum=cb3cb9fb675278e513b038df20846638498912e94c38f85d789e9f6ae11fc67d
conf_files="/etc/lsmountrc"

post_patch() {
	vsed '/CC[[:blank:]]*=.*/d' -i Makefile
	vsed 's/-ltermcap/-lncurses/' -i Makefile
	vsed 's/^\tcp \(.*\) /\tinstall -D \1 $(DESTDIR)/' -i Makefile
}

pre_install() {
	mkdir -p "${DESTDIR}/usr/share/man/man1/"
}

post_install() {
	vlicense LICENSE
	vdoc CHANGELOG.md
}
