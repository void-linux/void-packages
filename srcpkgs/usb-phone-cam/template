# Template file for 'usb-phone-cam'
pkgname=usb-phone-cam
version=1.1.0
revision=1
depends="python3 python3-tornado android-tools"
short_desc="Turn Android phone into USB Webcam (WebCodecs/H.264)"
maintainer="Alhassan <alhassan200012@gmail.com>"
license="MIT"
homepage="https://github.com/alhassanmohamed2/USB-Phone-Cam"
distfiles="https://github.com/alhassanmohamed2/USB-Phone-Cam/archive/refs/tags/v${version}.tar.gz"
checksum=b559e5002ada16b576cfb3877037f8aedef3b91b6fee1fbb40cf9586249c03b8

do_build() {
	: # No compilation needed, just scripts
}

do_install() {
	# Create directory structure
	vmkdir usr/share/usb-phone-cam

	# Copy Project Files
	vcopy server.py usr/share/usb-phone-cam/
	vcopy public usr/share/usb-phone-cam/
	vcopy start_usb.sh usr/share/usb-phone-cam/
	vcopy launch.sh usr/share/usb-phone-cam/

	# Install Desktop Entry
	vinstall UsbCamera.desktop 644 usr/share/applications/

	# Create /usr/bin symlink
	vmkdir usr/bin
	ln -s /usr/share/usb-phone-cam/launch.sh ${DESTDIR}/usr/bin/usb-phone-cam

	# License
	vlicense LICENSE
}
