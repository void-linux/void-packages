# Template file for 'giflib'
pkgname=giflib
version=4.1.6
revision=4
distfiles="${SOURCEFORGE_SITE}/$pkgname/$pkgname-$version.tar.gz"
build_style=gnu-configure
short_desc="library for GIF images"
maintainer="Juan RP <xtraeme@gmail.com>"
checksum=ceca77dcd29eb6f6d0336414dfecc9094413f71c3b589afcf96bb72fbfb08ce0
long_desc="
 GIFLIB is a package of portable tools and library routines for working
 with GIF images."

subpackages="$pkgname-devel $pkgname-tools"
Add_dependency build libSM-devel
Add_dependency build libICE-devel
Add_dependency build libX11-devel

post_install()
{
	cd ${wrksrc} || return 1

	# libungif compatibility - instructions taken from Redhat specfile
	local MAJOR=`echo ${pkgver} | sed 's/\([0-9]\+\)\..*/\1/'`
	gcc -shared -Wl,-soname,libungif.so.${MAJOR} -Llib/.libs \
		-lgif -o libungif.so.${version} || return 1
	install -m755 libungif.so.${version} ${DESTDIR}/usr/lib || return 1
	ln -sf libungif.so.${version} \
		${DESTDIR}/usr/lib/libungif.so.4 || return 1
	ln -sf libungif.so.4 ${DESTDIR}/usr/lib/libungif.so || return 1
}
