# Template file for 'gdnsd'
pkgname=gdnsd
version=3.8.3
revision=1
build_style=gnu-configure
configure_args="
 --disable-silent-rules
 --with-rundir=/run/gdnsd"
hostmakedepends="automake pkg-config"
makedepends="libunwind-devel libmaxminddb-devel perl xz
 libev-devel liburcu-devel libsodium-devel"
checkdepends="perl-Socket6 perl-IO-Socket-INET6
 perl-HTTP-Daemon perl-Net-DNS"
short_desc="Authoritative-only DNS server with geographic plugins"
maintainer="JailBird <jailbird@fdf.net>"
license="GPL-3.0-or-later"
homepage="https://gdnsd.org/"
changelog="https://raw.githubusercontent.com/gdnsd/gdnsd/refs/heads/main/NEWS"
distfiles="https://github.com/gdnsd/gdnsd/releases/download/v${version}/gdnsd-${version}.tar.xz"
checksum=16a81836273dcbc17e5527df2214e8664d0545bb18b55f08325710de10c8f64d

system_accounts="gdnsd"
gdnsd_homedir="/var/lib/gdnsd"

make_dirs="/var/lib/gdnsd 0750 gdnsd gdnsd
 /etc/gdnsd 0750 gdnsd gdnsd"

post_install() {
	vsv gdnsd
}
