# Template file for 'xmlada'
pkgname=xmlada
version=25.0.0
revision=1
build_style=gnu-configure
short_desc="XML parser for Ada"
maintainer="Estevan Castilho <tevo@riajuu.net>"
license="GPL-3.0-or-later WITH GCC-exception-3.1"
homepage="https://github.com/AdaCore/xmlada"
distfiles="https://github.com/AdaCore/xmlada/archive/refs/tags/v${version}.tar.gz"
checksum="dbb5984a0931311c7a787a679ef4cfaeeedd357474a585dc170140ef2251dcca"

hostmakedepends="gcc-ada autoconf gprbuild-bootstrap"

configure_args+=" --enable-shared"

do_configure() {
	autoreconf -fi
	./configure $configure_args
}

xmlada-devel_package() {
	short_desc+=" - development files"
	depends="${sourcepkg}>=${version}_${revision}"
	pkg_install() {
		cd "$DESTDIR"
		# vmove isn't the biggest fan of globs on parent directories
		for file in usr/lib/xmlada/*/*.{ali,a}; do
			vmove "$file"
		done
		vmove "usr/lib/*.so"
		vmove usr/share/gpr
		vmove usr/include
		vmove usr/share/examples/xmlada
	}
}
