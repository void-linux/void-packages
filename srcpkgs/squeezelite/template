# Template file for 'squeezelite'
pkgname=squeezelite
version=1.9.6.1198
revision=1
_githash=1c1f429ae9494748fe0fa5807c3a22710edaa12f
wrksrc="${pkgname}-${_githash}"
build_style=gnu-makefile
makedepends="alsa-lib-devel faad2-devel ffmpeg-devel libflac-devel libmad-devel libsoxr-devel libvorbis-devel mpg123-devel"
short_desc="Lightweight headless squeezebox emulator"
maintainer="Jean-Philippe Menil <jpmenil@gmail.com>"
license="GPL-3.0-or-later"
homepage="https://github.com/ralph-irving/squeezelite"
distfiles="https://github.com/ralph-irving/squeezelite/archive/${_githash}.tar.gz"
checksum=e8184646003cdca55ac420ab8401da848178704838353ce3954480276f2de62e

system_groups="squeezelite"
system_accounts="squeezelite"
squeezelite_shell="/bin/false"
squeezelite_descr="Squeezelite"
squeezelite_groups="audio"

do_build() {
	make LDFLAGS="${LDFLAGS} -lasound -lpthread -lm -lrt" \
		OPTS="${OPTS} -DDSD -DRESAMPLE -DVISEXPORT -DFFMPEG -DLINKALL"
}

do_install() {
	vinstall ${FILESDIR}/squeezelite.conf 640 etc/
	vbin squeezelite
	vsv squeezelite
}
