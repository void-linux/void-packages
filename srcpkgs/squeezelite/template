# Template file for 'squeezelite'
pkgname=squeezelite
version=1.9.9.1389
revision=1
_githash=46a16ff492f0bd6508f7bb0c09d0379cee3b07e2
wrksrc="${pkgname}-${_githash}"
build_style=gnu-makefile
makedepends="alsa-lib-devel faad2-devel ffmpeg-devel libflac-devel libmad-devel libsoxr-devel libvorbis-devel mpg123-devel"
short_desc="Lightweight headless squeezebox emulator"
maintainer="Jean-Philippe Menil <jpmenil@gmail.com>"
license="GPL-3.0-or-later"
homepage="https://github.com/ralph-irving/squeezelite"
distfiles="https://github.com/ralph-irving/squeezelite/archive/${_githash}.tar.gz"
checksum=b6dc32af1df7b520f407786fc3e263dc93270b64245f4ecba0d10989fa3a8e09

system_groups="squeezelite"
system_accounts="squeezelite"
squeezelite_shell="/bin/false"
squeezelite_descr="Squeezelite"

do_build() {
	make LDFLAGS="${LDFLAGS} -lasound -lpthread -lm -lrt" \
		OPTS="${OPTS} -DDSD -DRESAMPLE -DVISEXPORT -DFFMPEG -DLINKALL"
}

do_install() {
	vinstall ${FILESDIR}/squeezelite.conf 640 etc/
	vbin squeezelite
	vsv squeezelite
}
