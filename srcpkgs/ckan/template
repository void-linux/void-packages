# Template file for 'ckan'
pkgname=ckan
version=1.27.0
revision=1
archs="x86_64"
hostmakedepends="binutils bsdtar"
makedepends="binutils bsdtar"
depends="mono curl libcurl libcurl-32bit libgdiplus"
short_desc="Client for CKAN - The Comprehensive Kerbal Archive Network"
maintainer="lowranker <lowranker@protonmail.com>"
license="MIT"
homepage="https://github.com/KSP-CKAN/CKAN"
distfiles="https://github.com/KSP-CKAN/CKAN/releases/download/v${version}/ckan_${version}_all.deb"
checksum=246659078e50afb9eab8390800270aa4e3f5fdf8fffaaa5155d211eb1f992a3b

do_extract() {
	ar x ../ckan_${version}_all.deb
	bsdtar xzf data.tar.xz
}

do_install() {
	vbin usr/bin/ckan
	vdoc usr/share/doc/ckan/changelog.gz
	vdoc usr/share/doc/ckan/copyright
	vman usr/share/man/man1/ckan.1.gz
	vmkdir usr/share/icons
	vmkdir usr/share/applications
	vcopy usr/share/icons/ckan.ico usr/share/icons/
	vcopy usr/share/applications/ckan.desktop usr/share/applications/
	vmkdir usr/lib/ckan
	vcopy usr/lib/ckan/ckan.exe usr/lib/ckan/
}
