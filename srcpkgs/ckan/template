# Template file for 'ckan'
pkgname=ckan
version=1.30.4
revision=1
wrksrc=CKAN-${version}
hostmakedepends="curl mono-devel msbuild-bin libgdiplus-devel"
depends="mono libgdiplus"
short_desc="Comprehensive Kerbal Archive Network"
maintainer="Kyle Nusbaum <knusbaum+void@sdf.org>"
license="MIT"
homepage="https://github.com/KSP-CKAN/CKAN"
distfiles="https://github.com/KSP-CKAN/CKAN/archive/v${version}.tar.gz"
checksum=7c73543bf109fd1bc7917bb1955acaab14086e709e92351d4a6b10d780d53d23

do_build() {
	./build --configuration=Release
}

do_install() {
	  vmkdir /usr/bin/
	  vmkdir /usr/share/applications
	  vmkdir /usr/share/icons
	  vmkdir /usr/lib/ckan
	  vmkdir /usr/share/man/man1
	  vcopy debian/ckan /usr/bin/ckan
	  vcopy debian/ckan.desktop /usr/share/applications/ckan.desktop
	  vcopy debian/ckan.ico /usr/share/icons/ckan.ico
	  vlicense debian/copyright
	  vcopy _build/ckan.exe /usr/lib/ckan/ckan.exe
	  vcopy debian/ckan.1 /usr/share/man/man1/ckan.1
}
