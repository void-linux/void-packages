# Template file for 'KataGo-eigen'
pkgname=KataGo-eigen
version=1.16.3
revision=1
build_wrksrc=cpp
build_style=cmake
configure_args="-DUSE_BACKEND=EIGEN -DNO_GIT_REVISION=1"
make_check_target="check"
makedepends="zlib-devel libzip-devel eigen"
short_desc="KataGo Go/Weiqi/Baduk analysis engine (eigen backend)"
maintainer="Jason Elswick <jason@jasondavid.us>"
license="MIT"
homepage="https://github.com/lightvector/KataGo/"
distfiles="https://github.com/lightvector/KataGo/archive/refs/tags/v${version}.tar.gz"
checksum=3e9764cd9900a660ba2f87945167ed47fe1f38167498c91253ca865d00acf5c7
alternatives="katago:katago:/usr/bin/katago-eigen"

case "$XBPS_TARGET_MACHINE" in
	i686*) broken="size_t assert fails" ;;
esac

do_check() {
	build/katago runtests
}

do_install() {
	vbin build/katago katago-eigen
	vlicense "${wrksrc}"/LICENSE
}
