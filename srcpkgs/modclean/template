# Template file for 'modclean'
pkgname=modclean
version=3.0.0beta.1
revision=1
wrksrc="modclean-3.0.0-beta.1"
create_wrksrc="yes"
hostmakedepends="nodejs"
makedepends="nodejs"
depends="nodejs"
short_desc="Remove unwanted files and directories from your node_modules folder"
maintainer="Soc Virnyl S. Estela <renegan.ronin@gmail.com>"
license="MIT"
homepage="https://github.com/ModClean/modclean"
distfiles="${homepage}/archive/3.0.0-beta.1.tar.gz"
checksum=58a39e8b4eed1da8131facfb21a455659144aacd250a73a6efaba31500b901f0

do_build() {
	cd modclean-3.0.0-beta.1/
	npm install --no-optional --save
	./bin/modclean.js -r -a '.bin,bin.js' --ignore='license'
	vlicense LICENSE
}


do_install() {
	mv modclean-3.0.0-beta.1/* .
	rm -rf modclean-3.0.0-beta.1
	vmkdir usr/bin/
	vmkdir usr/lib/node_modules/modclean/
	vcopy "*" usr/lib/node_modules/modclean/
}

post_install() {
	ln -sf /usr/lib/node_modules/modclean/bin/modclean.js "$DESTDIR"/usr/bin/modclean
}
