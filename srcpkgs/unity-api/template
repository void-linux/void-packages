# Template file for 'unity-api'
pkgname=unity-api
version=8.7+17.04.20170404
revision=1
_ubuntu_rel=0ubuntu9
build_style=cmake
configure_args="-DCMAKE_INSTALL_PREFIX=/usr -DCMAKE_INSTALL_LIBDIR=/usr/lib \
 -DNO_TESTS=TRUE"
hostmakedepends="doxygen graphviz pkg-config python3 qt5 wget"
makedepends="glib-devel"
short_desc="API for Unity shell integration"
maintainer="Earldridge Jazzed Pineda <earldridgejazzedpineda@gmail.com>"
license="GPL-3.0-only, LGPL-3.0-only"
homepage="https://launchpad.net/unity-api"
distfiles="https://launchpad.net/ubuntu/+archive/primary/+files/${pkgname}_${version}.orig.tar.gz"
checksum=5c17e5092e384c80382569f3beee282f522ff0ca6ad5d72690258f14abb759d9

do_patch() {
	wget https://launchpad.net/ubuntu/+archive/primary/+files/${pkgname}_${version}-${_ubuntu_rel}.diff.gz
	gunzip ${pkgname}_${version}-${_ubuntu_rel}.diff.gz
	patch -p1 -i ${pkgname}_${version}-${_ubuntu_rel}.diff
}

pre_configure() {
	export CFLAGS+=" -fpermissive"
}

unity-api-devel_package() {
	short_desc+=" - development files"
	depends="${sourcepkg}>=${version}_${revision} qt5-devel"
	pkg_install() {
		vmove usr/include
		vmove "usr/lib/*.so"
		vmove usr/lib/pkgconfig
	}
}
