From 8bda09298b64ae909f081dac6143ffa41992dea0 Mon Sep 17 00:00:00 2001
From: Jan Willamowius <jan@willamowius.de>
Date: Wed, 23 Feb 2022 08:30:42 +0100
Subject: [PATCH] disable check for PTLib Makefile for now, as it breaks
 cross-compilation with autoconf 2.69

---
 configure    | 22 +---------------------
 configure.ac |  4 +++-
 2 files changed, 4 insertions(+), 22 deletions(-)

diff --git a/configure b/configure
index 0f0eeac..20ceee5 100755
--- a/configure
+++ b/configure
@@ -3906,27 +3906,7 @@ if test "x$PTLIBDIR" = "x/usr/local" -o "x$PTLIBDIR" = "x/usr/local/"; then
   PTLIBDIR="/usr/local/share/ptlib/"
 fi
 
-as_ac_File=`$as_echo "ac_cv_file_${PTLIBDIR}/make/lib.mak" | $as_tr_sh`
-{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for ${PTLIBDIR}/make/lib.mak" >&5
-$as_echo_n "checking for ${PTLIBDIR}/make/lib.mak... " >&6; }
-if eval \${$as_ac_File+:} false; then :
-  $as_echo_n "(cached) " >&6
-else
-  test "$cross_compiling" = yes &&
-  as_fn_error $? "cannot check for file existence when cross compiling" "$LINENO" 5
-if test -r "${PTLIBDIR}/make/lib.mak"; then
-  eval "$as_ac_File=yes"
-else
-  eval "$as_ac_File=no"
-fi
-fi
-eval ac_res=\$$as_ac_File
-	       { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_res" >&5
-$as_echo "$ac_res" >&6; }
-if eval test \"x\$"$as_ac_File"\" = x"yes"; then :
-  HAS_PTLIB_LIB_MAK=1
-fi
-
+HAS_PTLIB_LIB_MAK=1
 
 if test "${HAS_PTLIB_LIB_MAK:-unset}" = "unset" ; then
 
diff --git a/configure.ac b/configure.ac
index cf72965..93bf1ab 100644
--- a/configure.ac
+++ b/configure.ac
@@ -109,7 +109,9 @@ if test "x$PTLIBDIR" = "x/usr/local" -o "x$PTLIBDIR" = "x/usr/local/"; then
   PTLIBDIR="/usr/local/share/ptlib/"
 fi
 
-AC_CHECK_FILE(${PTLIBDIR}/make/lib.mak, HAS_PTLIB_LIB_MAK=1)
+dnl disable check for now, as it breaks cross-compilation with autoconf 2.69
+dnl AC_CHECK_FILE(${PTLIBDIR}/make/lib.mak, HAS_PTLIB_LIB_MAK=1)
+HAS_PTLIB_LIB_MAK=1
 
 if test "${HAS_PTLIB_LIB_MAK:-unset}" = "unset" ; then
   PKG_PROG_PKG_CONFIG
