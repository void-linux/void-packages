# Template file for 'asar'
pkgname=asar
version=3.0.3
revision=1
hostmakedepends="nodejs"
makedepends="nodejs modclean"
depends="nodejs electron12"
short_desc="Creating Electron app packages"
maintainer="Soc Virnyl S. Estela <renegan.ronin@gmail.com>"
license="MIT"
homepage="https://github.com/electron/asar"
distfiles="${homepage}/archive/refs/tags/v${version}.tar.gz"
checksum=0a5ded75457fd95d87ec17586d7db7bea32db2df2f52961170064ab0b0ff8b5a
python_version=3

do_install() {
	npm install -g --user root --engine-strict --prefix "$DESTDIR"/usr "${XBPS_SRCDISTDIR}/${pkgname}-${version}/v${version}.tar.gz"
	local _npmdir="${DESTDIR}/usr/lib/node_modules/${pkgname}"
	cd "$_npmdir"
	modclean -r -a "*.ts,.bin,.vscode,bin.js" --ignore='license'
	vlicense "$_npmdir/LICENSE.md"
	vdoc "$_npmdir/README.md"
}


