# Template file for 'kio-extras'
pkgname=kio-extras
version=18.08.3
revision=2
build_style=cmake
configure_args="-DBUILD_TESTING=OFF -DDESKTOPTOJSON_EXECUTABLE=/usr/bin/desktoptojson"
hostmakedepends="extra-cmake-modules pkg-config gperf qt5-qmake qt5-host-tools
 python kdoctools kcoreaddons kio"
makedepends="kdesignerplugin-devel kactivities5-devel kdelibs4support-devel
 kdnssd-devel khtml-devel kpty-devel exiv2-devel libmtp-devel libssh-devel
 libopenexr-devel samba-devel taglib-devel qt5-webengine-devel qt5-webchannel-devel
 qt5-location-devel"
short_desc="Additional KIO components"
maintainer="Denis Revin <denis.revin@gmail.com>"
license="GPL-2.0-or-later, LGPL-2.0-or-later"
homepage="https://cgit.kde.org/kio-extras.git"
distfiles="${KDE_SITE}/applications/${version}/src/${pkgname}-${version}.tar.xz"
checksum=450d69b16a873da51190c9397b2b0ecb08bc0dcae0d2a07f7ab1d2efcd02c280

post_install() {
	# workaround for CVE-2018-19120
	rm "${DESTDIR}/usr/lib/qt5/plugins/htmlthumbnail.so"
	rm "${DESTDIR}/usr/share/kservices5/htmlthumbnail.desktop"
}
