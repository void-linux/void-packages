# Template file for 'fprintd'
pkgname=fprintd
version=1.90.1
revision=1
build_style=meson
configure_args="--sysconfdir=/etc/fprintd -Dman=true -Dgtk_doc=false
 -Dpam_modules_dir=/usr/lib/security -Dsystemd_system_unit_dir=/not-systemd"
conf_files="/etc/fprintd/fprintd.conf"
hostmakedepends="meson dbus-glib-devel gettext-devel glib-devel intltool
 pkg-config perl"
makedepends="dbus-devel dbus-glib-devel gettext-devel glib-devel
 libfprint2-devel pam-devel polkit-devel cairo-devel elogind-devel
 pam_wrapper python3-cairo python3-pypamtest python3-dbus python3-dbusmock"
short_desc="Daemon that provides fingerprint scanning functionality"
maintainer="Enno Boland <gottox@voidlinux.org>"
license="GPL-2.0-or-later"
homepage="https://www.freedesktop.org/wiki/Software/fprint/"
distfiles="https://gitlab.freedesktop.org/libfprint/fprintd/uploads/a47c31c844e23e070665a8a85dae0144/fprintd-$version.tar.xz"
checksum=b4940b1dfb052a3641f1bb9bc7685b649aaa26220016dd793871d4f421c8a30d
lib32disabled=yes

CFLAGS="-fcommon"

post_patch() {
	vsed -i -e "/^systemd_dep *=/d" meson.build
}

post_install() {
	rm -rf $DESTDIR/not-systemd
}
