# Template file for 'python-xcffib'
pkgname=python-xcffib
version=0.8.1
revision=1
archs=noarch
wrksrc="${pkgname#*-}-${version}"
build_style=python-module
pycompile_module="${pkgname#*-}"
make_install_args="--skip-build"
hostmakedepends="python-setuptools python3-setuptools pkg-config
 cabal-install parallel xcb-proto python-cffi python3-cffi"
makedepends="python-devel python3-devel libffi-devel libxcb-devel"
depends="python-six python-cffi libxcb"
short_desc="Drop-in replacement for xpyb based on cffi"
maintainer="Mohammad Amin Sameti <mamins1376@gmail.com>"
license="Apache-2.0"
homepage="https://github.com/tych0/xcffib"
distfiles="${homepage}/archive/v${version}.tar.gz"
checksum=879d9bc360e63e62a8f9b80299127ecbdb7de90271ebfe6a532fbb894efab59a
nocross=yes

pre_build() {
	cabal v2-update
	PKG_CONFIG_PATH=/usr/lib/pkgconfig make ${makejobs} xcffib
}

python3-xcffib_package() {
	depends="python3-six python3-cffi libxcb"
	short_desc="${short_desc} - Python3"

	pkg_install() {
		vmove "usr/lib/python3*"
	}
}
