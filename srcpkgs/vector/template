# Template file for 'vector'
pkgname=vector
version=0.48.0
revision=1
build_style=cargo
configure_args="--no-default-features --features docs"
hostmakedepends="pkg-config protobuf"
makedepends="openssl-devel libzstd-devel oniguruma-devel"
short_desc="High-performance observability data pipeline"
maintainer="Michael Aldridge <maldridge@voidlinux.org>"
license="MPL-2.0"
homepage="https://vector.dev/"
distfiles="https://github.com/vectordotdev/vector/archive/refs/tags/v${version}.tar.gz"
checksum=a79c2acc69fb556e45b142e29102fc815e52cff1f180492749e61ba00ced6c03
system_accounts="_vector"
make_dirs="/var/lib/vector 0700 _vector _vector
 /etc/vector 0755 root root"

pre_build() {
	vsed -e 's/\bgit\b/false/g' -i build.rs
}

post_install() {
	vsv vector
}
