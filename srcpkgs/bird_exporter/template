# Template file for 'bird_exporter'
pkgname=bird_exporter
version=1.4.4
revision=1
build_style=go
go_import_path="github.com/czerwonk/bird_exporter"
hostmakedepends="$(vopt_if man pandoc)"
depends="bird"
short_desc="Metric exporter for BIRD routing daemon to use with Prometheus"
maintainer="Leah Neukirchen <leah@vuxu.org>"
license="MIT"
homepage="https://github.com/czerwonk/bird_exporter"
distfiles="https://github.com/czerwonk/bird_exporter/archive/v${version}.tar.gz"
checksum=02e4278b31a8c77d9d77dc8cf3d29f6bac1418e3c60e8d18b6b95ac2d007a262

build_options="man"
desc_option_man="Use pandoc for manpages"

case "$XBPS_MACHINE" in
	x86_64*|i686|ppc64le*|ppc64) build_options_default="man" ;;
esac

post_build() {
	if [ "$build_option_man" ]; then
		pandoc -s -t man bird_exporter.1.md -o bird_exporter.1
	fi
}
post_install() {
	if [ "$build_option_man" ]; then
		vman bird_exporter.1
	fi
	vsv bird_exporter
	vlicense LICENSE
}
