# Template file for 'indicator-session'
pkgname=indicator-session
version=17.3.20+21.10.20210613.1
revision=1
build_style=cmake
configure_args="-DCMAKE_INSTALL_PREFIX=/usr -DCMAKE_INSTALL_LIBEXECDIR=lib \
 -Denable_tests=OFF -Denable_lcov=OFF"
hostmakedepends="cmake-extras gtest-devel glib-devel intltool pkg-config
 python"
depends="gnome-settings-daemon"
checkdepends="dbus"
short_desc="Indicator showing session management, status and user switching"
maintainer="Earldridge Jazzed Pineda <earldridgejazzedpineda@gmail.com>"
license="GPL-3.0-only"
homepage="https://launchpad.net/indicator-session"
distfiles="https://launchpad.net/ubuntu/+archive/primary/+files/indicator-session_${version}.orig.tar.gz"
checksum=f9da6a2f080e67944a71eebb744c3d9f5d7d532428e072c4a3a0fbb0b3bb6ae9
make_check=ci-skip # ServiceTest.OnlineAccountError and ServiceTest.User fail

post_install() {
	rm -vf "${DESTDIR}/test-service"

	rm -r "${DESTDIR}/usr/share/locale/"

	vsv indicator-session
}
