# Template file for 'x-unikey'
pkgname=x-unikey
version=1.0.4
revision=1
build_style=gnu-configure
makedepends="libX11-devel"
short_desc="Vietnamese input method for X"
maintainer="Linh Nguyá»…n <linhvng.2212@gmail.com>"
license="GPL-2.0-or-later, MIT"
homepage="https://www.unikey.org"
distfiles="${SOURCEFORGE_SITE}/unikey/${pkgname}-${version}.tar.bz2"
checksum=aa7dd444853538bcba0f24c4c19692c34d4553a1df213a260c2628a7116b2dd9

CFLAGS="-Wno-narrowing"
CXXFLAGS="-Wno-narrowing"

if [ "$XBPS_TARGET_LIBC" = musl ]; then
	broken="built and run, can't type Vietnamese"
fi

post_install() {
	head -30 src/IMdkit/i18nIMProto.c >dec-hp-sun.license
	vlicense dec-hp-sun.license

	vdoc doc/keymap-syntax
	vdoc doc/manual
	vdoc doc/unikey-manual-0.9.pdf
	vsconf doc/options
	vsconf doc/ukmacro
	vsconf doc/unikeyrc
	vcopy doc/im-samples usr/share/examples/$pkgname
	rm -r $DESTDIR/usr/share/examples/$pkgname/im-samples/CVS
}
