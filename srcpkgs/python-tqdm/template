# Template file for 'python-tqdm'
pkgname=python-tqdm
version=4.40.2
revision=2
archs=noarch
wrksrc="tqdm-${version}"
build_style=python-module
hostmakedepends="python-setuptools python3-setuptools"
depends="python"
short_desc="Fast, extensible progress bar for Python and CLI (Python2)"
maintainer="bra1nwave <bra1nwave@protonmail.com>"
license="MPL-2.0, MIT"
homepage="https://tqdm.github.io/"
distfiles="https://github.com/tqdm/tqdm/archive/v${version}.tar.gz"
checksum=c58b2219bbd582c34ddc3f0e1d897d6b184c219e7aa534c4d069696a9473b4fa
alternatives="
 tqdm:tqdm:/usr/bin/tqdm2
 tqdm:tqdm.1:/usr/share/man/man1/tqdm2.1"

post_install() {
	rm -f ${DESTDIR}/${py2_sitelib}/tqdm/tqdm.1
	vman tqdm/tqdm.1 tqdm2.1
	vlicense LICENCE
}

python3-tqdm_package() {
	alternatives="
	 tqdm:tqdm:/usr/bin/tqdm3
	 tqdm:tqdm.1:/usr/share/man/man1/tqdm3.1"
	archs=noarch
	pycompile_module="tqdm"
	depends="python3"
	short_desc="${short_desc/2/3}"
	pkg_install() {
		rm -f ${DESTDIR}/${py3_sitelib}/tqdm/tqdm.1
		vman tqdm/tqdm.1 tqdm3.1
		vmove "usr/lib/python3*"
		vmove usr/bin/tqdm3
		vlicense LICENCE
	}
}
