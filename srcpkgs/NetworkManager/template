# Template file for 'NetworkManager'
pkgname=NetworkManager
version=0.8.1.999
distfiles="${GNOME_SITE}/$pkgname/0.8/$pkgname-$version.tar.bz2"
build_style=gnu_configure
configure_args="--localstatedir=/var --with-distro=gentoo
--with-dhcpcd=/sbin/dhcpcd --with-dhclient=no
--with-system-ca-path=/etc/ssl/certs --enable-more-warnings=no
--with-crypto=nss --disable-static"
short_desc="Network Management daemon"
maintainer="Juan RP <xtraeme@gmail.com>"
checksum=66720b70be66b72bcd6dd0982740abc22218d9c991da77067bdf90aa68b18245
long_desc="
 This packages common libraries for the GNOME desktop."

keep_empty_dirs=yes
openrc_services="NetworkManager default true"
conf_files="/etc/NetworkManager/nm-system-settings.conf"
subpackages="$pkgname-devel"

Add_dependency run glibc
Add_dependency run wireless_tools
Add_dependency run libnl
Add_dependency run polkit
Add_dependency run ppp
Add_dependency run iptables
Add_dependency run libuuid
Add_dependency run nss
Add_dependency run nspr
Add_dependency run dbus-glib
Add_dependency run dbus-libs
Add_dependency run glib
Add_dependency run libgudev
Add_dependency build pkg-config
Add_dependency build libuuid-devel
Add_dependency build nss-devel
Add_dependency build nspr-devel
Add_dependency build dbus-glib-devel
Add_dependency build dbus-devel
Add_dependency build glib-devel
Add_dependency build libgudev-devel
Add_dependency build pkg-config
Add_dependency build intltool
Add_dependency build wireless_tools-devel
Add_dependency build libnl-devel
Add_dependency build polkit-devel
Add_dependency build ppp-devel
Add_dependency build iptables-devel
Add_dependency full iproute2
Add_dependency full dhcpcd
Add_dependency full wpa_supplicant

post_install()
{
	# Fix path to pppd.
	mv ${DESTDIR}/usr/lib/pppd/2.4.4 ${DESTDIR}/usr/lib/pppd/2.4.5
	# Install config file.
	install -d ${DESTDIR}/etc/NetworkManager/dispatcher.d
	install -m644 ${FILESDIR}/*.conf ${DESTDIR}/etc/NetworkManager
}
