# Template file for 'yacy'
pkgname=yacy
version=1.924
revision=1
wrksrc=${pkgname}
hostmakedepends="openjdk apache-ant"
depends="openjdk-jre bash"
short_desc="YaCy p2p decentralized search engine"
maintainer="Jason Manley <jason@jasondavid.tv>"
license="GPL-3.0-or-later"
homepage="https://yacy.net"
distfiles="https://download.yacy.net/yacy_v${version}_20210209_10069.tar.gz"
checksum=@3b484c4db858a51dd191aa1ce30f892f49beadd8cb6434b65837d79a76325526

system_accounts="_yacy"
yacy_homedir="/var/lib/yacy"
yacy_shell="/bin/bash"
make_dirs="/var/lib/yacy 0755 _yacy _yacy"

do_build() {
	export JAVA_HOME=/usr/lib/jvm/java-1.8-openjdk
	ant clean all
}

do_install() {
	vmkdir var/lib/
	vcopy ${wrksrc} var/lib/
}

post_install() {
	vsv yacy
}
