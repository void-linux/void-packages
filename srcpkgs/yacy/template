# Template file for 'yacy'
pkgname=yacy
version=1.940
revision=1
hostmakedepends="apache-ant openjdk21 git"
depends="openjdk21"
short_desc="Distributed Peer-to-Peer Web Search Engine and Intranet Search Appliance"
maintainer="Jason Elswick <jason@jasondavid.us>"
license="GPL-2.0-or-later"
homepage="https://yacy.net"
distfiles="https://github.com/yacy/yacy_search_server/archive/refs/tags/Release_${version}.tar.gz"
checksum=b90fdae376de2365d072b799399d9b6266377029bc9d8092f488d034e3f2bb49
system_accounts="_yacy"
_yacy_homedir="/var/lib/yacy"
make_dirs="/var/lib/yacy 0755 _yacy _yacy"

do_build() {
	export JAVA_HOME="/usr/lib/jvm/openjdk21"
	ant all
}

do_install() {
	vmkdir var/lib/yacy
	vcopy ${wrksrc}/* var/lib/yacy
}

post_install() {
	vsv yacy
}
