# Template file for 'ansible-language-server'
pkgname=ansible-language-server
version=1.0.4
revision=1
hostmakedepends="nodejs"
depends="nodejs ansible python3-ansible-lint"
short_desc="Language server for Ansible"
maintainer="Jan Christian Gr√ºnhage <jan.christian@gruenhage.xyz>"
license="MIT"
homepage="https://github.com/ansible/ansible-language-server"
distfiles="https://github.com/ansible/ansible-language-server/archive/refs/tags/v${version}.tar.gz"
checksum=4855598cbf829ea67d56f5b53a731616cf0766f580ef34900c23c128c9511b8a
python_version=3

do_build() {
	npm install
	npm run compile
	npm pack
}

do_install() {
	npm --global --prefix "${DESTDIR}/usr" install "ansible-ansible-language-server-${version}.tgz"
}

post_install() {
	vlicense LICENSE
}
