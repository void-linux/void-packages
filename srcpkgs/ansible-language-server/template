# Template file for 'ansible-language-server'
pkgname=ansible-language-server
version=0.7.2
revision=1
hostmakedepends="nodejs"
depends="nodejs ansible python3-ansible-lint"
short_desc="Language server for Ansible"
maintainer="Jan Christian Gr√ºnhage <jan.christian@gruenhage.xyz>"
license="MIT"
homepage="https://github.com/ansible/ansible-language-server"
distfiles="https://github.com/ansible/ansible-language-server/archive/refs/tags/v${version}.tar.gz"
checksum=6d8d321384822b499d142fa30250844c7a47d79b64860babd0959e888327b721
python_version=3

do_build() {
	npm install
	npm run compile
	npm pack
}

do_install() {
	npm --global --prefix "${DESTDIR}/usr" install "ansible-ansible-language-server-${version}.tgz"
}

post_install() {
	vlicense LICENSE
}
