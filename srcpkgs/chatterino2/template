# Template file for 'chatterino2'
pkgname=chatterino2
version=2.3.4
revision=1
_WinToast_commit="ce441336ef057576dfb377be754bc5357a04ff85"
_libcommuni_commit="c613600e6a52e6d3166247a05205cf1c755d4868"
_qBreakpad_commit="a4626c12e9ae6f02fc1ca7a4e399bd8307424103"
_serialize_commit="7d37cbfd5ac3bfbe046118e1cec3d32ba4696469"
_settings_commit="7cf8431d644332107a51a46c1e3de70e64692f0c"
_signals_commit="baf5bb04bd13b090e405e0447c89a811f7e23ddc"
_qtkeychain_commit="de954627363b0b4bff9a2616f1a409b7e14d5df9"
_sanitizers_cmake_commit="99e159ec9bc8dd362b08d18436bd40ff0648417b"
build_style=cmake
hostmakedepends="qt5-qmake qt5-host-tools"
makedepends="qt5-tools-devel qt5-multimedia-devel qt5-svg-devel
 boost-devel openssl-devel rapidjson websocketpp"
depends="qt5-imageformats qt5-svg"
short_desc="Chat client for twitch.tv"
maintainer="33KK <g33kk@pm.me>"
license=MIT
homepage="https://chatterino.com"
changelog="https://chatterino.com/changelog"
distfiles="https://github.com/Chatterino/chatterino2/archive/refs/tags/v${version}.tar.gz
 https://github.com/mohabouje/WinToast/archive/${_WinToast_commit}.tar.gz
 https://github.com/Chatterino/libcommuni/archive/${_libcommuni_commit}.tar.gz
 https://github.com/jiakuan/qBreakpad/archive/${_qBreakpad_commit}.tar.gz
 https://github.com/pajlada/serialize/archive/${_serialize_commit}.tar.gz
 https://github.com/pajlada/settings/archive/${_settings_commit}.tar.gz
 https://github.com/pajlada/signals/archive/${_signals_commit}.tar.gz
 https://github.com/Chatterino/qtkeychain/archive/${_qtkeychain_commit}.tar.gz
 https://github.com/arsenm/sanitizers-cmake/archive/${_sanitizers_cmake_commit}.tar.gz"
checksum="27d42138d48d807340fe4194b4cdada6183b0ff2127f24d39032b3ad1f66594c
 992bf522752261eda3167ef85901f41f0dd090ee40edcdf782b56a049715139f
 ba2179eb43638366ca65214137a850a127fb93a36fcc54658649c34e8d6f7dc4
 6b7a725b77deb9be2357ef9bdfed872b48f295aa1bb41ab6aa9e3aa09cc67f84
 d0da2cebd5dfd7b20f7247f1e4fb6b8a866434db49316a067b6c798ec8217c63
 0b35eb297f0949f27b3c54bc66d8b0c9293102fb52838d12371a5fcc80c590e5
 7ffd43dbd05704af5bef64b0eae8c12174013d4c7105472019ef381ff82c0a46
 4fdd7fd8bbae4fd7a505c917facc6e6b838850cd4f016c30fae45535dbaab4b7
 f9cf386638f455c5d2e7a835b95941201387d2531b8682942d59827663b58341"

post_extract() {
	rmdir lib/WinToast lib/libcommuni lib/qBreakpad lib/serialize \
	      lib/settings lib/signals lib/rapidjson lib/websocketpp  \
	      lib/qtkeychain cmake/sanitizers-cmake
	mv "${XBPS_BUILDDIR}/WinToast-${_WinToast_commit}" "lib/WinToast"
	mv "${XBPS_BUILDDIR}/libcommuni-${_libcommuni_commit}" "lib/libcommuni"
	mv "${XBPS_BUILDDIR}/qBreakpad-${_qBreakpad_commit}" "lib/qBreakpad"
	mv "${XBPS_BUILDDIR}/serialize-${_serialize_commit}" "lib/serialize"
	mv "${XBPS_BUILDDIR}/settings-${_settings_commit}" "lib/settings"
	mv "${XBPS_BUILDDIR}/signals-${_signals_commit}" "lib/signals"
	mv "${XBPS_BUILDDIR}/qtkeychain-${_qtkeychain_commit}" "lib/qtkeychain"
	mv "${XBPS_BUILDDIR}/sanitizers-cmake-${_sanitizers_cmake_commit}" "cmake/sanitizers-cmake"
}

post_install() {
	vlicense LICENSE
}
