# Template file for 'melonDS'
pkgname=melonDS
version=1.0
revision=1
build_style=cmake
hostmakedepends="cmake libenet-devel  pkg-config extra-cmake-modules qt6-tools qt6-declarative-tools"
makedepends="qt6-base-devel qt6-multimedia-devel qt6-svg-devel libslirp-devel SDL2-devel libepoxy-devel libarchive-devel"
short_desc="Fast and accurate Nintendo DS emulator"
maintainer="Josh Penny <joshpenny@protonmail.com>"
license="GPL-3.0-or-later"
homepage="https://melonds.org"
distfiles="https://github.com/melonDS-emu/melonDS/archive/refs/tags/1.0.zip"
checksum="698a3a5b166731af275212efcdb821dd66bb01423586ec61a510ee4db1e0fe15"

# Ensure CMake uses Qt6
configure_args="-DCMAKE_PREFIX_PATH=/usr/lib/qt6 -DBUILD_QT_SDL=ON"

# Remove unnecessary headers/libs after install
post_install() {
    rm -rf ${DESTDIR}/usr/include/melonds
    rm -rf ${DESTDIR}/usr/lib/libmelon*
}
