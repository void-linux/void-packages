# Template file for 'python3-poppler-qt5'
pkgname=python3-poppler-qt5
version=0.75.0
revision=1
wrksrc="python-poppler-qt5-${version}"
build_style=python3-module
hostmakedepends="python3-sip-devel pkg-config qt5-devel poppler-qt5-devel
 python3-PyQt5-devel python3-devel"
makedepends="python3-sip-devel pkg-config qt5-devel poppler-qt5-devel
 python3-PyQt5-devel python3-devel"
depends="poppler-qt5 python3-PyQt5"
short_desc="Python bindings for libpoppler-qt5"
maintainer="chili-b <dexter.gaonshatford@gmail.com>"
license="LGPL-3.0-or-later"
homepage="https://github.com/frescobaldi/python-poppler-qt5"
changelog="https://github.com/frescobaldi/python-poppler-qt5/blob/v${version}/ChangeLog"
distfiles="${PYPI_SITE}/p/python-poppler-qt5/python-poppler-qt5-${version}.tar.gz"
checksum=ea0ec9ebe995705ab19a301290365652e62bab5c9b05db5697c7bf2173335107

do_build() {
	# Cludge to fix build under armv7l, armv6l
	if [[ $XBPS_TARGET_MACHINE == arm* ]]; then
		  export CFLAGS="-mtune=generic-armv7-a "
		  export CFLAGS+="-I${XBPS_CROSS_BASE}/${py3_inc}"
	fi

	python setup.py build_ext --pyqt-sip-dir=/${py3_sitelib}/PyQt5/bindings
}
