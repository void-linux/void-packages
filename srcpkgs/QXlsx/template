# Template file for 'QXlsx'
pkgname=QXlsx
version=1.5.0
revision=2
build_style=cmake
configure_args="-DBUILD_SHARED_LIBS=1"
build_wrksrc="QXlsx"
hostmakedepends="qt6-tools-devel"
makedepends="qt6-base-devel qt6-base-private-devel"
short_desc="Excel file(*.xlsx) reader/writer library"
maintainer="Andrew Benson <abenson+void@gmail.com>"
license="MIT"
homepage="https://qtexcel.github.io/QXlsx"
distfiles="https://github.com/QtExcel/QXlsx/archive/v${version}.tar.gz"
checksum=4461bb0fc9b88b6a970520e8b32eb7d2fc391a1a5c326b139a0af836278cdb09

# Required for Qt 6.10.
# This has already been patched in upstream QXlsx, so remove this in the next release.
do_patch() {
	sed -i 's/Core Gui/Core GuiPrivate/g' CMakeLists.txt
}

post_install() {
	vlicense ../LICENSE
}

QXlsx-devel_package() {
	depends="${sourcepkg}>=${version}_${revision}"
	short_desc+=" - development files"
	pkg_install() {
		vmove usr/lib/cmake
		vmove usr/include
		vmove "usr/lib/*.so"
	}
}
