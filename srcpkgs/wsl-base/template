# Template file for 'wsl-base'
pkgname=wsl-base
version=1
revision=1
archs="x86_64* aarch64*"
hostmakedepends="void-artwork ImageMagick"
depends="base-container-full"
short_desc="Base files for integration with Windows Subsystem for Linux"
maintainer="classabbyamp <void@placeviolette.net>"
license="Public Domain"
homepage="https://voidlinux.org"
conf_files="/etc/wsl.conf"

do_build() {
	sed -e "s/%%LIBC%%/${XBPS_TARGET_LIBC}/g" "${FILESDIR}/wsl-distribution.conf" > wsl-distribution.conf
	magick /usr/share/icons/hicolor/{16,32,48,256}x*/apps/void-logo.png voidlinux.ico
}

do_install() {
	vinstall "${FILESDIR}/oobe.sh" 0755 usr/libexec/wsl wsl-setup
	vinstall "${FILESDIR}/wsl.conf" 0644 etc
	vinstall wsl-distribution.conf 0644 etc
	vinstall voidlinux.ico 0644 usr/share/wsl
}
