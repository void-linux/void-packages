# Template file for 'backblaze-b2'
pkgname=backblaze-b2
version=1.4.2
revision=1
archs=noarch
wrksrc="B2_Command_Line_Tool-${version}"
build_style=python2-module
pycompile_module="b2"
hostmakedepends="python-setuptools"
depends="python-setuptools python-logfury python-futures python-Arrow
 python-requests python-six python-tqdm python-b2sdk python-enum34"
short_desc="Command Line Interface for Backblaze's B2 storage service"
maintainer="Andrea Brancaleoni <abc@pompel.me>"
license="MIT"
homepage="https://github.com/Backblaze/B2_Command_Line_Tool"
distfiles="${homepage}/archive/v${version}.tar.gz"
checksum=2d6382b94af59dcaa44dd546252807e0364d1b61f169584829ebbf82458e7078
replaces="python-b2>=0"
provides="python-b2-${version}_${revision}"

post_install() {
	# Remove test directory polluting site-packages
	rm -rf ${DESTDIR}/usr/lib/python*/site-packages/test

	# Avoid conflict with Boost's b2 tool
	mv ${DESTDIR}/usr/bin/b2  ${DESTDIR}/usr/bin/backblaze-b2

	vlicense LICENSE
}

python-b2_package() {
	depends="backblaze-b2>=${version}_${revision}"
	build_style=meta
	archs=noarch
	short_desc+=" - transitional package"
}
