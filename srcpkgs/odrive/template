# Template file for 'odrive'
pkgname=odrive
version=0.2.0
revision=1
only_for_archs="x86_64"
makedepends=nodejs
depends="GConf"
short_desc="Google Drive GUI for linux"
maintainer="Jaredy <jaredycalves@gmail.com>"
license="GPL-3.0-or-later"
homepage="https://github.com/liberodark/ODrive"
distfiles="https://github.com/liberodark/ODrive/archive/${version}.tar.gz"
checksum=5e239502937711d6609eacccdcc332a2f0c8d92412d7461439ce00bf180dfaf2
nopie=yes

do_extract() {
	tar -xvf ${XBPS_SRCDISTDIR}/${pkgname}-${version}/${version}.tar.gz --strip 1
}

do_build() {
	cd ${wrksrc}
	npm install
	npm run release-linux dir
}

do_install() {
	vmkdir ${destdir}/opt/ODrive
	vmkdir ${destdir}/usr/share/applications

	vcopy ${wrksrc}/dist/linux-unpacked/* ${destdir}/opt/ODrive
	vcopy ${FILESDIR}/odrive.desktop ${destdir}/usr/share/applications
	vcopy ${FILESDIR}/icons ${destdir}/usr/share
}
