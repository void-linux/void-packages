# Template file for 'kaccounts-providers'
pkgname=kaccounts-providers
version=25.08.3
revision=1
build_style=cmake
configure_args="-DKDE_INSTALL_QMLDIR=lib/qt6/qml
 -DKDE_INSTALL_QTPLUGINDIR=lib/qt6/plugins"
hostmakedepends="extra-cmake-modules qt6-tools gettext
 kf6-kconfig
 kf6-kpackage pkg-config kf6-kcoreaddons libaccounts-qt6-devel signond-devel"
makedepends="qt6-base-devel qt6-declarative-devel
 kf6-kio-devel
 kf6-kparts-devel kf6-kpackage-devel kf6-kaccounts-integration-devel
 qcoro-qt6-devel kf6-ki18n-devel kf6-kpackage-devel
 glib-devel libaccounts-qt6-devel signond-devel"
short_desc="KDE Accounts Providers"
maintainer="Piotr WÃ³jcik <chocimier@tlen.pl>"
license="GPL-2.0-or-later"
homepage="https://invent.kde.org/network/kaccounts-providers"
changelog="https://kde.org/announcements/changelogs/gear/${version}/#kaccounts-providers"
distfiles="${KDE_SITE}/release-service/${version}/src/kaccounts-providers-${version}.tar.xz"
checksum=122a4ef21b596aef75fa2bb41ccd97c7332dfcd6234a2602aee6c13c5845106f

build_options="nextcloud"
desc_option_nextcloud="Build nextcloud support (needs Qt6 WebEngine)"

if [ "$XBPS_TARGET_ENDIAN" = "le" ] &&
	 [ "$XBPS_WORDSIZE" != 32 ] &&
	 [ "$XBPS_WORDSIZE" = "$XBPS_TARGET_WORDSIZE" ]; then
	build_options_default+=" nextcloud"
fi

if [ "$build_option_nextcloud" ]; then
	makedepends+=" qt6-webchannel-devel qt6-webengine-devel"
fi
