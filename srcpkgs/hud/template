# Template file for 'hud'
pkgname=hud
version=14.10+17.10.20170619
revision=1
_ubuntu_rel=0ubuntu6
#archs="i686 x86_64"
#build_wrksrc=
build_style=cmake
configure_args="-DCMAKE_INSTALL_PREFIX=/usr -DCMAKE_INSTALL_LIBDIR=/usr/lib \
 -DCMAKE_INSTALL_LIBEXECDIR=/usr/lib -DENABLE_DOCUMENTATION=ON \
 -DENABLE_TESTS=OFF -DENABLE_VOICE_TESTS=OFF -DENABLE_SCALABILITY_TESTS=OFF \
 -DFULL_WARNINGS=ON"
#make_build_args=""
#make_install_args=""
#conf_files=""
#make_dirs="/var/log/dir 0755 root root"
hostmakedepends="cmake-extras glib-devel gobject-introspection gtk-doc intltool
 pkg-config python-setuptools qt5 qt5-plugin-mysql qt5-plugin-odbc
 qt5-plugin-pgsql qt5-plugin-sqlite qt5-plugin-tds vala wget"
makedepends="dee-qt-devel gsettings-qt-devel gtk+3-devel libcolumbus-devel
 libdbusmenu-glib-devel libdbusmenu-qt5-devel pango-devel"
depends="bamf libdbusmenu-gtk3 sqlite"
short_desc="Backend for the Unity HUD"
maintainer="Earldridge Jazzed Pineda <earldridgejazzedpineda@gmail.com>"
license="GPL-3.0-only"
homepage="https://launchpad.net/hud"
#changelog=""
distfiles="https://launchpad.net/ubuntu/+archive/primary/+files/hud_${version}.orig.tar.gz"
checksum=3cb825f0f98dae4dc26ef90a1cadab80c4c7bdf45f3cb7082437ba12e2ca2aa6

do_patch() {
	wget https://launchpad.net/ubuntu/+archive/primary/+files/hud_${version}-${_ubuntu_rel}.diff.gz
	gunzip hud_${version}-${_ubuntu_rel}.diff.gz
	patch -p1 -i hud_${version}-${_ubuntu_rel}.diff
}

pre_configure() {
	export CXXFLAGS+=" -lc"
}

post_install() {
	vsv hud
	vsv window-stack-bridge
}

hud-devel_package() {
	short_desc+=" - development files"
	depends="${sourcepkg}>=${version}_${revision} libglib-devel"
	pkg_install() {
		vmove usr/include
		vmove "usr/lib/*.so"
		vmove usr/lib/pkgconfig
		vmove usr/share/gir-1.0
		vmove usr/share/vala
	}
}
