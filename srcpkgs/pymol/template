# Template for 'pymol'
pkgname=pymol
version=2.2.0
revision=1
_commit=4190
wrksrc="${pkgname}-code-r${_commit}-trunk-${pkgname}"
build_style="python3-module"
makedepends="msgpack-devel python3-numpy freetype-devel libfreeglut-devel glew-devel python3-devel libxml2-devel python3-PyQt5 unzip"
depends="python3-numpy tcsh python3-pmw python3-tkinter python3-PyQt5"
short_desc="PyMOL molecular visualization system"
homepage="https://${pkgname}.org/"
maintainer="Brenton Horne <brentonhorne77@gmail.com>"
license="${pkgname}"
distfiles="https://sourceforge.net/code-snapshots/svn/p/py/${pkgname}/code/${pkgname}-code-r4190-trunk-${pkgname}.zip
https://c.fsdn.com/allura/p/${pkgname}/icon>${pkgname}.png"
skip_extraction="${pkgname}.png"
checksum="beee2faa0d4e86a7b9399aa205e9a6dd877b564717fed6654bfc39a56cfc26d5
 0ea81faaf336becc669a193777d0dca55475d303d1236b57df25cf67ff7c2bcd"

case $XBPS_TARGET_MACHINE in
	*-musl) broken="segfaults on start";;
esac

post_install() {
	vlicense LICENSE
	vinstall "${FILESDIR}/${pkgname}.desktop" 755 usr/share/applications
	vinstall "${XBPS_SRCDISTDIR}/${pkgname}-${version}/${pkgname}.png" 644 usr/share/pixmaps
}
