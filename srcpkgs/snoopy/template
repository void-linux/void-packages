# Template file for 'snoopy'
pkgname=snoopy
version=2.4.14
revision=1
build_style=gnu-configure
hostmakedepends="socat"
checkdepends="procps-ng"
conf_files="/etc/snoopy.ini"
short_desc="Log every executed command to syslog"
maintainer="Orphaned <orphan@voidlinux.org>"
license="GPL-2.0-or-later"
homepage="https://github.com/a2o/snoopy"
distfiles="https://github.com/a2o/snoopy/releases/download/snoopy-${version}/snoopy-${version}.tar.gz"
checksum=6f305f49d87d56906061ded9083dc0308365f966a13edacc3eb59191221ced1a

post_patch() {
	find . -type f -name Makefile.in -exec sed -i 's| -Werror||' {} +
}

# some tests are degenerate and blindly source os-release prior to running
post_build() {
	[ -f /etc/os-release ] || echo 'ID="void"' > /etc/os-release
}

post_install() {
	vconf etc/snoopy.ini
}
