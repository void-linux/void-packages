# Template file for 'python3-cmsis-pack-manager'
pkgname=python3-cmsis-pack-manager
version=0.5.3
revision=1
archs="x86_64* i686*"
build_style=python3-pep517
build_helper="rust"
hostmakedepends="python3-wheel maturin cargo"
makedepends="python3-cffi"
depends="python3-appdirs python3-yaml python3-cffi"
short_desc="Python manager for CMSIS-Pack index and cache with fast Rust backend"
maintainer="Mateusz Sylwestrzak <slymattz@gmail.com>"
license="Apache-2.0"
homepage="https://github.com/pyocd/cmsis-pack-manager"
distfiles="https://github.com/pyocd/cmsis-pack-manager/archive/refs/tags/v${version}.tar.gz" # pypi version won't pull rust crates
checksum=77230b0d39248aaa059c6e2f35cc8beb4f62fd821d1bf495a7e23443feac5071

pre_build() {
	cargo update # https://github.com/rust-lang/rust/issues/127343
}
