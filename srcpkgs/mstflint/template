# Template file for 'mstflint'
pkgname=mstflint
version=4.13.3r2
revision=1
_version=${version/r/-}
wrksrc=mstflint-${version%r*}
build_style=gnu-configure
configure_args="--enable-cs --enable-fw-mgr --enable-xml2"
makedepends="boost-devel libcurl-devel libibmad-devel liblzma-devel libxml2-devel zlib-devel"
short_desc="Open source version of Mellanox Firmware Tools"
maintainer="Rich Gannon <rich@richgannon.net>"
license="GPL-2.0-or-later"
homepage="https://github.com/Mellanox/mstflint"
distfiles="https://github.com/Mellanox/mstflint/releases/download/v${_version}/${pkgname}-${_version}.tar.gz"
checksum=3abc918311fc07e4add7564879bd4a8def8ccfed40962f31682c75f2ee8a58d1

CFLAGS="-Du_int8_t=uint8_t -Du_int16_t=uint16_t -Du_int32_t=uint32_t -Du_int64_t=uint64_t"

mstflint-devel_package() {
	depends="${pkgname}-${version}_${revision}"
	short_desc+=" - development files"
	pkg_install() {
		vmove usr/include
		vmove "usr/lib/*.a"
	}
}
