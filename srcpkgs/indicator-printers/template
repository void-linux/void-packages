# Template file for 'indicator-printers'
pkgname=indicator-printers
version=0.1.7+17.10.20171101
revision=1
_ubuntu_rel=0ubuntu7
build_style=gnu-configure
configure_args="--prefix=/usr --libexecdir=/usr/lib --disable-static"
hostmakedepends="automake gettext-devel intltool libtool pkg-config python
 wget"
makedepends="cups-devel libayatana-indicator-devel libdbusmenu-glib-devel
 libdbusmenu-gtk3-devel"
depends="cups"
short_desc="Indicator showing active print jobs"
maintainer="Earldridge Jazzed Pineda <earldridgejazzedpineda@gmail.com>"
license="GPL-3.0-only"
homepage="https://launchpad.net/indicator-printers"
distfiles="https://launchpad.net/ubuntu/+archive/primary/+files/indicator-printers_${version}.orig.tar.gz"
checksum=9fd274dac99caf1caeb90950565c3d845bcd2577b7fa5c9d199939435d8b4be9

do_patch() {
	wget  https://launchpad.net/ubuntu/+archive/primary/+files/indicator-printers_${version}-${_ubuntu_rel}.diff.gz
	gunzip indicator-printers_${version}-${_ubuntu_rel}.diff.gz
	patch -p1 -i indicator-printers_${version}-${_ubuntu_rel}.diff
}

post_patch() {
	sed -i '/SERVICE_LIBS/ i SERVICE_LIBS+=" "' configure.ac
}

pre_configure() {
	NOCONFIGURE=1 autoreconf -i
}

post_install() {
	vmkdir usr/share/icons 755
	cp -r debian/local/* "${DESTDIR}"/usr/share/icons/
}
