# Template file for 'gtk4-layer-shell'
pkgname=gtk4-layer-shell
version=1.3.0
revision=1
build_style=meson
build_helper="gir"
hostmakedepends="gobject-introspection pkg-config python3-setuptools"
makedepends="gtk4-devel vala-devel wayland-devel wayland-protocols"
checkdepends="dejavu-fonts-ttf"
short_desc="Library to create panels and other desktop components for Wayland (GTK4)"
maintainer="Xavier Fortier <xavier.fortier@proton.me>"
license="MIT"
homepage="https://github.com/wmww/gtk4-layer-shell"
changelog="https://raw.githubusercontent.com/wmww/gtk4-layer-shell/main/CHANGELOG.md"
distfiles="https://github.com/wmww/gtk4-layer-shell/archive/v${version}.tar.gz"
checksum=1ebb01ab14e98afd1727f68f64981c37bd23305b1f131f5667c02b94cf593192

if [ "$XBPS_CHECK_PKGS" ]; then
	configure_args+=" -Dexamples=true -Dtests=true -Dsmoke-tests=false"
fi

if [ "$CROSS_BUILD" ]; then
	hostmakedepends+=" vala wayland-devel"
fi

post_install() {
	vlicense LICENSE
}

gtk4-layer-shell-devel_package() {
	depends="${sourcepkg}>=${version}_${revision} ${makedepends}"
	short_desc+=" - development files"
	pkg_install() {
		vmove usr/include
		vmove usr/lib/girepository-1.0
		vmove usr/lib/pkgconfig
		vmove "usr/lib/*.so"
		vmove usr/share/gir-1.0
		vmove usr/share/vala
	}
}
