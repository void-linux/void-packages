# Template file for 'civetweb'
pkgname=civetweb
version=1.15
revision=1
build_style=gnu-makefile
make_install_target="install install-headers install-lib install-slib"
make_use_env=yes
makedepends="openssl-devel"
short_desc="Embedded C/C++ web server"
maintainer="bingulo <gcarlos@disroot.org>"
license="MIT"
homepage="https://civetweb.github.io/civetweb/"
distfiles="https://github.com/civetweb/civetweb/archive/refs/tags/v${version}.tar.gz"
checksum=90a533422944ab327a4fbb9969f0845d0dba05354f9cacce3a5005fa59f593b9

pre_install() {
	vmkdir usr/include
}

post_install() {
	vlicense LICENSE.md
}

libcivetweb_package() {
	short_desc+=' - library'
	pkg_install() {
		vmove "usr/lib/*.so.*"
	}
}

libcivetweb-devel_package() {
	depends="lib${sourcepkg}>=${version}_${revision}"
	short_desc+=' - development files'
	pkg_install() {
		vmove usr/include
		vmove "usr/lib/*.a"
		vmove "usr/lib/*.so"
	}
}
