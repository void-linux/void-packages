# Template file for 'rset'
pkgname=rset
version=3.3
revision=1
build_style=gnu-makefile
make_build_args="-f Makefile.linux"
make_install_args="${make_build_args}"
depends="curl"
checkdepends="ruby ruby-webrick ${depends}"
short_desc="Remote Staging Execution Tool"
maintainer="Leah Neukirchen <leah@vuxu.org>"
license="ISC"
homepage="https://scriptedconfiguration.org/"
changelog="https://github.com/eradman/rset/blob/master/NEWS"
distfiles="https://scriptedconfiguration.org/code/rset-${version}.tar.gz"
checksum=6d3eee35ce7db34ac15733f91ccfda7cbac14994e4dc8e1f9e4b7266bcc60e4a

if [ "$XBPS_TARGET_LIBC" = "musl" ]; then
	make_build_args="-f Makefile.linux-compat"
fi

post_install() {
	vlicense LICENSE
}

do_check() {
	make -C tests -f Makefile.linux LD=${CC}
}
