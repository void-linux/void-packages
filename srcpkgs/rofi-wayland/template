# Template file for 'rofi-wayland'
pkgname=rofi-wayland
version=1.7.9
revision=1
build_style=meson
configure_args="$(vopt_feature x11 xcb)"
hostmakedepends="flex glib-devel pkg-config"
makedepends="librsvg-devel libxkbcommon-devel pango-devel wayland-devel
 wayland-protocols $(vopt_if x11 libXinerama-devel)
 $(vopt_if x11 startup-notification-devel) $(vopt_if x11 xcb-util-keysyms-devel)
 $(vopt_if x11 xcb-util-wm-devel) $(vopt_if x11 xcb-util-xrm-devel)
 $(vopt_if x11 xcb-util-cursor-devel)"
checkdepends="check-devel"
short_desc="Wayland fork of rofi"
maintainer="Sebastian Ornig <seb@sornig.eu>"
license="MIT"
homepage="https://github.com/lbonn/rofi"
changelog="https://github.com/lbonn/rofi/releases"
distfiles="https://github.com/lbonn/rofi/releases/download/${version}+wayland1/rofi-${version}+wayland1.tar.xz"
checksum=edeb12479e759de6a1734f62237605d79baef43d610d5af687b337e98756b74e
conflicts="rofi>=0"
provides="rofi-${version}_1"
replaces="rofi>=0"

# Package build options
build_options="x11"
desc_option_png="Enable support for X11/xcb"

if [ "$XBPS_CHECK_PKGS" ]; then
	configure_args+=" -Dcheck=enabled"
else
	configure_args+=" -Dcheck=disabled"
fi

post_install() {
	vlicense COPYING
}

rofi-wayland-devel_package() {
	short_desc+=" - development files"
	depends="libglib-devel cairo-devel pango-devel"
	conflicts="rofi-devel>=0"
	provides="rofi-devel-${version}_1"
	replaces="rofi-devel>=0"
	pkg_install() {
		vmove usr/include
		vmove usr/lib/pkgconfig
	}
}
