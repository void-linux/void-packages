# Template file for 'mariadb-connector-c'
pkgname=mariadb-connector-c
version=3.1.4
revision=1
build_style=cmake
build_helper="qemu"
makedepends="libressl-devel"
short_desc="Connects applications developed in C/C++ to MariaDB/MySQL databases"
maintainer="Hans-J. Schmid <knock@myopendoor.de>"
license="LGPL-2.1-only"
homepage="https://mariadb.org/"
distfiles="https://github.com/MariaDB/mariadb-connector-c/archive/v${version}.tar.gz"
checksum=73ef01817c300af99e2bc48b5fd60a9f273855d8e8e03549f01f40451ff440ee

pre_configure() {
	case "$XBPS_TARGET_MACHINE" in
		*-musl)	vsed -i -e "/CHECK_INCLUDE_FILES (ucontext.h HAVE_UCONTEXT_H)/d" \
			cmake/CheckIncludeFiles.cmake
	esac
}

mariadb-connector-c-devel_package() {
	depends="${sourcepkg}>=${version}_${revision}"
	short_desc+=" - development files"
	pkg_install() {
		vmove usr/bin
		vmove usr/include
		vmove usr/lib/mariadb/*.so
		vmove usr/lib/mariadb/*.a
		vmove usr/lib/pkgconfig
	}
}
