# Template file for 'mariadb-connector-c'
pkgname=mariadb-connector-c
version=3.4.7
revision=1
build_style=cmake
configure_args="-DMARIADB_PORT=3306 -DMARIADB_UNIX_ADDR=/run/mysqld/mysqld.sock
 -DWITH_EXTERNAL_ZLIB=YES -DWITH_MYSQLCOMPAT=ON -DWITH_SSL=OPENSSL"
makedepends="openssl-devel zlib-devel"
short_desc="MariaDB Native Client library (C driver)"
maintainer="Komeil Parseh <komeilparseh@disroot.org>"
license="LGPL-2.1-or-later"
homepage="https://github.com/mariadb-corporation/mariadb-connector-c"
changelog="https://mariadb.com/docs/release-notes/connectors/c/${version%.*}/${version}"
distfiles="https://github.com/mariadb-corporation/mariadb-connector-c/archive/refs/tags/v${version}.tar.gz"
checksum=cf81cd1c71c3199da9d2125aee840cb6083d43e1ea4c60c4be5045bfc7824eba


post_install() {
	mkdir -p ${DESTDIR}/usr/share
	mv ${DESTDIR}/usr/man ${DESTDIR}/usr/share/man
}


mariadb-connector-c-devel_package() {
	depends="${sourcepkg}>=${version}_${revision}"
	short_desc+=" - development files"
	pkg_install() {
		vmove usr/share/man/man3
		vmove usr/include
		vmove usr/lib/pkgconfig
		vmove "usr/lib/mariadb/*.so"
	}
}
