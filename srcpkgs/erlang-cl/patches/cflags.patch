diff --git a/c_src/Makefile b/c_src/Makefile
index 224fd5f..379fa98 100644
--- a/c_src/Makefile
+++ b/c_src/Makefile
@@ -52,11 +52,17 @@ ifeq ($(OSNAME)$(WSLcross), Linux)
 LINUX = Yes
 CFLAGS += -I/usr/include/nvidia-current
 CFLAGS += -I/opt/AMDAPP/include
-ifeq ($(WORDSIZE), 32)
-CFLAGS += -O3 -fPIC -m32
+CFLAGS += -O3 -fPIC
+ifeq (x86_64, $(findstring x86_64,$(XBPS_TARGET_MACHINE)))
+CFLAGS += -m64
+else
+ifeq (i386, $(findstring i386,$(XBPS_TARGET_MACHINE)))
+CFLAGS += -m32
+else
+ifeq (i686, $(findstring i686,$(XBPS_TARGET_MACHINE)))
+CFLAGS += -m32
+endif
 endif
-ifeq ($(WORDSIZE), 64)
-CFLAGS += -O3 -fPIC -m64
 endif
 LD_SHARED	:= $(CC) -shared
 LDFLAGS	        += -lOpenCL
