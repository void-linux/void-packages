# Template file for 'erlang-cl'
pkgname=erlang-cl
version=1.2.4
revision=1
hostmakedepends="git rebar3"
makedepends="ocl-icd-devel"
depends="erlang"
short_desc="Erlang OpenCL bindings"
maintainer="Mihail Ivanchev <contact@ivanchev.net>"
license="MIT"
homepage="https://github.com/tonyrog/cl"
distfiles="https://github.com/tonyrog/cl/archive/refs/tags/cl-${version}.tar.gz"
checksum=577b8788029148f93217d00a1bbdc500db68ee77b2246bbd892269b5bb98c41a

do_build() {
	rebar3 compile
}

do_install() {
	vmkdir usr/lib/erlang/lib/cl-${version}
	vmkdir usr/lib/erlang/lib/cl-${version}/ebin
	vmkdir usr/lib/erlang/lib/cl-${version}/include
	vmkdir usr/lib/erlang/lib/cl-${version}/priv
	vmkdir usr/share/doc/${pkgname}
	vmkdir usr/share/doc/${pkgname}/examples
	vcopy ebin/* usr/lib/erlang/lib/cl-${version}/ebin
	vinstall include/cl.hrl 644 usr/lib/erlang/lib/cl-${version}/include
	vinstall priv/cl_nif.so 644 usr/lib/erlang/lib/cl-${version}/priv
	vcopy examples/* usr/share/doc/${pkgname}/examples
	vlicense COPYRIGHT
}
