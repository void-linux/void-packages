From bbf416fe5225166ba4f555f2920b86e2c7e4d724 Mon Sep 17 00:00:00 2001
From: =?UTF-8?q?Jan=20Christian=20Gr=C3=BCnhage?=
 <jan.christian@gruenhage.xyz>
Date: Tue, 10 May 2022 18:05:54 +0200
Subject: [PATCH] fix cross compiling

---
 cargo_build.py | 4 ++++
 1 file changed, 4 insertions(+)

diff --git a/cargo_build.py b/cargo_build.py
index 0c7c5c6..6a71c3d 100644
--- a/cargo_build.py
+++ b/cargo_build.py
@@ -9,6 +9,7 @@ from pathlib import Path
 import shlex
 import subprocess
 import sys
+import os
 
 source_dir = Path(__file__).absolute().parent
 
@@ -18,6 +19,9 @@ binary_dir = "debug"
 if '--release' in args:
     binary_dir = "release"
 
+if 'CROSS_BUILD' in os.environ:
+    binary_dir = os.environ['RUST_TARGET'] + "/" + binary_dir
+
 # The file produced by Cargo will have a special name
 try:
     i = args.index('--rename')
-- 
2.35.3

