# Template file for 'squeekboard'
pkgname=squeekboard
version=1.9.3
revision=1
wrksrc=${pkgname}-v${version}
build_style=meson
build_helper=rust
hostmakedepends="glib-devel gettext pkg-config cargo wayland-devel"
makedepends="rust gtk+3-devel gnome-desktop-devel libfeedback-devel"
depends="feedbackd"
short_desc="Final Librem5 keyboard"
maintainer="Julio Galvan <julio-void@epazote.net>"
license="GPL-3.0-or-later"
homepage="https://source.puri.sm/Librem5/squeekboard"
distfiles="${homepage}/-/archive/v${version}/${pkgname}-v${version}.tar.gz"
checksum=b99e56faace3986bf752e08c104cea60ed896d514284840655033dd9457db824

pre_configure() {
	if [ "$CROSS_BUILD" ]; then
		vsed -i cargo_build.sh -e "s/-a ./-a ${XBPS_CROSS_RUST_TARGET}/g"
	fi
}

post_install() {
	chmod +x ${DESTDIR}/usr/bin/squeekboard-entry
}
