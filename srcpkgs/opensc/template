# Template file for 'opensc'

pkgname=opensc
version=0.13.0
revision=1
build_style=gnu-configure
maintainer="Carlo Dormeletti <carlo.dormeletti@email.it>"
homepage="https://github.com/OpenSC/OpenSC/wiki"
license="LGPL-2.1"
short_desc="OpenSC â€“ tools and libraries for smart cards"
hostmakedepends="pkg-config"
makedepends="readline-devel pcsclite-devel openssl-devel libltdl-devel
 zlib-devel docbook-xsl libxslt-devel"
depends="libpcsclite "
configure_args="--enable-man  --enable-doc --with-xsl-stylesheetsdir=${XBPS_CROSS_BASE}/usr/share/xsl/docbook"
distfiles="${SOURCEFORGE_SITE}/${pkgname}/${pkgname}-${version}.tar.gz"
checksum="abde46ae53b12b3273e40c532ffd4f7d423a51e0919a5234761453c17c089b14"
conf_files="/etc/opensc.conf"

opensc-pkcs11_package() {
    short_desc+=" - pkcs11 library"
    depends="libopensc>=${version}"	
    pkg_install() {
        vmove "usr/lib/pkcs11/*"
        vmove "usr/lib/opensc-pkcs11*"
        vmove "usr/lib/pkcs11-spy.so"
    }
}

libopensc_package() {
    short_desc+=" - library files"
    pkg_install() {
        vmove "usr/lib/libopensc.so*"
    }
}

post_install(){
    rm ${DESTDIR}/usr/lib/libopensc.a
}
# vim: set ts=4 sw=4 sts=4 et:
