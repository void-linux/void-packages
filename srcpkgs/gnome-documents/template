# Template file for 'gnome-documents'
pkgname=gnome-documents
version=3.28.2
revision=1
build_style=meson
hostmakedepends="docbook-xsl intltool itstool pkg-config
 $(vopt_if gir 'gobject-introspection')"
makedepends="clutter-gtk-devel evince-devel gjs-devel gnome-desktop-devel
 libgdata-devel libgepub-devel librsvg-devel libzapojit-devel tracker-devel
 vala-devel webkit2gtk-devel"
depends="desktop-file-utils hicolor-icon-theme libgepub tracker tracker-miners"
short_desc="Documents Manager for GNOME"
maintainer="Enno Boland <gottox@voidlinux.eu>"
license="GPL-2.0-or-later"
homepage="https://wiki.gnome.org/Apps/Documents"
distfiles="${GNOME_SITE}/${pkgname}/${version%.*}/${pkgname}-${version}.tar.xz"
checksum=58f2ee1cf0967848e6e1dd37d4b6bcb6bc17b14379922aad344fbe34b0b55629
lib32disabled=yes

build_options="gir"
if [ -z "$CROSS_BUILD" ]; then
	build_options_default+=" gir"
fi

CFLAGS="-I${XBPS_CROSS_BASE}/usr/include/libgepub-0.6/"
LDFLAGS="-lgepub-0.6"
pre_configure() {
	sed '/libgepub-0.6/d' -i meson.build;
}
