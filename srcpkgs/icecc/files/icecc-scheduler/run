#!/bin/sh
exec 2>&1


SCHEDULER=/usr/sbin/icecc-scheduler
CONFIGFILE=/etc/icecc/icecc.conf

# Read configuration files
[ -r $CONFIGFILE ] && . $CONFIGFILE

test -x $SCHEDULER || exit 0


netname=
if test -n "$ICECC_NETNAME"; then
	netname="-n $ICECC_NETNAME"
fi

if test -z "$ICECC_SCHEDULER_LOG_FILE"; then
	ICECC_SCHEDULER_LOG_FILE="/var/log/icecc_scheduler"
fi

logfile="-l $ICECC_SCHEDULER_LOG_FILE"
: > $ICECC_SCHEDULER_LOG_FILE
chown _icecc $ICECC_SCHEDULER_LOG_FILE
exec $SCHEDULER -u _icecc -d $logfile $netname 2>&1

