diff --git a/slcp.c b/slcp.c
index 7f12b08..e93c1fd 100644
--- slcp.c
+++ slcp.c
@@ -106,7 +106,7 @@ int main(int argc, char* argv[])
 	{
 		git_repo = NULL;
 	}
-	git_buf_free(&tmpgitdb);
+	git_buf_dispose(&tmpgitdb);
 
 	/* prepare some git information */
 	if(git_repo) {

