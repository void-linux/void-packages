# Template file for 'switcheroo-control'
pkgname=switcheroo-control
version=3.0
revision=1
build_style=meson
configure_args="-Dsystemdsystemunitdir=/usr/lib/systemd/system/"
hostmakedepends="pkg-config glib-devel"
makedepends="libglib-devel libgudev-devel libdrm-devel"
depends="python3-gobject"
checkdepends="python3-dbusmock umockdev-devel"
short_desc="D-Bus service to check the availability of dual-GPU"
maintainer="oreo639 <oreo6391@gmail.com>"
license="GPL-3.0-or-later"
homepage="https://gitlab.freedesktop.org/hadess/switcheroo-control"
changelog="https://gitlab.freedesktop.org/hadess/switcheroo-control/-/raw/master/NEWS"
distfiles="https://gitlab.freedesktop.org/hadess/switcheroo-control/-/archive/${version}/power-profiles-daemon-${version}.tar.gz"
checksum=f58ab3d265c6ed3abeea6113d850fbc6ffb07216d20a2f342e2a91675b01ac05

if [ "$XBPS_CHECK_PKGS" ]; then
	configure_args+=" -Dtests=true"
fi

post_install() {
	vsv switcheroo-control
}
