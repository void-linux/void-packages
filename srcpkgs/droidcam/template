# Template file for 'droidcam'
pkgname=droidcam
version=2.1.3
revision=1
build_style=gnu-makefile
make_build_args="USBMUXD=-lusbmuxd-2.0 JPEG=-lturbojpeg"
hostmakedepends="pkg-config"
makedepends="pkg-config libjpeg-turbo-devel ffmpeg-devel alsa-lib-devel
 speex-devel libusbmuxd-devel libplist-devel gtk+3-devel
 libayatana-appindicator-devel"
depends="v4l2loopback"
short_desc="Tool for using your android device as a wireless/usb webcam"
maintainer="Glenn Phillips <GPhillips@ZeroTrustZeroTouch.com>"
license="GPL-2.0-or-later"
homepage="https://www.dev47apps.com/"
distfiles="https://github.com/dev47apps/droidcam/archive/v${version}.tar.gz"
checksum=0eb46c1ef19bce817b78740600d5451d14f7b279ebfd4605993d81f96aad08db

post_patch() {
	vsed -e "s/^Icon=.*/Icon=droidcam-icon.png/" -e "s,/local,," -i droidcam.desktop
}

do_install() {
	vbin droidcam
	vbin droidcam-cli
	vinstall icon2.png 644 usr/share/pixmaps droidcam-icon.png
	vinstall droidcam.desktop 644 usr/share/applications
	vdoc README.md
}
