# Template file for 'socklog'
pkgname=socklog
version=2.1.2
revision=1
build_wrksrc="${pkgname}-${version}"
short_desc="Small and secure syslogd replacement for use with runit"
maintainer="Leah Neukirchen <leah@vuxu.org>"
license="BSD-3-Clause"
homepage="http://smarden.org/socklog/"
distfiles="http://smarden.org/socklog/socklog-${version}.tar.gz"
checksum=7bc7a3f9e8e15a7e791281c05741a4c0cf0de86e74870fd2c6f4d7e7942b95e6

build_options="static"

do_build() {
	if [ "$build_option_static" ]; then
		LDFLAGS+=" -static"
	fi
	echo "$CC -D_GNU_SOURCE $CFLAGS" >src/conf-cc
	echo "$CC $LDFLAGS -Wl,-z -Wl,noexecstack" >src/conf-ld
	package/compile
}

do_install() {
	for bin in command/*; do
		vbin $bin
	done
	for man in man/*; do
		vman $man
	done
	for doc in doc/*.html; do
		vdoc $doc
	done
	vlicense package/COPYING
}
