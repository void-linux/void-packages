# Template file for 'jellyfin-media-player'
pkgname=jellyfin-media-player
version=1.7.0
revision=1
_jwc_version=10.8.0
create_wrksrc=yes
build_wrksrc="${pkgname}-${version}"
build_style=cmake
configure_args="-DQTROOT='${XBPS_CROSS_BASE}/usr' -DCMAKE_BUILD_TYPE='Release'"
hostmakedepends="pkg-config python3 qt5-qmake qt5-host-tools"
makedepends="qt5-devel qt5-webchannel-devel qt5-declarative-devel qt5-webengine-devel
 qt5-location-devel qt5-x11extras-devel SDL2-devel mpv-devel libcec-devel zlib-devel"
depends="qt5-quickcontrols"
short_desc="Desktop media client for Jellyfin"
maintainer="Foxlet <foxlet@furcode.co>"
license="GPL-2.0-only"
homepage="https://github.com/jellyfin/jellyfin-media-player"
distfiles="https://github.com/jellyfin/jellyfin-media-player/archive/refs/tags/v${version}.tar.gz>${pkgname}-${version}.tar.gz
 https://github.com/iwalton3/jellyfin-web-jmp/releases/download/jwc-${_jwc_version}/dist.zip"
checksum="08cbe5ca660a1c14d05f71404dcca9c893a0a2aa4b31d5b69e04b203f577bbd4
 3fb94bd9ae827a3391c4d89efea9ada1e646d279b265b2e3abc9787560c954b5"

post_extract() {
	cd "${pkgname}-${version}"
	mkdir -p build
	cd build
	cp -r "../../dist" .
}
