# Template file for 'audacity'
pkgname=audacity
version=3.3.3
revision=1
#build_style=gnu-configure
build_style=cmake
#configure_args="--with-ffmpeg=system --with-libsndfile=system --with-expat=system
# --with-libsoxr=system --with-lame=system --with-lv2=system ac_cv_path_WX_CONFIG=wx-config-gtk3"
#hostmakedepends="pkg-config cmake gettext libtool m4 which"
hostmakedepends="cmake python3-pip libtool git python3-pip"
#makedepends="jack-devel wxWidgets-gtk3-devel gtk+3-devel
# libmad-devel soundtouch-devel libsoxr-devel
# vamp-plugin-sdk-devel lame-devel libid3tag-devel libflac-devel
# ffmpeg-devel twolame-devel serd-devel lv2 lilv-devel suil-devel"
#makedepends="gtk+-devel gtk+3-devel alsa-lib-devel jack-devel libuuid-devel lame-devel libflac-devel ffmpeg-devel libsoxr-devel"
makedepends="gtk+-devel gtk+3-devel alsa-lib-devel jack-devel libuuid-devel libSM-devel"
#depends="desktop-file-utils hicolor-icon-theme"
short_desc="Graphical cross-platform audio editor"
maintainer="Jason Elswick <jason@jasondavid.tv>"
license="GPL-2.0-or-later"
homepage="https://www.audacityteam.org"
distfiles="https://github.com/audacity/audacity/archive/Audacity-${version}.tar.gz"
checksum=bf6863553bd2b822d3f236acb2de32527c93a968d114c6663920d2ebf61bf743

#case "$XBPS_TARGET_MACHINE" in
#	i686*|x86_64*) ;;
#	*) configure_args+=" --disable-sse" ;;
#esac

if [ "$XBPS_TARGET_NO_ATOMIC8" ]; then
	makedepends+=" libatomic-devel"
	LDFLAGS="-latomic"
fi

#post_install() {
#	vcopy nyquist /usr/share/audacity
#	vcopy plug-ins /usr/share/audacity
#
#	rm ${DESTDIR}/usr/share/doc/audacity/LICENSE.txt
#	vlicense LICENSE.txt LICENSE
#}
