# Template file for 'audacity'
pkgname=audacity
version=3.6.4
revision=1
build_style=cmake
build_helper="cmake-wxWidgets-gtk3 qemu"
configure_args="-Daudacity_use_ffmpeg=loaded -Daudacity_lib_preference=system
 -Daudacity_obey_system_dependencies=ON -Daudacity_conan_enabled=OFF
 -Daudacity_use_portsmf=local -Daudacity_use_sbsms=local
 -Daudacity_has_vst3=OFF -Daudacity_has_crashreports=OFF
 -Daudacity_has_networking=OFF -Daudacity_has_sentry_reporting=OFF
 -Daudacity_has_updates_check=OFF -DAUDACITY_BUILD_LEVEL=2"
hostmakedepends="pkg-config gettext python3"
makedepends="alsa-lib-devel wxWidgets-gtk3-devel gtk+3-devel expat-devel
 libsoxr-devel portaudio-devel sqlite-devel ffmpeg6-devel lame-devel
 libid3tag-devel libmad-devel vamp-plugin-sdk-devel libogg-devel
 libvorbis-devel libflac-devel lilv-devel lv2 serd-devel sord-devel
 sratom-devel suil-devel portmidi-devel soundtouch-devel twolame-devel
 zlib-devel libuuid-devel jack-devel wavpack-devel libsndfile-devel
 opusfile-devel rapidjson"
depends="desktop-file-utils hicolor-icon-theme"
short_desc="Graphical cross-platform audio editor"
maintainer="Orphaned <orphan@voidlinux.org>"
license="GPL-2.0-or-later, GPL-3.0-or-later, CC-BY-3.0"
homepage="https://www.audacityteam.org"
changelog="https://github.com/audacity/audacity/raw/master/CHANGELOG.txt"
distfiles="https://github.com/audacity/audacity/releases/download/Audacity-${version}/audacity-sources-${version}.tar.gz"
checksum=8e8c184d9304e961deee7c1621d475ab529f2d550f236c59f43940a842721ac3

CXXFLAGS="-D_FILE_OFFSET_BITS=64"

case "$XBPS_TARGET_MACHINE" in
	i686) export CFLAGS='-msse2';;
esac

post_install() {
	rm ${DESTDIR}/usr/share/doc/audacity/LICENSE.txt
}
