# Template file for 'python3-fpylll'
pkgname=python3-fpylll
version=0.5.6
revision=1
wrksrc="fpylll-${version}"
build_style=python3-module
hostmakedepends="python3-Cython"
makedepends="python3-cysignals python3-devel gmp-devel mpfr-devel fplll-devel
 pari-devel"
checkdepends="python3-pytest python3-numpy"
short_desc="Python wrapper to fplll (floating point lattice algorithms)"
maintainer="Gonzalo Tornar√≠a <tornaria@cmat.edu.uy>"
license="GPL-2.0-or-later"
homepage="https://github.com/fplll/fpylll"
distfiles="${PYPI_SITE}/f/fpylll/fpylll-${version}.tar.gz"
checksum=6eb8a63fb933c0bf92f290dd66fd884807659214d0ce524afe3687a6a6b13a8b

case $XBPS_TARGET_MACHINE in
	# skip a test with numerical noise on 32 bit
	i686*) make_check_args="-k not(averaged_simulate_prob)" ;;
esac

pre_check() {
	export PY_IGNORE_IMPORTMISMATCH=1
}
