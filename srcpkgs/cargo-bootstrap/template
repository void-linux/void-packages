# Template file for 'cargo-bootstrap'
pkgname=cargo-bootstrap
version=1.59.0
revision=1
short_desc="Bootstrap binaries of Rust package manager"
maintainer="q66 <daniel@octaforge.org>"
license="MIT, Apache-2.0"
homepage="https://www.rust-lang.org/"
conflicts="cargo>=0"
lib32disabled=yes
nostrip=yes

_bootstrap_url="https://static.rust-lang.org/dist"

wrksrc="cargo-${version}-${RUST_TARGET}"
distfiles="${_bootstrap_url}/cargo-${version}-${RUST_TARGET}.tar.xz"

case "$XBPS_TARGET_MACHINE" in
	i686)
		checksum="4f282b8a4dadf53ba3f8784cefe0c2be908179ba81b7b29a0db4a11b6a3f8849"
		;;
	x86_64)
		checksum="f56ebfb333ea46e4429377bf4b16a2ec889d61640a41c3093577cdd8f3c80b96"
		;;
	x86_64-musl)
		checksum="95f2727f22f40d7a294f08d24dc7b5f4fb4fe3991854becceffa75bf8f049745"
		;;
	ppc64le)
		checksum="abda08beb3411ec8f14ab872aa9859dc419e5f75c312221a62d655ff5401876f"
		;;
	ppc64le-musl)
		checksum="abda08beb3411ec8f14ab872aa9859dc419e5f75c312221a62d655ff5401876f"
		;;
	ppc64)
		checksum="abda08beb3411ec8f14ab872aa9859dc419e5f75c312221a62d655ff5401876f"
		;;
	ppc)
		checksum="abda08beb3411ec8f14ab872aa9859dc419e5f75c312221a62d655ff5401876f"
		;;
	*) broken="cargo bootstrap binaries unavailable for ${XBPS_MACHINE}";;
esac

do_install() {
	vbin cargo/bin/cargo
	vlicense LICENSE-APACHE
	vlicense LICENSE-MIT
	vlicense LICENSE-THIRD-PARTY
}
