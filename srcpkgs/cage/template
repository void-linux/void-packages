# Template file for 'cage'
pkgname=cage
version=0.1.1
revision=2
build_style=meson
hostmakedepends="pkg-config wayland-devel"
makedepends="xcb-util-wm-devel xcb-util-errors-devel libxkbcommon-devel pixman-devel wayland-devel wlroots-devel"
depends="$(vopt_if elogind elogind)"
short_desc="Kiosk compositor for Wayland"
maintainer="Illia Shestakov <ishestakov@airmail.cc>"
license="MIT"
homepage="https://www.hjdskes.nl/projects/cage/"
distfiles="https://github.com/Hjdskes/cage/archive/v${version}.tar.gz"
checksum=63efbe96cf307381f2bedf9b80153343e255970a70d612515da7dc325dd49478

build_options="elogind"
build_options_default="elogind"
desc_option_elogind="Uses elogind instead of setuid for privilege escalation"

post_install() {
	vlicense LICENSE
	vdoc README.md
	if [ -z "$build_option_elogind" ]; then
		# must be setuid without logind
		chmod u+s ${DESTDIR}/usr/bin/cage
	fi
}
