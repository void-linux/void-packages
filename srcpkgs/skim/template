# Template file for 'skim'
pkgname=skim
version=0.20.5
revision=1
build_style=cargo
make_install_args="--path skim"
short_desc="Fuzzy Finder in rust"
maintainer="Saksham <voidisnull@duck.com>"
license="MIT"
homepage="https://github.com/skim-rs/skim"
changelog="https://raw.githubusercontent.com/skim-rs/skim/master/CHANGELOG.md"
distfiles="https://github.com/skim-rs/skim/archive/refs/tags/v${version}.tar.gz"
checksum=c9b367bd37daa38b95a5da1e8f967279f4127168a38986b2f7d33a4b5fd413c2

if [ "$XBPS_WORDSIZE" = 32 ]; then
	make_check=no  # disable tests on 32bit due to register exhaustion
fi

post_install() {
	vbin bin/sk-tmux

	vman man/man1/sk.1
	vman man/man1/sk-tmux.1

	vcompletion shell/completion.bash bash sk
	vcompletion shell/completion.zsh zsh sk
	vcompletion shell/completion.fish fish sk
	vinstall shell/key-bindings.zsh 644 usr/share/skim
	vinstall shell/key-bindings.bash 644 usr/share/skim
	vinstall shell/key-bindings.fish 644 usr/share/skim

	vinstall plugin/skim.vim 644 usr/share/vim/vimfiles/plugin

	vlicense LICENSE
}
