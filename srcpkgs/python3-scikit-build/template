# Template file for 'python3-scikit-build'
pkgname=python3-scikit-build
version=0.17.6
revision=1
build_style=python3-pep517
hostmakedepends="hatchling hatch-vcs"
depends="python3-distro python3-packaging python3-setuptools python3-wheel"
checkdepends="${depends} python3-devel python3-Cython python3-numpy python3-pytest
 python3-pytest-mock python3-requests python3-virtualenv python3-path python3-six
 git cmake gcc gcc-fortran"
short_desc="Build system generator for Python C/C++/Fortran/Cython extensions"
maintainer="Luciogi <lucigithubcommit@skiff.com>"
license="MIT"
homepage="https://github.com/scikit-build/scikit-build"
changelog="https://github.com/scikit-build/scikit-build/raw/main/CHANGES.rst"
distfiles="${PYPI_SITE}/s/scikit_build/scikit_build-${version}.tar.gz"
checksum=b51a51a36b37c42650994b5047912f59b22e3210b23e321f287611f9ef6e5c9d
pre_check() {
	# Tests run in only virtual environment
	python -m venv test-env --system-site-package
}

do_check() {
	test-env/bin/python /usr/bin/pytest -m "not isolated and not deprecated and not nosetuptoolsscm"
}

post_install() {
	vlicense LICENSE
}
