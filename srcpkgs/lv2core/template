# Template file for 'lv2core'
pkgname=lv2core
version=4.0
revision=3
build_style=waf
homepage="http://lv2plug.in"
distfiles="http://lv2plug.in/spec/lv2core-4.0.tar.bz2"
makedepends="python"
short_desc="Plugin standard for audio systems"
maintainer="davehome <davehome@redthumb.info.tm>"
license="LGPL-2.1, BSD"
checksum=eff74c0db770a1b5a6d1cc7b7b96f0b2d2c5523bfa8c1945a60b15e00199b2cc
long_desc="
 LV2 is a plugin standard for audio systems. It defines a minimal yet
 extensible C API for plugin code and a format for plugin bundles."


post_install()
{
	# This bit is from Arch
	# do the work of lv2config to own symlinks;
	#   - generate lv2 headers
	#   - see FS#23514
	local _ns=$(grep '^<http' manifest.ttl | sed 's|<http://\(.*\)>|\1|')
	local _name=${_ns/*\/}
	local _path="usr/include/lv2/${_ns%/*}"
	vmkdir "$_path"
	cd "${DESTDIR}/usr/include/lv2/${_ns%/*}" && \
		ln -s "../../../../lib/lv2/$_name.lv2" "$_name"
}
