# Template file for 'asncounter'
pkgname=asncounter
version=0.5.0
revision=2
build_style=python3-pep517
hostmakedepends="pandoc python3-setuptools python3-setuptools_scm python3-wheel"
makedepends="python3-devel"
depends="python3-pyasn"
checkdepends="python3-pyasn python3-pytest python3-prometheus_client"
short_desc="Tool to group IP addresses by ASN, useful for fighting bot farms"
maintainer="Orphaned <orphan@voidlinux.org>"
license="AGPL-3.0-or-later"
homepage="https://gitlab.com/anarcat/asncounter"
distfiles="https://gitlab.com/anarcat/asncounter/-/archive/$version/asncounter-$version.tar.gz"
checksum=4a4184afad23e1fa9dcc2862644707c075f59e013d988aaf0cc7555f79c982ca

pre_build() {
	export SETUPTOOLS_SCM_PRETEND_VERSION_FOR_ASNCOUNTER="$version"
}

post_install() {
	pandoc --standalone --to man asncounter.1.md > asncounter.1
	vman asncounter.1
	vlicense LICENSE
}
