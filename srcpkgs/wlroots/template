pkgname=wlroots
version=0.1
revision=1
build_style=meson
configure_args="$(vopt_if elogind -Dlogind-provider=elogind -Dlogind=disabled)
 $(vopt_bool x11 xwayland\ x11-backend) -Dexamples=false -Drootston=false"
hostmakedepends="pkg-config wayland-devel"
makedepends="wayland-devel wayland-protocols MesaLib-devel libdrm-devel libgbm
 libinput-devel libxkbcommon-devel eudev-libudev-devel pixman-devel
 $(vopt_if elogind elogind-devel) $(vopt_if cap libcap-devel) $(vopt_if rest libpng-devel\ ffmpeg-devel)
 $(vopt_if x11 'libxcb-devel xcb-util-image-devel xcb-util-wm-devel xcb-util-errors-devel libX11-devel')"
short_desc="A modular Wayland compositor library"
maintainer="Issam Maghni <me@concati.me>"
license="MIT"
homepage="https://github.com/swaywm/${pkgname}"
distfiles="${homepage}/archive/${version}.tar.gz"
checksum=cff055bc141eefea6fb1aa410d166890f1e6666d3fd321d70403a543494a6a84

build_options_default="cap x11"
build_options="elogind cap x11 rest"
desc_option_elogind="Enable logind support"
desc_option_cap="Enable capability support"
desc_option_x11="Enable supoprt for Xwayland & X11 backend"
desc_option_rest="Enable extra features (??)"

post_install() {
	vlicense LICENSE
}

wlroots-devel_package() {
	short_desc+=" - development files"
	depends="${sourcepkg}>=${version}_${revision}"
	pkg_install() {
		vmove usr/include
		vmove usr/lib/pkgconfig
		vmove usr/lib/*.so
	}
}
