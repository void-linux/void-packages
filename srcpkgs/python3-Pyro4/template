# Template file for 'python3-Pyro4'
pkgname=python3-Pyro4
version=4.82
revision=1
wrksrc="${pkgname#*-}-${version}"
build_style=python3-module
hostmakedepends="python3-setuptools"
depends="python3-setuptools python3-serpent"
checkdepends="python3-serpent"
short_desc="Distributed Object Middleware (IPC/RPC) for Python3"
maintainer="pulux <pulux@pf4sh.de>"
license="MIT"
homepage="https://pyro4.readthedocs.io"
distfiles="${PYPI_SITE}/P/Pyro4/Pyro4-${version}.tar.gz"
checksum=511f5b0804e92dd77dc33adf9c947787e3f9e9c5a96b12162f0557a7c4ce21fb

conflicts="python-Pyro4>=0"

do_check() {
	# Tests depend on python3-dill and python3-cloudpickle, which aren't packaged jet
	rm -f tests/PyroTests/test_daemon.py tests/PyroTests/test_serialize.py
	# Tests can't get addr
	rm -f tests/PyroTests/test_naming.py tests/PyroTests/test_naming2.py
	rm -f tests/PyroTests/test_socket.py tests/PyroTests/test_util.py
	# PYTHONPATH=src python3 -E -Wall -tt -bb tests/run_testsuite.py
	# disable check for now, need python3-Pyro4 in checkdepends, tigger a cyclic
	# depends on CI
}

post_install() {
	vlicense LICENSE
}
