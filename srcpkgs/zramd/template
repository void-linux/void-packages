# Template file for 'zramd'
pkgname=zramd
version=0.9.2
revision=1
archs="x86_64* armv[67]l* aarch64*"
create_wrksrc=yes
depends="coreutils util-linux"
short_desc="Automatically setup swap on zram"
maintainer="bakayuuko <bakayuuko@protonmail.com>"
license="MIT"
homepage="https://github.com/maximumadmin/zramd"

case "$XBPS_TARGET_MACHINE" in
	x86_64*)
		_dist_arch="amd64"
		checksum="af9f61fa432b9a837905a221442b7b04836620e2fc8eeb2fa4debf42a0d2df06
		9cb77e0aeebc35f9f2d3deb17a6f0c355d3f1869f3da8c395dcbfc829e7049fc"
		;;
	arm*l*)
		_dist_arch="armhf"
		checksum="af9f61fa432b9a837905a221442b7b04836620e2fc8eeb2fa4debf42a0d2df06
		9f6748424c58ab98fa6f19312c7718beb51eab23b9532776bf91fe1dd87a56af"
		;;
	aarch64*)
		_dist_arch="arm64"
		checksum="af9f61fa432b9a837905a221442b7b04836620e2fc8eeb2fa4debf42a0d2df06
		31dd2e28f2acb041dce26fa38a4622e7b0da97ae8069a1a304dccc91609c61be"
		;;
esac

distfiles="https://raw.githubusercontent.com/maximumadmin/zramd/master/LICENSE>LICENSE.txt
https://github.com/maximumadmin/zramd/releases/download/v${version}/zramd_${_dist_arch}.tar.gz"
skip_extraction="LICENSE.txt"

do_install() {
	mv zramd_${_dist_arch} zramd
	vbin zramd
}

post_install() {
	vsv zramd
	vlicense ${XBPS_SRCDISTDIR}/${pkgname}-${version}/LICENSE.txt LICENSE.md
}
