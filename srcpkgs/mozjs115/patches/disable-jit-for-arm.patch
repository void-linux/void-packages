--- a/js/src/jit/shared/AtomicOperations-shared-jit.cpp
+++ b/js/src/jit/shared/AtomicOperations-shared-jit.cpp
@@ -8,2 +8,4 @@
 
+#ifdef JS_HAVE_GENERATED_ATOMIC_OPS
+
 #if defined(__arm__)
@@ -12,4 +14,2 @@
 
-#ifdef JS_HAVE_GENERATED_ATOMIC_OPS
-
 #  include <atomic>
only in patch2:
--- a/js/moz.configure
+++ b/js/moz.configure
@@ -177,4 +177,4 @@
 # =======================================================
-@depends(target, "--enable-record-tuple")
-def jit_default(target, enable_record_tuple):
+@depends(target, arm_target, "--enable-record-tuple")
+def jit_default(target, arm_target, enable_record_tuple):
     if enable_record_tuple:
@@ -184,3 +184,2 @@
         "x86_64",
-        "arm",
         "aarch64",
@@ -191,2 +190,6 @@
         return True
+
+    if target.cpu == "arm" and arm_target.arm_arch >= 7:
+        return True
+
     return False
