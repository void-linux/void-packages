# Template file for 'play-timer'
pkgname=play-timer
version=2.0.3
revision=1
build_style=go
build_helper="gir"
go_import_path=github.com/efogdev/mpris-timer
go_package="./cmd"
go_build_tags="wayland"
hostmakedepends="gobject-introspection pkg-config wayland-devel"
makedepends="glib-devel wayland-devel alsa-lib-devel graphene-devel
 cairo-devel pango-devel gdk-pixbuf-devel gtk4-devel libadwaita-devel"
short_desc="Timer app for Linux desktop"
maintainer="Eloi Torrents <eloitor@duck.com>"
license="MIT"
homepage="https://github.com/efogdev/mpris-timer"
changelog="https://github.com/efogdev/mpris-timer/releases"
distfiles="https://github.com/efogdev/mpris-timer/archive/${version}.tar.gz"
checksum=00045e7d0133ad911c4ddcc66af2075402bb3f96262045f9cabedb6b6f6f8a59

do_build() {
	go build -tags "${go_build_tags}" -o "${GOPATH}/bin/${pkgname}" ${go_package}
}

post_install() {
	vlicense LICENSE.txt LICENSE

	local _glibname="io.github.efogdev.mpris-timer"
	vinstall "misc/${_glibname}.desktop" 644 usr/share/applications
	vinstall "misc/${_glibname}.metainfo.xml" 644 usr/share/metainfo
	vinstall "misc/${_glibname}.gschema.xml" 644 usr/share/glib-2.0/schemas
	vinstall "internal/ui/res/icon.svg" 644 usr/share/icons/hicolor/scalable/apps "${_glibname}.svg"
}
