# Template file for 'libnfsidmap'
pkgname=libnfsidmap
version=0.27
revision=1
build_style=gnu-configure
configure_args="--disable-static"
hostmakedepends="automake libtool"
makedepends="libldap-devel"
short_desc="Library to help mapping IDs, mainly for NFSv4"
maintainer="Orphaned <orphan@voidlinux.org>"
license="BSD-3-Clause"
homepage="http://www.citi.umich.edu/projects/nfsv4/linux/"
distfiles="https://fedorapeople.org/~steved/${pkgname}/${version}/${pkgname}-${version}.tar.bz2"
checksum=25a285b649e519e7437571f3437b837b7d2d51d6da8d6b5770950812235be22d

pre_configure() {
	case "$XBPS_TARGET_MACHINE" in
		*-musl) sed -i 's,u_int,uint,g;s,u_char,unsigned char,g' *.[ch];;
	esac
	autoreconf -fi
}

post_install() {
	vlicense COPYING
}

libnfsidmap-devel_package() {
	depends="libldap-devel ${sourcepkg}>=${version}_${revision}"
	short_desc+=" - development files"
	pkg_install() {
		vmove usr/include
		vmove usr/lib/pkgconfig
		vmove "usr/lib/*.so"
		vmove usr/share/man/man3
	}
}
