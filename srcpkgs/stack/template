# Template file for 'stack'
pkgname=stack
version=3.7.1
revision=1
build_style=cabal
cabal_index_state="2025-06-29T20:30:08Z"
make_build_args="-f disable-git-info"
makedepends="zlib-devel"
depends="git gmp-devel iana-etc"
short_desc="Cross-platform program for developing Haskell projects"
maintainer="Leah Neukirchen <leah@vuxu.org>"
license="BSD-3-Clause"
homepage="https://haskellstack.org"
# cborg will likely be fixed in the next release and can then be removed here.
# https://github.com/well-typed/cborg/pull/322
# The other two are unmaintained and archived, the only way they get fixed
# is if the dependency is removed from stack.
distfiles="https://hackage.haskell.org/package/${pkgname}-${version}/${pkgname}-${version}.tar.gz
 https://hackage.haskell.org/package/basement-0.0.16/basement-0.0.16.tar.gz
 https://hackage.haskell.org/package/memory-0.18.0/memory-0.18.0.tar.gz
 https://hackage.haskell.org/package/cborg-0.2.10.0/cborg-0.2.10.0.tar.gz"
checksum="412a7a8d654ba38b29ea88f473c771d612c1836af80c0293fe092faa430ac80e
 7fb77e249aef76ba5aed3059d556800ce02b614597c488ba01f0a16449146300
 fd4eb6f638e24b81b4e6cdd68772a531726f2f67686c8969d3407d82f7862e3e
 17fe070c38fc498cab49bcb9d6215b7747d53bedf96502e9bcce9cad73b9c797"
nocross=yes
nopie_files="/usr/bin/stack"
skip_extraction="basement-0.0.16.tar.gz memory-0.18.0.tar.gz cborg-0.2.10.0.tar.gz"

post_extract() {
	vsrcextract -C basement basement-0.0.16.tar.gz
	vsrcextract -C memory memory-0.18.0.tar.gz
	vsrcextract -C cborg cborg-0.2.10.0.tar.gz
}

post_install() {
	vlicense LICENSE
}
