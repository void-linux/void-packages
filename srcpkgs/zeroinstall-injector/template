# Template file for 'zeroinstall-injector'
pkgname=zeroinstall-injector
version=2.15
revision=1
wrksrc="0install-${version}"
build_style=gnu-makefile
make_install_target="install_system"
make_check_args="test"
hostmakedepends="gettext opam m4 tar pkg-config which"
makedepends="libressl-devel glib-devel libcurl-devel gtk+-devel gnupg"
depends="gnupg desktop-file-utils hicolor-icon-theme xdg-utils
 gtk+-devel glib-devel libressl-devel"
short_desc="Cross-distribution software installation system"
maintainer="mobinmob <mobinmob@disroot.org>"
license="LGPL-2.1-only"
homepage="http://0install.net"
distfiles="${SOURCEFORGE_SITE}/zero-install/0install-$version.tar.bz2"
checksum=46b627af4d2d1791aa2fb96ee0f3c3d6d91ec369d59a1153edf93a5de2089dd4
nocross="opam is nocross"



pre_build() {
	opam init -y --compiler=4.07.0 --disable-sandboxing
	eval $(opam env)
	opam pin -y lwt 3.3.0
	opam install -y yojson xmlm ounit lwt_react ocurl obus lablgtk lwt_glib sha dune
}
