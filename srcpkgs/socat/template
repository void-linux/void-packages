# Template file for 'socat'
pkgname=socat
version=1.8.1.0
revision=2
build_style=gnu-configure
configure_args="--disable-libwrap --enable-fips
 ac_cv_have_z_modifier=yes"
make_check_target="test"
makedepends="readline-devel openssl-devel"
checkdepends="iana-etc net-tools procps-ng"
short_desc="Relay for bidirectional data transfer between two independent channels"
maintainer="Leah Neukirchen <leah@vuxu.org>"
license="GPL-2.0-only"
homepage="http://www.dest-unreach.org/socat/"
changelog="http://www.dest-unreach.org/socat/CHANGES"
distfiles="http://www.dest-unreach.org/socat/download/socat-${version}.tar.bz2"
checksum=91f222ee65559036600c2505b999acebed48b899f0e2e53ae1c9c31d6986b6a4

case "$XBPS_TARGET_MACHINE" in
	*-musl) CFLAGS="-D_LINUX_IF_ETHER_H -Doff64_t=off_t"
		;;
esac

case "$XBPS_TARGET_MACHINE" in
	ppc*)
		configure_args+="
		 sc_cv_sys_crdly_shift=12
		 sc_cv_sys_tabdly_shift=10
		 sc_cv_sys_csize_shift=8"
		;;
	*)
		configure_args+="
		 sc_cv_sys_crdly_shift=9
		 sc_cv_sys_tabdly_shift=11
		 sc_cv_sys_csize_shift=4"
		;;
esac

configure_args+=" ac_cv_ispeed_offset=13"
