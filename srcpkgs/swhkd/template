# Template file for 'swhkd'
pkgname=swhkd
version=1.2.1
revision=1
archs="i686* x86_64*"
build_style=gnu-makefile
hostmakedepends="pkg-config"
makedepends="eudev-libudev-devel rust cargo scdoc"
depends="polkit"
short_desc="Display server-independent hotkey daemon inspired by sxhkd"
maintainer="Juan Diego Tascon <juan@horlux.org>"
license="BSD-2-Clause	"
homepage="https://github.com/waycrate/swhkd"
changelog="https://raw.githubusercontent.com/waycrate/swhkd/main/CHANGELOG.md"
distfiles="https://github.com/waycrate/swhkd/archive/refs/tags/${version}.tar.gz"
checksum=e74b7b2dc6ab3a31d7bdc4ece09da6ed7f959c7369112a6a45a435a8a0adf195

post_build() {
	scdoc < ./docs/swhkd.1.scd > ./docs/swhkd.1
	scdoc < ./docs/swhks.1.scd > ./docs/swhks.1
	scdoc < ./docs/swhkd.5.scd > ./docs/swhkd.5
	scdoc < ./docs/swhkd-keys.5.scd > ./docs/swhkd-keys.5
}

do_install() {
	vmkdir usr/share/polkit-1/actions
	vman ./docs/swhks.1
	vman ./docs/swhkd.1
	vman ./docs/swhkd.5
	vman ./docs/swhkd-keys.5
	vbin ./target/release/swhkd
	vbin ./target/release/swhks
	vcopy ./com.github.swhkd.pkexec.policy usr/share/polkit-1/actions/
	vlicense LICENSE LICENSE
}
