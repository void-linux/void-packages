# Template file for 'siril'
pkgname=siril
version=1.0.2
revision=1
build_style=meson
configure_args="-Drelocatable-bundle=no -Dopenmp=true -Denable-libcurl=yes"
meson_builddir="meson_build"
hostmakedepends="pkg-config intltool gettext-devel"
makedepends="glib-devel json-glib-devel exiv2-devel gtk+3-devel
 cairo-devel fftw-devel gsl-devel cfitsio-devel libconfig-devel
 libopencv4-devel librtprocess-devel libraw-devel tiff-devel
 libjpeg-turbo-devel libpng-devel libheif-devel libffms2-devel
 ffmpeg-devel libcurl-devel wcslib-devel libgomp-devel"
depends="gnuplot"
short_desc="Free astronomical image processing software"
maintainer="Andreas Kempe <kempe@lysator.liu.se>"
license="GPL-3.0-or-later"
homepage="https://www.siril.org/"
distfiles="https://free-astro.org/download/${pkgname}-${version}.tar.bz2"
checksum=4973bd7ad6d3cb7ad279ef27bb5c79f37ca1f914c7b6ad8fe689e1d59189f2db

if [ "$XBPS_TARGET_NO_ATOMIC8" ]; then
	makedepends+=" libatomic-devel"
fi

if [ "$XBPS_TARGET_LIBC" = "musl" ]; then
	makedepends+=" libexecinfo-devel"
	LDFLAGS+="-lexecinfo"
fi
