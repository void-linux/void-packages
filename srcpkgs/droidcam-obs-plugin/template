# Template file for 'droidcam-obs-plugin'
pkgname=droidcam-obs-plugin
version=2.4.1
revision=1
build_style=gnu-makefile
make_use_env=yes
make_build_args="ALLOW_STATIC=no"
makedepends="obs-devel libusbmuxd-devel libjpeg-turbo-devel
 ffmpeg-devel libimobiledevice-devel simde"
short_desc="DroidCam OBS Source"
maintainer="Michael Aldridge <maldridge@voidlinux.org>"
license="GPL-2.0-only"
homepage="https://github.com/dev47apps/droidcam-obs-plugin"
distfiles="https://github.com/dev47apps/droidcam-obs-plugin/archive/refs/tags/$version.tar.gz"
checksum=c2b6dd4e4ea27b274780d8dfe69861f235e28984a6f9ae4fe84bc4ee980747fc

pre_build() {
	mkdir -p build
	export INCLUDES="-I$XBPS_CROSS_BASE/usr/include/obs"
}

do_install() {
	vinstall build/droidcam-obs.so 0644 usr/lib/obs-plugins/
}
