# Template file for 'kf6-kimageformats'
pkgname=kf6-kimageformats
version=6.3.0
revision=1
build_style=cmake
configure_args="-DKIMAGEFORMATS_HEIF=ON -DKDE_INSTALL_QMLDIR=lib/qt6/qml
 -DKDE_INSTALL_QTPLUGINDIR=lib/qt6/plugins"
hostmakedepends="extra-cmake-modules qt6-tools qt6-base
 pkg-config"
makedepends="kf6-karchive-devel libopenexr-devel libheif-devel libraw-devel
 libjxl-devel libavif-devel"
short_desc="KDE Plugins to allow QImage to support extra file formats"
maintainer="John <me@johnnynator.dev>"
license="LGPL-2.1-or-later"
homepage="https://invent.kde.org/frameworks/kimageformats"
distfiles="${KDE_SITE}/frameworks/${version%.*}/${pkgname#kf6-}-${version}.tar.xz"
checksum=0ed40771bd35ed53af7c4a5216111bef282275b2eb384ae0076c917db20c1210

do_check() {
	cd build
	# disable failing tests
	ctest -E "kimageformats-read-xcf|kimageformats-read-psd|kimageformats-read-hej2"
}
