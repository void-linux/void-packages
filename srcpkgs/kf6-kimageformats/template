# Template file for 'kf6-kimageformats'
pkgname=kf6-kimageformats
version=6.0.0
revision=1
build_style=cmake
configure_args="-DKIMAGEFORMATS_HEIF=ON"
hostmakedepends="extra-cmake-modules qt6-tools qt6-base
 pkg-config"
makedepends="kf6-karchive-devel libopenexr-devel libheif-devel libraw-devel
 libjxl-devel libavif-devel"
short_desc="KDE Plugins to allow QImage to support extra file formats"
maintainer="John <me@johnnynator.dev>"
license="LGPL-2.1-or-later"
homepage="https://invent.kde.org/frameworks/kimageformats"
distfiles="${KDE_SITE}/frameworks/${version%.*}/${pkgname#kf6-}-${version}.tar.xz"
checksum=1ddd28f2fb8ac2c95556f792418c2b6190a04050ac31b27aa82ea11c1af0879c

do_check() {
	cd build
	# disable failing tests
	ctest -E "kimageformats-read-psd|kimageformats-read-hej2"
}
