# Template file for 'wcslib'
pkgname=wcslib
version=7.11
revision=1
build_style=gnu-configure
configure_args=" --without-pgplot "
makedepends="cfitsio-devel"
short_desc="Tools for WCS in FITS headers"
maintainer="Andreas Kempe <kempe@lysator.liu.se>"
license="GPL-3.0-or-later"
homepage="https://www.atnf.csiro.au/people/mcalabre/WCS/"
distfiles="ftp://ftp.atnf.csiro.au/pub/software/${pkgname}/${pkgname}-${version}.tar.bz2"
checksum=46befbfdf50cd4953896676a7d570094dc7661e2ae9677b092e7fb13cee3da5f

if [ "$CROSS_BUILD" ]; then
	hostmakedepends+="autoconf automake"
fi

pre_configure() {
	if [ "$CROSS_BUILD" ]; then
		# The supplied configuration file does not work when cross
		# compiling so generate a new configuration file.
		autoreconf -f -i
	fi
}

wcslib-devel_package() {
	short_desc+=" - development files"
	depends="wcslib>=${version}_${revision}"
	pkg_install() {
		vmove usr/lib/libwcs.so
		vmove usr/lib/libwcs.a
		vmove usr/lib/libwcs-${version}.a
		vmove usr/include
		vmove usr/lib/pkgconfig
		vmove usr/share/doc/wcslib-${version}/html
	}
}
