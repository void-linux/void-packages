# Template file for 'gitolite'
pkgname=gitolite
version=3.6.14
revision=1
depends="git perl"
short_desc="Access control layer on top of git"
maintainer="Orphaned <orphan@voidlinux.org>"
license="GPL-2.0-only"
homepage="https://gitolite.com/gitolite"
changelog="https://raw.githubusercontent.com/sitaramc/gitolite/refs/heads/master/CHANGELOG"
distfiles="https://github.com/sitaramc/gitolite/archive/v${version}.tar.gz"
checksum=46cd120323bb45fae24e202eb90fdfc77b51bc7a8ed085b0fa6936c3594145ee

system_accounts="gitolite"
gitolite_homedir="/var/lib/gitolite"
gitolite_shell="/bin/sh"
make_dirs="/var/lib/gitolite 0750 gitolite gitolite"

do_check() {
	: gitolite test suite delete stuff
}

do_install() {
	vmkdir usr/lib/gitolite
	vmkdir usr/bin
	vcopy src/* usr/lib/gitolite
	echo "v$version" >"$DESTDIR/usr/lib/gitolite/VERSION"
	ln -s /usr/lib/gitolite/gitolite ${DESTDIR}/usr/bin/gitolite
}
