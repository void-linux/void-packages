--- a/procdbase.c
+++ b/procdbase.c
@@ -67,7 +67,7 @@
 #include <fcntl.h>
 #include <unistd.h>
 #include <string.h>
-#include <malloc.h>
+#include <stdlib.h>
 
 #include "atop.h"
 #include "photoproc.h"
--- a/drawbar.c
+++ b/drawbar.c
@@ -110,6 +110,7 @@
 #include <unistd.h>
 #include <regex.h>
 #include <sys/utsname.h>
+#include <time.h>
 
 #include "atop.h"
 #include "showgeneric.h"
