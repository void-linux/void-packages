# Template file for 'xdg-desktop-portal-kde'
pkgname=xdg-desktop-portal-kde
version=6.5.4
revision=1
build_style=cmake
configure_args="-DWaylandScanner_EXECUTABLE=/usr/bin/wayland-scanner"
hostmakedepends="extra-cmake-modules qt6-base qt6-tools gettext
 qt6-declarative-host-tools
 wayland-devel plasma-wayland-protocols pkg-config
 kf6-kconfig"
makedepends="qt6-base-devel qt6-declarative-devel
 kf6-kio-devel kf6-kdeclarative-devel kf6-kirigami-devel
 kf6-kstatusnotifieritem-devel libplasma-devel kf6-kwayland-devel
 kf6-kcrash-devel kf6-kiconthemes-devel kf6-kcoreaddons-devel
 kf6-kconfig-devel kf6-ki18n-devel kf6-kguiaddons-devel kf6-kglobalaccel-devel
 qt6-base-private-devel qt6-declarative-devel kf6-kio-devel kf6-knotifications-devel
 kf6-kservice-devel kf6-kwidgetsaddons-devel kf6-kwindowsystem-devel
 libepoxy-devel pipewire-devel libglib-devel"
depends="xdg-desktop-portal plasma-workspace"
checkdepends="dbus python3-gobject"
short_desc="Backend implementation for xdg-desktop-portal that is using Qt/KF6"
maintainer="John <me@johnnynator.dev>"
license="GPL-3.0-or-later"
homepage="https://invent.kde.org/plasma/xdg-desktop-portal-kde"
distfiles="${KDE_SITE}/plasma/${version}/${pkgname}-${version}.tar.xz"
checksum=00b3f20db237900eb015a10095fb85d324da8080d20abafddf5cb044eb12516b

do_check() {
	cd build
	dbus-run-session ctest -E colorschemetest
}
