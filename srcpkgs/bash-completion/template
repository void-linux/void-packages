# Template file for 'bash-completion'
pkgname=bash-completion
version=2.16.0
revision=1
build_style=gnu-configure
make_install_args="profiledir=/etc/bash/bashrc.d compatdir=/usr/share/bash-completion"
depends="bash"
checkdepends="python3-pytest python3-pexpect"
short_desc="Programmable completion for the GNU Bash shell"
maintainer="skmpz <dem.procopiou@gmail.com>"
license="GPL-2.0-or-later"
homepage="https://github.com/scop/bash-completion"
distfiles="https://github.com/scop/bash-completion/releases/download/${version}/bash-completion-${version}.tar.xz"
checksum=3369bd5e418a75fb990863925aed5b420398acebb320ec4c0306b3eae23f107a

pre_check() {
	for t in $_test_deselect; do
		PYTEST_ADDOPTS+=" --deselect=t/$t"
	done
	export PYTEST_ADDOPTS
}

post_install() {
	# for slackware's that we don't have, conflicts with pacman's
	rm ${DESTDIR}/usr/share/bash-completion/completions/makepkg
}
