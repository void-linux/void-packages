# Template file for 'webrtc-audio-processing-2'
pkgname=webrtc-audio-processing-2
version=2.1
revision=1
build_style=meson
hostmakedepends="pkg-config"
makedepends="abseil-cpp-devel"
short_desc="AudioProcessing library based on Google's implementation of WebRTC v2"
maintainer="JkktBkkt <apkabikov+void@gmail.org>"
license="BSD-3-Clause"
homepage="https://freedesktop.org/software/pulseaudio/webrtc-audio-processing"
distfiles="${FREEDESKTOP_SITE}/pulseaudio/webrtc-audio-processing/webrtc-audio-processing-${version}.tar.gz"
checksum=35e86b986d02ea15f3d04741a1a5a735ba399bc0fac0ee089c39480e35fc3253

if [ "$XBPS_TARGET_MACHINE" = "i686" ]; then
	configure_args+=" -Dinline-sse=false"
fi

post_install() {
	vlicense COPYING
}

webrtc-audio-processing-2-devel_package() {
	depends="${sourcepkg}>=${version}_${revision} abseil-cpp-devel"
	short_desc+=" - development files"
	pkg_install() {
		vmove usr/include
		vmove usr/lib/pkgconfig
		vmove "usr/lib/*.so"
	}
}
