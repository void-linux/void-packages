# Template file for 'xrdp'
pkgname=xrdp
version=0.9.16
revision=3
archs="x86_64"
build_style=gnu-configure
hostmakedepends="pkg-config automake autoconf which nasm flex bison libxml2-python3 python3 libtool"
makedepends="openssl-devel pam-devel libjpeg-turbo-devel libX11-devel libXfixes-devel libXrandr-devel fuse-devel libxml2-devel lame-devel pixman-devel xorg-server-devel opus-devel"
depends="openssl pam libjpeg-turbo libX11 libXfixes libXrandr intltool libxslt fuse lame fdkaac opus pixman xorg"
short_desc="XRDP"
maintainer="Martijn van Maurik <git@vmaurik.nl>"
license="Apache-2.0"
homepage="https://xrdp.org"
distfiles="https://github.com/neutrinolabs/xrdp/releases/download/v$version/xrdp-$version.tar.gz"
checksum="72a86bf3bb8ca3a41905bfa84f500ad73cd23615753f34db7e36278a33c19916"
configure_args="--enable-pam --enable-vsock --enable-pam-config=unix --enable-tjpeg --enable-fuse --enable-mp3lame --enable-rfxcodec --enable-opus --enable-pixman --enable-ipv6 --libdir /usr/lib64 --enable-painter"

pre_configure() {
  ./bootstrap
}

post_install() {
  vsv xrdp
  vsv xrdp-sesman
}
