# Template file for 'python3-pyinfra'
pkgname=python3-pyinfra
version=3.6
revision=1
build_style=python3-pep517
build_wrksrc="pyinfra-${version}"
hostmakedepends="hatchling python3-uv-dynamic-versioning"
depends="python3 python3-Jinja2 python3-click python3-colorama python3-dateutil
 python3-distro python3-docopt python3-gevent python3-paramiko python3-pywinrm
 python3-six python3-yaml python3-packaging python3-typeguard
 python3-setuptools python3-pydantic"
checkdepends="${depends} openssh python3-freezegun python3-mock python3-pytest python3-pytest-testinfra sudo"
short_desc="Automate infrastructure super fast at massive scale"
maintainer="Leah Neukirchen <leah@vuxu.org>"
license="MIT"
homepage="https://pyinfra.com/"
changelog="https://github.com/Fizzadar/pyinfra/blob/HEAD/CHANGELOG.md"
distfiles="https://github.com/Fizzadar/pyinfra/archive/v${version}.tar.gz
 https://github.com/pyinfra-dev/testgen/archive/ad66739be1b8ff3405b5ebf487064296a18e741b.tar.gz"
checksum="f54177b0008a9d4deee60c2ba2f8de90aaca84fa6f30b50a236df472935c788c
 4454a1ec645b2d15fb25c5e31119db2618717957eabe3274b2a1a2efe588d06a"

export UV_DYNAMIC_VERSIONING_BYPASS=${version}

pre_check() {
	cp -r ${wrksrc}/testgen-*/testgen ${testdir}/${py3_sitelib}
}

post_install() {
	vlicense LICENSE.md
}
