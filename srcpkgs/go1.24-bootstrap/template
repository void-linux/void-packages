# Template file for 'go1.24-bootstrap'
pkgname=go1.24-bootstrap
version=1.24.0
revision=1
archs="x86_64* i686* armv[67]l* aarch64* ppc64le*"
short_desc="Go 1.24 (bootstrap compiler)"
maintainer="Buğra Eren Yılmaz <xinoip@proton.me>"
license="BSD-3-Clause"
homepage="https://golang.org"
nostrip=yes
noverifyrdeps=yes
nocross=yes
lib32disabled=yes
repository=bootstrap

if [ "$XBPS_TARGET_LIBC" = "musl" ]; then
	depends+=" gcompat"
fi

case "$XBPS_TARGET_MACHINE" in
	x86_64*)
		_dist_arch="amd64"
		checksum="dea9ca38a0b852a74e81c26134671af7c0fbe65d81b0dc1c5bfe22cf7d4c8858"
		;;
	i686*)
		_dist_arch="386"
		checksum="90521453a59c6ce20364d2dc7c38532949b033b602ba12d782caeb90af1b0624"
		;;
	arm*)
		_dist_arch="armv6l"
		checksum="695dc54fa14cd3124fa6900d7b5ae39eeac23f7a4ecea81656070160fac2c54a"
		;;
	aarch64*)
		_dist_arch="arm64"
		checksum="c3fa6d16ffa261091a5617145553c71d21435ce547e44cc6dfb7470865527cc7"
		;;
	ppc64le*)
		_dist_arch="ppc64le"
		checksum="a871a43de7d26c91dd90cb6e0adacb214c9e35ee2188c617c91c08c017efe81a"
		;;
esac

distfiles="https://dl.google.com/go/go${version}.linux-${_dist_arch}.tar.gz"

do_install() {
	vmkdir usr/lib/go${version}
	vcopy bin usr/lib/go${version}
	vcopy src usr/lib/go${version}
	vcopy pkg usr/lib/go${version}
	vlicense LICENSE
}
