# Template file for 'base-directories'
pkgname=base-directories
version=0.1
build_style=custom-install
short_desc="XBPS FHS Base System directories"
maintainer="Juan RP <xtraeme@gmail.com>"
long_desc="
 This package installs the base system directories as specifed by FHS that aren't
 installed by any other package and are required on any GNU/Linux system."

nostrip=yes
noverifyrdeps=yes
keep_empty_dirs=yes
base_chroot=yes

do_install()
{
	#
	# Install FHS system directories.
	#
	for d in bin sbin boot etc etc/modprobe.d etc/skel \
		home lib dev proc mnt opt sys var media; do
		install -d ${DESTDIR}/${d}
	done

	install -d -m750 ${DESTDIR}/root
	for d in tmp var/tmp var/lock var/spool/mail; do
		install -d -m1777 ${DESTDIR}/${d}
	done

	for d in local local/bin local/sbin local/include local/lib \
		bin include lib sbin src; do
		install -d ${DESTDIR}/usr/${d}
	done

	for d in locale misc terminfo zoneinfo doc info; do
		install -d ${DESTDIR}/usr/share/${d}
		install -d ${DESTDIR}/usr/local/share/${d}
	done

	for f in 1 2 3 4 5 6 7 8; do
		install -d ${DESTDIR}/usr/share/man/man${d}
		install -d ${DESTDIR}/usr/local/share/man/man${d}
	done

	cd ${DESTDIR}/usr && ln -s ./share/man man
	cd ${DESTDIR}/usr/local && ln -s ./share/man man

	for d in log run opt cache lib; do
		install -d ${DESTDIR}/var/${d}
	done

	if [ "$xbps_machine" = "x86_64" ]; then
		cd ${DESTDIR} && ln -s lib lib64
		cd ${DESTDIR}/usr && ln -s lib lib64
	fi
}
