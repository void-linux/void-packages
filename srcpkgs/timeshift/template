# Template file for 'timeshift'
pkgname=timeshift
version=25.07.7
revision=1
build_style=meson
hostmakedepends="gettext pkg-config vala"
makedepends="libgee-devel json-glib-devel vte3-devel libgirepository-devel
 xapps-devel libxkbfile-devel"
depends="rsync psmisc xhost"
short_desc="System restore tool"
maintainer="Orphaned <orphan@voidlinux.org>"
license="GPL-3.0-only"
homepage="https://github.com/linuxmint/timeshift"
changelog="https://raw.githubusercontent.com/linuxmint/timeshift/master/debian/changelog"
distfiles="https://github.com/linuxmint/timeshift/archive/${version}/timeshift-${version}.tar.gz"
checksum=c4de584ac4ab29d17edae35d372fc64fd3a92e6d15efb5eb8ea458b315c6d52f
CFLAGS=-D_GNU_SOURCE=1

if [ "$CROSS_BUILD" ]; then
	configure_args="-Dman=false"
else
	hostmakedepends+=" help2man"
fi

# Remove hard-dep on crontab, leave up to user to decide
post_extract() {
	vsed -i src/Core/Main.vala -e '/dependencies/s:"crontab",::'
}
