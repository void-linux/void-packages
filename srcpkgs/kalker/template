# Template file for 'kalker'
pkgname=kalker
version=1.0.1
revision=1
build_style="cargo"
make_install_args="--path cli"
hostmakedepends="rust cargo gcc m4 diffutils make"
short_desc="Kalker is a calculator with functions, derivation, and integration"
maintainer="jake-87 <jakehfreebsd@gmail.com>"
license="MIT"
homepage="https://github.com/PaddiM8/kalker"
distfiles="https://github.com/PaddiM8/kalker/archive/v${version}.tar.gz"
checksum=952f4ed80a60a1d8fc6391d7bc431135b8243027bd17b7cada2f80cd96c6e549

# Needed because default adds "--path ." to ${make_install_args}
# whereas we need "--path cli"

do_install() {
	: ${make_cmd:=cargo}
	echo ${configure_args}
	${make_cmd} install --target ${RUST_TARGET} --root="${DESTDIR}/usr" \
		--locked ${configure_args} ${make_install_args}

	rm -f "${DESTDIR}"/usr/.crates.toml
	rm -f "${DESTDIR}"/usr/.crates2.json
}

post_install() {
	vlicense LICENSE
}
