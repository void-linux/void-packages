# Template file for 'keepassx2'
_realname="keepassx"
pkgname="${_realname}2"
version="2.0.3"
revision=2
build_style=cmake
hostmakedepends="pkg-config qt-devel"
makedepends="qt-devel libgcrypt-devel zlib-devel libXi-devel libXtst-devel"
short_desc="A password manager to secure personal data"
maintainer="Farhad Shahbazi <grauwolf@geekosphere.org>"
license="GPL-2"
homepage="https://www.keepassx.org/"
distfiles="${homepage}/releases/${version}/${_realname}-${version}.tar.gz"
checksum=23ffb4ae360c58aa139943442d175bc6b8f08e6a876ae76c4543ab983a6647c5
wrksrc="${_realname}-${version}"

pre_configure() {
	sed -i CMakeLists.txt \
		-e "s/set(PROGNAME.*/set(PROGNAME keepassx2)/"
}

post_install() {
	sed -i $DESTDIR/usr/share/applications/keepassx.desktop \
		-e "s/^Exec=.*/Exec=keepassx2/"
	mv $DESTDIR/usr/share/applications/keepassx.desktop \
		$DESTDIR/usr/share/applications/keepassx2.desktop
	mv $DESTDIR/usr/share/mime/packages/keepassx.xml \
		$DESTDIR/usr/share/mime/packages/keepassx2.xml
}
