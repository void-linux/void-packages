# Template file for 'lxdm'
pkgname=lxdm
version=0.4.1
revision=1
homepage="http://www.lxde.org"
distfiles="${SOURCEFORGE_SITE}/lxde/$pkgname-$version.tar.gz"
build_style=gnu-configure
configure_args="-with-xconn=xcb"
makedepends="pkg-config intltool gtk+-devel ConsoleKit-devel"
fulldepends="iso-codes"
short_desc="GUI login manager for LXDE"
maintainer="Juan RP <xtraeme@gmail.com>"
license="GPL-3"
checksum=9e0d0a5672fcf31a18de8178ce73eab1723d6ae7097dfe41e9fe2c46e180cf08
long_desc="
 A lightweight dropped-in replacement for GDM or KDM."

provides="display-manager-0"
replaces="display-manager>=0"

system_groups="lxdm"
systemd_services="lxdm.service off"

conf_files="
/etc/lxdm/LoginReady
/etc/lxdm/PostLogin
/etc/lxdm/PostLogout
/etc/lxdm/PreLogin
/etc/lxdm/PreReboot
/etc/lxdm/PreShutdown
/etc/lxdm/Xsession
/etc/lxdm/lxdm.conf
/etc/pam.d/lxdm"



post_install() {
	# Remove useless script.
	rm -f ${DESTDIR}/usr/sbin/lxdm
	# Use our own pam file.
	rm -f ${DESTDIR}/etc/pam.d/lxdm
	vinstall ${FILESDIR}/lxdm.pam 644 etc/pam.d lxdm
	# Install systemd service.
	vinstall ${FILESDIR}/lxdm.service 644 lib/systemd/system
}
