# Template file for 'go-ethereum'
pkgname=go-ethereum
version=1.8.24
revision=1
build_style=go
go_import_path=github.com/ethereum/go-ethereum
go_package="${go_import_path}/cmd/abigen
 ${go_import_path}/cmd/bootnode
 ${go_import_path}/cmd/evm
 ${go_import_path}/cmd/geth
 ${go_import_path}/cmd/puppeth
 ${go_import_path}/cmd/rlpdump
 ${go_import_path}/cmd/wnode
 ${go_import_path}/cmd/swarm"
depends="geth"
short_desc="Full suite of Go Ethereum utilities"
maintainer="Hoang Nguyen <hoang@wetrust.io>"
license="GPL-3.0-only"
homepage="https://github.com/ethereum/go-ethereum"
distfiles="https://${go_import_path}/archive/v${version}.tar.gz"
checksum=7b4d5df58bb00b0601d2b16ca16d03d2aa5a70e9529443154d24bdc38f7d931c

pre_build() {
	# Strip out -Werror
	find vendor/golang.org/x -type f -iname '*.go' | while read -r f; do
		sed -i 's|-Werror||g' $f
	done
}

geth_package() {
	short_desc="Official Go implementation of the Ethereum protocol"
	pkg_install() {
		vmove usr/bin/geth
	}
}
