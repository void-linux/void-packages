# Template file for 'gprbuild'
pkgname=gprbuild
version=25.0.0
revision=1
build_style=gnu-configure
short_desc="Advanced build system for multi-language programs"
maintainer="Estevan Castilho <tevo@riajuu.net>"
license=GPL-3.0-or-later
homepage="https://github.com/AdaCore/gprbuild"
distfiles="https://github.com/AdaCore/gprbuild/archive/refs/tags/v${version}.tar.gz"
checksum="d12f94c1ec0b6e219f6b162f71f57129d22426e7798092f5f85b9ec2cc818bf1"

hostmakedepends="gcc-ada gprbuild-bootstrap which"
makedepends="xmlada-devel"
depends="gprconfig_kb"

make_build_target="all"
make_install_target="install"

export GPR_PROJECT_PATH="$XBPS_CROSS_BASE/usr/share/gpr"

do_configure() {
	make prefix="$DESTDIR/usr" TARGET="$($CC -dumpmachine)" setup
}
