# Template file for 'nauty'
pkgname=nauty
version=2.9.0
revision=1
build_style=gnu-configure
make_install_args="includedir=/usr/include/nauty
 pkgconfigexecdir=/usr/lib/pkgconfig"
hostmakedepends="automake libtool"
short_desc="Compute the automorphism groups of graphs and digraphs"
maintainer="Gonzalo Tornar√≠a <tornaria@cmat.edu.uy>"
license="Apache-2.0"
homepage="https://pallini.di.uniroma1.it/"
changelog="https://pallini.di.uniroma1.it/changes24-29.txt"
distfiles="https://github.com/lonnen/nauty/archive/refs/tags/nauty${version//./_}.tar.gz"
checksum=d9c76d55cbb36b0abf05e7b39b20f6966f419fcc78225435558bed91376fe004

build_options="native_build"

if [ -z "$build_option_native_build" ]; then
	configure_args="--enable-generic --disable-popcnt --disable-clz"
fi

pre_configure() {
	aclocal
	autoreconf -fi
}

nauty-devel_package() {
	depends="${sourcepkg}>=${version}_${revision} ${makedepends}"
	short_desc+=" - development files"
	pkg_install() {
		vmove usr/include
		vmove "usr/lib/*.a"
		vmove usr/lib/pkgconfig
	}
}
