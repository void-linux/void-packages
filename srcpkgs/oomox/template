# Template file for 'oomox'
pkgname=oomox
version=1.7.0.2
revision=1
_droid_icon_ver=1.0.2
_gnome_icon_ver=5.5.3
_oomoxify_ver=1.0.0.1
_materia_theme_ver=v20180519
_oomox_gtk_theme_ver=1.0.9.1
noarch=yes
depends="python3 python3-gobject gtk+3 gdk-pixbuf glib-devel glib sassc
 bc sed librsvg librsvg-utils optipng parallel inkscape python3-Pillow"
short_desc="Graphical application for generating color variations of some themes"
maintainer="Tim Wanders <timwanders241@gmail.com>"
license="GPL-3"
homepage="https://github.com/themix-project/oomox"
distfiles="
 https://github.com/themix-project/oomox/archive/$version.tar.gz>oomox-$version.tar.gz
 https://github.com/themix-project/oomox-archdroid-icon-theme/archive/$_droid_icon_ver.tar.gz>oomox-archdroid-icon-theme-$_droid_icon_ver.tar.gz
 https://github.com/themix-project/oomox-gnome-colors-icon-theme/archive/$_gnome_icon_ver.tar.gz>oomox-gnome-colors-$_gnome_icon_ver.tar.gz
 https://github.com/themix-project/oomoxify/archive/$_oomoxify_ver.tar.gz>oomoxify-$_oomoxify_ver.tar.gz
 https://github.com/nana-4/materia-theme/archive/$_materia_theme_ver.tar.gz>materia-theme-$_materia_theme_ver.tar.gz
 https://github.com/themix-project/oomox-gtk-theme/archive/$_oomox_gtk_theme_ver.tar.gz>oomox-gtk-theme-$_oomox_gtk_theme_ver.tar.gz"
checksum="
 20b166fbae2b694897512060256ca47d591dd23ce2d72446d5bcf85ceda4e6db
 a16e441cbe7c7bf09bdf8fd96b10c314326e3a0fe2e060e06d106d487024cdac
 1d1ce5a545864823422936a62c43584e0662d0225dc61a79291bc458d9505b7a
 0cecc40173f1ae69af649c630d691934f97da8b0610a4c0388d165e3250ec8d0
 ee9efc1126350a23fc9a7479cb0b8f732c14a2fc2f6697551038463f47462f36
 997e15e2677350989edc8b2c2a8678ceddc23ac231b947fb3afe955445988b2d"

post_extract() {
	rm -rf archdroid-icon-theme gnome-colors-icon-theme oomoxify \
		gtk-theme materia-theme
	cp -r ../archdroid-icon-theme-$_droid_icon_ver archdroid-icon-theme
	cp -r ../gnome-colors-icon-theme-$_gnome_icon_ver gnome-colors-icon-theme
	cp -r ../oomoxify-$_oomoxify_ver oomoxify
	cp -r ../materia-theme-$_materia_theme_ver materia-theme
	cp -r ../oomox-gtk-theme-$_oomox_gtk_theme_ver gtk-theme
}

do_install() {
	# Do not install in /opt/oomox but in /usr/share/oomox
	sed -i packaging/*.sh packaging/bin/* -e 's;/opt;/usr/share;g'
	bash ./packaging/install.sh ./ ${DESTDIR}/
}
