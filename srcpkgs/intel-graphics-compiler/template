# Template file for 'intel-graphics-compiler'
pkgname=intel-graphics-compiler
version=1.0.16900.23
revision=1
archs="x86_64*"
build_style=cmake
configure_args="-Wno-dev -DIGC_OPTION__LLVM_PREFERRED_VERSION=14.0.6 -DCCLANG_FROM_SYSTEM=ON
 -DIGC_OPTION__SPIRV_TOOLS_MODE=Prebuilds -DIGC_OPTION__USE_PREINSTALLED_SPRIV_HEADERS=ON
 -DIGC_OPTION__VC_INTRINSICS_MODE=Prebuilds"
hostmakedepends="flex bison zlib-devel libzstd-devel cmake"
makedepends="llvm14-devel clang14 clang-tools-extra14 intel-opencl-clang intel-vc-intrinsics
 lld14 lld14-devel SPIRV-Headers SPIRV-LLVM-Translator14-devel SPIRV-Tools-devel python3-Mako"
short_desc="LLVM based compiler for OpenCL targeting Intel"
maintainer="Zlice <zlice555@gmail.com>"
license="MIT"
homepage="https://github.com/intel/intel-graphics-compiler"
distfiles="${homepage}/archive/refs/tags/igc-${version}.tar.gz"
checksum=bf5ec8aedd2e19a2e6502b18f886a88c87cf95f3d33299eda471044d0d67d3b2
# musl: build generated ze???_int32_t types (e.g. zeinfo_int32_t)
CXXFLAGS="-include cstdint"

post_install() {
	vlicense LICENSE.md
}
