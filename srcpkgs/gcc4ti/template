# Template file for 'gcc4ti'
pkgname=gcc4ti
version=0.96b11
revision=1
_commit=8861b73d548cd1715afb375ba57b1e29da43599b
wrksrc=gcc4ti-${_commit}
hostmakedepends="tar patch"
short_desc="Complete and mature GPL SDK for the TI-68k calculators"
maintainer="tibequadorian <tibequadorian@posteo.de>"
license="GPL-2.0-only"
homepage="https://github.com/debrouxl/gcc4ti"
distfiles="https://github.com/debrouxl/gcc4ti/archive/${_commit}.tar.gz"
checksum=b65eca299c188a1f07887128c4b247363734f1fc44add153c439c07632bfbca1
nocross=yes

do_install() {
	cd trunk/tigcc-linux/scripts
	./updatesrc
	export PREFIX_GCC4TI=$DESTDIR/opt/gcc4ti
	export PATH=$PATH:$PREFIX_GCC4TI/bin
	export CFLAGS="-Os -s -fno-exceptions -fomit-frame-pointer"
	export GCC4TIHOST=$XBPS_CROSS_TRIPLET
	cd ../gcc4ti-0.96b11/scripts
	./Install_step_1
	./Install_step_2
	./Install_step_3
	./Install_step_4
	./Install_step_5
}
