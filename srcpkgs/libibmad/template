# Template file for 'libibmad'
pkgname=libibmad
version=1.3.12
revision=1
wrksrc="OFED-3.18-2/SRPMS"
build_wrksrc="libibmad-1.3.12"
build_style=gnu-configure
hostmakedepends="rpm cpio"
makedepends="rdma-core-devel"
depends="rdma-core"
short_desc="OpenFabrics Alliance InfiniBand diagnostic and management library"
maintainer="Rich Gannon <rich@richgannon.net>"
license="GPL-2.0-or-later"
homepage="https://openfabrics.org"
distfiles="${homepage}/downloads/OFED/ofed-3.18-2/OFED-3.18-2.tgz"
checksum=0ea84a5d2b10a3630349088a7544cfc6e16ef544ad657b5318cc293a28b659d7

post_extract() {
	cd ${wrksrc}
	rpm2cpio libibmad-1.3.12-1.src.rpm | cpio -idm
	tar xvf libibmad-1.3.12.tar.gz
}

libibmad-devel_package() {
	depends="libibmad-${version}_${revision}"
	short_desc+=" - development files"
	pkg_install() {
		vmove usr/include
		vmove "usr/lib/*.a"
		vmove "usr/lib/*.so"
	}
}
