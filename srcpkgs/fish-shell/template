# Template file for 'fish-shell'
pkgname=fish-shell
version=4.0b1
revision=1
build_style=cmake
build_helper="rust"
hostmakedepends="rust cargo gettext pcre2-devel"
configure_args="-DCMAKE_BUILD_TYPE=Release"
makedepends="rust-std pcre2-devel"
checkdepends="python3-pexpect procps-ng"
short_desc="User friendly shell intended mostly for interactive use"
maintainer="Orphaned <orphan@voidlinux.org>"
license="GPL-2.0-only"
homepage="https://fishshell.com/"
changelog="https://github.com/fish-shell/fish-shell/raw/master/CHANGELOG.rst"
distfiles="https://github.com/fish-shell/fish-shell/releases/download/${version}/fish-${version}.tar.xz"
checksum=534334e10f85722214e9daff82a57cc3501235523f16f8f131c2344e4ec98da7
register_shell="/bin/fish /usr/bin/fish"
# tests don't work as root
make_check=ci-skip

post_install() {
	# Starting with fish-3.0.0 this is a skeleton file with only comments
	rm "${DESTDIR}/etc/fish/config.fish"
}
