# Template file for 'ergo'
pkgname=ergo
version=2.11.1
revision=1
build_style=go
go_import_path="github.com/ergochat/ergo"
short_desc="Modern IRC server (daemon/ircd) written in Go"
maintainer="Allen Sobot <chilledfrogs@disroot.org>"
license="MIT"
homepage="https://ergo.chat/"
changelog="https://raw.githubusercontent.com/ergochat/ergo/master/CHANGELOG.md"
distfiles="https://github.com/ergochat/ergo/archive/v${version}.tar.gz"
checksum=045cfffd2a387b37a344d6f538de7eeda0b718d71a898fe9919da579bdb25cfd
conf_files="/etc/ergo.conf"
system_accounts="_ergo"
_ergo_homedir="/var/lib/ergo"
make_dirs="/var/lib/ergo 0755 _ergo _ergo"

post_install() {
	vlicense LICENSE

	vconf default.yaml ergo.conf

	vmkdir usr/share/${pkgname}
	vcopy ergo.motd usr/share/${pkgname}/default.motd

	vmkdir usr/share/${pkgname}/i18n
	vcopy "languages/*" usr/share/${pkgname}/i18n/

	vsv ergo
}

oragono_package() {
	depends="${sourcepkg}>=${version}_${revision}"
	build_style=meta
	short_desc+=" (transitional dummy package)"
}
