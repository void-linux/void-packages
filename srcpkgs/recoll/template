# Template file for 'recoll'
pkgname=recoll
version=1.26.0
revision=1
build_style=gnu-configure
configure_args="--disable-python-module --enable-recollq --disable-x11mon"
hostmakedepends="automake libtool gettext-devel qt5-qmake python3-setuptools"
makedepends="xapian-core-devel zlib-devel libuuid-devel qt5-webkit-devel qt5-devel
 aspell-devel libchmlib-devel libxslt-devel python3-devel"
short_desc="Full text search tool based on Xapian backend"
maintainer="Rui Abreu Ferreira <raf-ep@gmx.com>"
license="GPL-2.0-or-later"
homepage="https://www.lesbonscomptes.com/recoll/"
distfiles="https://www.lesbonscomptes.com/${pkgname}/${pkgname}-${version}.tar.gz"
checksum=e6e8539ffe9877592722b6789eb53313e1310183e3b95ed77fe3babf755d9162
nocross=yes

pre_configure() {
	autoreconf -fi

	# Fix build with qt-511
	sed -i '1,1i#include <QAbstractItemView>' qtgui/ssearch_w.cpp
}
