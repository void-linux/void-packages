# Template file for 'vscodium-bin'
pkgname=vscodium-bin
version=1.43.1
revision=1
archs="x86_64"
create_wrksrc=yes
depends="GConf libXtst libxkbfile nss dejavu-fonts-ttf xdg-utils"
short_desc="Binary releases of VS Code without MS branding/telemetry/licensing"
maintainer="shizonic <realtiaz@gmail.com>"
license="MIT"
homepage="https://github.com/VSCodium/vscodium"
distfiles="https://github.com/VSCodium/vscodium/releases/download/${version}/VSCodium-linux-x64-${version}.tar.gz"
checksum=5a8c67b3da103baaa843797d4dc487c167c9068ae99181d8f483baf632ef5975
nostrip_files="codium"

do_install() {
	sed -i 's,/usr/share/codium,/usr/lib/vscodium,g' bin/codium

	vmkdir usr/lib/vscodium
	vcopy * usr/lib/vscodium

	vmkdir usr/bin
	ln -sf /usr/lib/vscodium/bin/codium ${DESTDIR}/usr/bin/codium
	ln -sf /usr/lib/vscodium/bin/codium ${DESTDIR}/usr/bin/vscodium

	vmkdir usr/share/applications
	vinstall ${FILESDIR}/vscodium.desktop 644 usr/share/applications

	vmkdir usr/share/pixmaps
	vinstall resources/app/resources/linux/code.png 644 usr/share/pixmaps vscodium.png

	vlicense resources/app/LICENSE.txt
}
