# install binaries into DESTDIR instead of BINDIR

--- Makefile.in.orig
+++ Makefile.in
@@ -6,6 +6,7 @@
 CC = @CC@
 FC = @FC@
 HAVE_NR = @HAVE_NR@
+DESTDIR =
 
 all:
 	@head -20 README
@@ -32,9 +33,10 @@
 
 do_install:
 	@rm -f install.log 
-	@test -d ${BINDIR} || (echo "${BINDIR} does not exist")
-	@test -d ${BINDIR} -a -n "${FC}" && (cd source_f && $(MAKE) install)
-	@test -d ${BINDIR} -a -n "${CC}" &&  (cd source_c && $(MAKE) install)
+	@mkdir -p ${DESTDIR}${BINDIR}
+	@test -d ${DESTDIR}${BINDIR} || (echo "${DESTDIR}${BINDIR} does not exist")
+	@test -d ${DESTDIR}${BINDIR} -a -n "${FC}" && (cd source_f && $(MAKE) DESTDIR=${DESTDIR} install)
+	@test -d ${DESTDIR}${BINDIR} -a -n "${CC}" &&  (cd source_c && $(MAKE) DESTDIR=${DESTDIR} install)
 
 missing:
 	@rm -f missing.log

--- source_c/Makefile.in	2007-03-08 16:05:14.000000000 +0100
+++ source_c/Makefile.in.patch	2018-07-11 14:32:56.488276362 +0200
@@ -29,7 +29,7 @@
 	-$(CC) $(CFLAGS) $(COPTS) -o $@ $@.c $(LOADLIBS)
 
 install: all
-	-for bin in $(ALL); do $(INSTALL) $$bin $(BINDIR); done
+	-for bin in $(ALL); do $(INSTALL) $$bin $(DESTDIR)$(BINDIR); done
 
 clean:
 	@rm -f *.o *~ #*#

--- source_f/Makefile.in.orig
+++ source_f/Makefile.in
@@ -55,7 +55,7 @@
 	-(cd randomize && $(MAKE) clean)
 
 install: $(BINS)
-	-for bin in $(BINS); do $(INSTALL) $$bin $(BINDIR); done
+	-for bin in $(BINS); do $(INSTALL) $$bin $(DESTDIR)$(BINDIR); done
 	-(cd randomize && $(MAKE) $@)
 
 missing:

--- source_f/randomize/Makefile.in.orig
+++ source_f/randomize/Makefile.in
@@ -25,7 +25,7 @@
 #	-$(MAKE) COST=mycost  COOL=exp PERM=random $@-one
 
 install-one: $(TRG)
-	-$(INSTALL) $(TRG) $(BINDIR)
+	-$(INSTALL) $(TRG) $(DESTDIR)$(BINDIR)
 
 missing-one:
 	-@$(TRG) -h 2>&1 | cat >>  ../../install.log
