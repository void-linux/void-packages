# Template file for 'cantarell-fonts'
pkgname=cantarell-fonts
version=0.111
revision=1
noarch=yes
wrksrc="${pkgname}-v${version}"
build_style=meson
hostmakedepends="pkg-config appstream-glib python3-devel libxml2-devel libxslt-devel
 python3-lxml"
depends="fontconfig"
short_desc="Cantarell family of TrueType fonts"
maintainer="Juan RP <xtraeme@voidlinux.eu>"
license="OFL-1.1"
homepage="https://wiki.gnome.org/Projects/CantarellFonts"
distfiles="https://gitlab.gnome.org/GNOME/cantarell-fonts/-/archive/v${version}/cantarell-fonts-v${version}.tar.gz"
checksum=7b635109b5c5ee6c7d9943c67a0609d99720d649729607efdb16b54407f4e19b

pre_configure() {
	# TODO: package fontmake and psautohint so we don't have to do this
	python3 -m venv venv
	venv/bin/pip install fontmake psautohint

	export PATH="$wrksrc/venv/bin:$PATH"
}

post_install() {
	vmkdir etc/fonts/conf.d
	vinstall ${FILESDIR}/21-cantarell-hinting.conf 644 etc/fonts/conf.avail
	ln -s ../conf.avail/21-cantarell-hinting.conf ${DESTDIR}/etc/fonts/conf.d
}
