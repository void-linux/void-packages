# Template file for 'python3-memory_allocator'
pkgname=python3-memory_allocator
version=0.2.0
revision=1
build_style=python3-pep517
build_helper=meson
hostmakedepends="python3-meson-python python3-Cython"
makedepends="python3-devel"
depends="python3"
short_desc="Extension class to allocate memory easily with cython"
maintainer="Gonzalo Tornar√≠a <tornaria@cmat.edu.uy>"
license="GPL-3.0-or-later"
homepage="https://github.com/sagemath/memory_allocator"
changelog="https://github.com/sagemath/memory_allocator/releases"
distfiles="${PYPI_SITE}/m/memory_allocator/memory_allocator-${version}.tar.gz"
checksum=675d3c91019db98c97441de73d5c648821e5ae813f3f54cd09863d474b48fe26

do_check() {
	local testdir="${wrksrc}/.xbps-testdir/$(date +%s)"
	python3 -m installer --destdir "${testdir}" \
		${make_install_args} ${make_install_target:-dist/*.whl}

	PYTHONPATH="${testdir}/${py3_sitelib}" python test.py
}
