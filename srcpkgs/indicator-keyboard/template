# Template file for 'indicator-keyboard'
pkgname=indicator-keyboard
version=0.0.0+19.10.20220803
revision=1
build_style=gnu-configure
configure_args="--prefix=/usr --libexecdir=/usr/lib"
hostmakedepends="automake gettext-devel gobject-introspection intltool
 pkg-config vala"
makedepends="accountsservice-devel fcitx-devel gnome-desktop-devel ibus-devel
 libgee-devel libgnomekbd-devel lightdm-devel"
depends="gucharmap libgnomekbd unity-control-center"
short_desc="Indicator for switching keyboard layouts and input methods"
maintainer="Earldridge Jazzed Pineda <earldridgejazzedpineda@gmail.com>"
license="GPL-3.0-only"
homepage="https://launchpad.net/indicator-keyboard"
distfiles="https://launchpad.net/ubuntu/+archive/primary/+files/indicator-keyboard_${version}.orig.tar.gz"
checksum=7916f3827408bd7cb82856c931b807c4b8a69efe0c165d05db17942e2f982b5a
make_check=ci-skip # "Invalid UTF-8" error

post_patch() {
	sed -i "s/string\[\] layouts = null/string\[\] layouts = new string\[0\]/g" lib/main.vala
}

pre_configure() {
	intltoolize -f
	autoreconf -vfi
}
