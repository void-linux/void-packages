# Template file for 'gocryptfs'
pkgname=gocryptfs
version=2.6.1
revision=1
build_style=go
go_import_path="github.com/rfjakob/gocryptfs/v2"
go_package="${go_import_path} ${go_import_path}/gocryptfs-xray"
go_ldflags="-X main.GitVersion=v${version} -X main.GitVersionFuse="[vendored]" -X main.BuildDate=$(date +%Y-%m-%d)"
hostmakedepends="pkg-config"
makedepends="openssl-devel"
depends="fuse3"
short_desc="Encrypted overlay filesystem written in Go"
maintainer="Felipe Nogueira <contato.fnog@gmail.com>"
license="MIT"
homepage="https://nuetzlich.net/gocryptfs"
changelog="https://github.com/rfjakob/gocryptfs#changelog"
distfiles="https://github.com/rfjakob/gocryptfs/releases/download/v${version}/gocryptfs_v${version}_src-deps.tar.gz"
checksum=9a966c1340a1a1d92073091643687b1205c46b57017c5da2bf7e97e3f5729a5a
make_check=no # fusermount3's mount/umount fail with EPERM

post_install() {
	vlicense LICENSE
	vman Documentation/gocryptfs.1
	vman Documentation/gocryptfs-xray.1
}
