# Template file for 'scribus-dev'
pkgname=scribus-dev
version=1.5.4
revision=1
wrksrc="scribus-${version}"
build_style=cmake
configure_args="-DWANT_GRAPHICSMAGICK=1 -DCMAKE_SKIP_RPATH=TRUE -DQT_PREFIX=${XBPS_CROSS_BASE}/usr"
hostmakedepends="pkg-config qt5-tools-devel"
makedepends="boost-devel cairo-devel cups-devel harfbuzz-devel hunspell-devel
 lcms2-devel libcdr-devel libfreehand-devel libgraphicsmagick-devel
 libjpeg-turbo-devel libmspub-devel libpagemaker-devel libpodofo-devel
 libqxp-devel librevenge-devel libvisio-devel libxml2-devel osg-devel
 poppler-cpp-devel poppler-devel python-devel qt5-devel tiff-devel"
short_desc="Open Source Desktop Publishing"
maintainer="Christian Buschau <christian.buschau@mailbox.org>"
license="GPL-2.0-or-later"
homepage="https://www.scribus.net/"
distfiles="${SOURCEFORGE_SITE}/scribus/scribus-devel/${version}/scribus-${version}.tar.xz"
checksum="6480925250b2bb07028e2f378c02b67fe3e33206743671e03c07c701cd05da03"
conflicts="scribus"
patch_args="-Np1"

post_extract() {
	# Poppler 0.72
	sed -e 's#getCString#c_str#g' -i scribus/plugins/import/pdf/*
}
