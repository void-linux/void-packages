# Template file for 'ssh-tools'
pkgname=ssh-tools
version=1.6
revision=1
makedepends="help2man"
depends="openssh colordiff"
short_desc="Collection of various tools using ssh"
maintainer="Sven Wick <sven.wick@gmx.de>"
license="GPL-3.0-or-later"
homepage="https://github.com/vaporup/ssh-tools"
distfiles="https://github.com/vaporup/${pkgname}/archive/v${version}.tar.gz"
checksum=5f6618894108a3f0b240ae908c3465430456e99fe1048cc0a589f1b8cfbbf6e4

do_build() {

	mkdir -p ${XBPS_BUILDDIR}/man

	help2man -n "check if host is reachable using ssh_config"           -S SSH-TOOLS -N --version-string " " -o ${XBPS_BUILDDIR}/man/ssh-ping.1        ./ssh-ping
	help2man -n "shows version of the SSH server you are connecting to" -S SSH-TOOLS -N --version-string " " -o ${XBPS_BUILDDIR}/man/ssh-version.1     ./ssh-version
	help2man -n "diff a file over SSH"                                  -S SSH-TOOLS -N --version-string " " -o ${XBPS_BUILDDIR}/man/ssh-diff.1        ./ssh-diff
	help2man -n "get some facts about the remote system"                -S SSH-TOOLS -N --version-string " " -o ${XBPS_BUILDDIR}/man/ssh-facts.1       ./ssh-facts
	help2man -n "prints server host keys in several formats"            -S SSH-TOOLS -N --version-string " " -o ${XBPS_BUILDDIR}/man/ssh-hostkeys.1    ./ssh-hostkeys
	help2man -n "shows validity and information of SSH certificates"    -S SSH-TOOLS -N --version-string " " -o ${XBPS_BUILDDIR}/man/ssh-certinfo.1    ./ssh-certinfo
	help2man -n "prints keys in several formats"                        -S SSH-TOOLS -N --version-string " " -o ${XBPS_BUILDDIR}/man/ssh-keyinfo.1     ./ssh-keyinfo

}

pre_install() {
	vmkdir usr/bin
	vmkdir usr/share/man/man1
}

do_install() {
	vcopy "ssh-*" usr/bin
	vcopy "${XBPS_BUILDDIR}/man/ssh-*" usr/share/man/man1
}
