# Template file for 'python3-yt-dlp-ejs'
pkgname=python3-yt-dlp-ejs
version=0.3.1
revision=1
build_style=python3-pep517
hostmakedepends="hatchling hatch-vcs nodejs"
short_desc="External JavaScript for yt-dlp supporting many runtimes"
maintainer="classabbyamp <void@placeviolette.net>"
license="Unlicense"
homepage="https://github.com/yt-dlp/ejs"
changelog="https://github.com/yt-dlp/ejs/releases"
distfiles="${PYPI_SITE}/y/yt_dlp_ejs/yt_dlp_ejs-${version}.tar.gz"
checksum=7f2119eb02864800f651fa33825ddfe13d152a1f730fa103d9864f091df24227

post_patch() {
	if [ "$XBPS_TARGET_MACHINE" = i686 ]; then
		npm install --override rollup@npm:@rollup/wasm-node@latest
	fi
}
