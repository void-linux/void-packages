From 659c88eec87160d908faf9b78b7b1006eb7e5bf3 Mon Sep 17 00:00:00 2001
From: Nicolas Fella <nicolas.fella@gmx.de>
Date: Fri, 10 Jan 2025 15:44:09 +0100
Subject: [PATCH] Fix build with Qt 6.9

Converting Qt::Key to QChar doesn't work any more
---
 libs/basicflakes/tools/KoCreatePathTool.cpp | 2 +-
 plugins/textshape/TextTool.cpp              | 4 ++--
 2 files changed, 3 insertions(+), 3 deletions(-)

diff --git a/libs/basicflakes/tools/KoCreatePathTool.cpp b/libs/basicflakes/tools/KoCreatePathTool.cpp
index 699f3b0e772..6cb7f11b4a4 100644
--- a/libs/basicflakes/tools/KoCreatePathTool.cpp
+++ b/libs/basicflakes/tools/KoCreatePathTool.cpp
@@ -444,7 +444,7 @@ QList<QPointer<QWidget>> KoCreatePathTool::createOptionWidgets()
     angleEdit->setValue(d->angleSnappingDelta);
     angleEdit->setRange(1, 360);
     angleEdit->setSingleStep(1);
-    angleEdit->setSuffix(QChar(Qt::Key_degree));
+    angleEdit->setSuffix(QStringLiteral("Â°"));
     layout->addWidget(angleEdit, 0, 1);
     layout->addWidget(new QLabel(i18n("Activate angle snap:"), angleWidget), 1, 0);
     QCheckBox *angleSnap = new QCheckBox(angleWidget);
diff --git a/plugins/textshape/TextTool.cpp b/plugins/textshape/TextTool.cpp
index 79e88353408..bb82e7b90c5 100644
--- a/plugins/textshape/TextTool.cpp
+++ b/plugins/textshape/TextTool.cpp
@@ -2360,7 +2360,7 @@ void TextTool::nonbreakingSpace()
 {
     if (!m_allowActions || !m_textEditor.data())
         return;
-    m_textEditor.data()->insertText(QString(QChar(Qt::Key_nobreakspace)));
+    m_textEditor.data()->insertText(QString(QChar(QChar::Nbsp)));
 }
 
 void TextTool::nonbreakingHyphen()
@@ -2374,7 +2374,7 @@ void TextTool::softHyphen()
 {
     if (!m_allowActions || !m_textEditor.data())
         return;
-    m_textEditor.data()->insertText(QString(QChar(Qt::Key_hyphen)));
+    m_textEditor.data()->insertText(QString(QChar(QChar::SoftHyphen)));
 }
 
 void TextTool::lineBreak()
-- 
GitLab

