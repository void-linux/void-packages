--- a/base/gdevmpla.c
+++ b/base/gdevmpla.c
@@ -1954,12 +1954,12 @@ mem_planar_strip_copy_rop2(gx_device * d
         int i;
         int j;
         intptr_t chunky_sraster;
-        intptr_t nbytes;
+        int64_t nbytes;
         byte **line_ptrs;
         byte *sbuf, *buf;
 
         chunky_sraster = sraster * (intptr_t)mdev->num_planar_planes;
-        if (check_64bit_multiply(height, chunky_sraster, (size_t *)&nbytes) != 0)
+        if (check_64bit_multiply(height, chunky_sraster, &nbytes) != 0)
             return gs_note_error(gs_error_undefinedresult);
         buf = gs_alloc_bytes(mdev->memory, nbytes, "mem_planar_strip_copy_rop(buf)");
         if (buf == NULL) {
@@ -2003,7 +2003,7 @@ mem_planar_strip_copy_rop2(gx_device * d
         intptr_t i;
         intptr_t chunky_t_raster;
         int chunky_t_height;
-        intptr_t nbytes;
+        int64_t nbytes;
         byte **line_ptrs;
         byte *tbuf, *buf;
         gx_strip_bitmap newtex;
--- a/brotli/c/dec/decode.c
+++ b/brotli/c/dec/decode.c
@@ -434,10 +434,10 @@ static BROTLI_INLINE void PreloadSymbol(
                                         BrotliBitReader* br,
                                         brotli_reg_t* bits,
                                         brotli_reg_t* value) {
+  BROTLI_HC_MARK_TABLE_FOR_FAST_LOAD(table);
   if (safe) {
     return;
   }
-  BROTLI_HC_MARK_TABLE_FOR_FAST_LOAD(table);
   BROTLI_HC_ADJUST_TABLE_INDEX(table, BrotliGetBits(br, HUFFMAN_TABLE_BITS));
   *bits = BROTLI_HC_FAST_LOAD_BITS(table);
   *value = BROTLI_HC_FAST_LOAD_VALUE(table);
