# Template file for 'thrift'
pkgname=thrift
version=0.22.0
revision=1
build_style=cmake
configure_args="-DBUILD_SHARED_LIBS=ON
 -DWITH_AS3=OFF
 -DWITH_JAVA=OFF
 -DWITH_JAVASCRIPT=OFF
 -DWITH_NODEJS=OFF
 -DWITH_PYTHON=OFF"
hostmakedepends="flex"
makedepends="boost-devel-minimal libboost_chrono libboost_filesystem
 libboost_thread libboost_unit_test_framework openssl-devel libevent-devel"
checkdepends="zlib-devel libevent-devel libboost_program_options libboost_random"
short_desc="Apache Thrift compiler"
maintainer="Jason Elswick <jason@jasondavid.us>"
license="Apache-2.0"
homepage="https://thrift.apache.org/"
distfiles="https://github.com/apache/thrift/archive/v${version}.tar.gz"
checksum=c4649c5879dd56c88f1e7a1c03e0fbfcc3b2a2872fb81616bffba5aa8a225a37

if [ "$CROSS_BUILD" ]; then
	configure_args+=" -DBUILD_TESTING=OFF -DBUILD_TUTORIALS=OFF"
fi

thrift-devel_package() {
	short_desc+=" - development files"
	depends="${sourcepkg}>=${version}_${revision}"
	pkg_install() {
		vmove usr/include
		vmove "usr/lib/*.so"
		vmove usr/lib/cmake
		vmove usr/lib/pkgconfig
	}
}
