# Template file for 'postgrest'
pkgname=postgrest
version=13.0.4
revision=1
build_style=cabal
makedepends="zlib-devel postgresql-libs-devel"
short_desc="REST API for any Postgres database"
maintainer="Piotr WÃ³jcik <chocimier@tlen.pl>"
license="MIT"
homepage="https://postgrest.org/"
distfiles="https://github.com/PostgREST/postgrest/archive/v${version}.tar.gz
 https://hackage.haskell.org/package/basement-0.0.16/basement-0.0.16.tar.gz
 https://hackage.haskell.org/package/memory-0.18.0/memory-0.18.0.tar.gz
 https://hackage.haskell.org/package/data-bword-0.1.0.2/data-bword-0.1.0.2.tar.gz"
checksum="515ea77c049ef69f4553940ef0f13018dc2b72792195ec11a2020fe8914ceab9
 7fb77e249aef76ba5aed3059d556800ce02b614597c488ba01f0a16449146300
 fd4eb6f638e24b81b4e6cdd68772a531726f2f67686c8969d3407d82f7862e3e
 d64880e7d6c7a2d635d7e79552888f415a417379ee637a29321abf08187e9635"
nocross="cabal does not support cross compilation"
nopie=yes # ghc is currently built without PIE support
skip_extraction="basement-0.0.16.tar.gz memory-0.18.0.tar.gz data-bword-0.1.0.2.tar.gz"
make_check=no # tests require running postgres instance

post_extract() {
	vsrcextract -C basement basement-0.0.16.tar.gz
	vsrcextract -C memory memory-0.18.0.tar.gz
	vsrcextract -C data-bword data-bword-0.1.0.2.tar.gz
}

post_install() {
	vlicense LICENSE
}
