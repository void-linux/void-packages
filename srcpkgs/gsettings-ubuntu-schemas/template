# Template file for 'gsettings-ubuntu-schemas'
pkgname=gsettings-ubuntu-schemas
version=0.0.7+21.10.20210712
revision=1
build_style=gnu-configure
configure_args="--prefix=/usr --localstatedir=/var"
hostmakedepends="automake gettext-devel intltool pkg-config"
makedepends="glib-devel"
depends="glib"
short_desc="GSettings desktop-wide schemas for Ubuntu"
maintainer="Earldridge Jazzed Pineda <earldridgejazzedpineda@gmail.com>"
license="LGPL-2.1-only"
homepage="https://launchpad.net/gsettings-ubuntu-touch-schemas"
distfiles="https://launchpad.net/ubuntu/+archive/primary/+files/gsettings-ubuntu-touch-schemas_${version}.orig.tar.gz"
checksum=a4a1c328f73e82b5ef69293c7e051fb37c25184cc5cb52e7b7a96f5a9de5b3fc

pre_configure() {
	autoreconf -i
}

post_install() {
	vmkdir usr/share/polkit-1/rules.d 750
	vinstall ${FILESDIR}/50-com.ubuntu.AccountsService.rules 644 usr/share/polkit-1/rules.d

	rm -v "${DESTDIR}"/var/lib/polkit-1/localauthority/10-vendor.d/50-com.ubuntu.AccountsService.pkla
}

gsettings-ubuntu-schemas-devel_package() {
	short_desc+=" - development files"
	depends="${sourcepkg}>=${version}_${revision}"
	pkg_install() {
		vmove usr/share/pkgconfig
	}
}
