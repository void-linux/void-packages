# Template file for 'imlib2-jxl'
pkgname=imlib2-jxl
version=0.1.1
revision=1
build_style=gnu-makefile
hostmakedepends="pkg-config"
makedepends="libjxl-devel lcms2-devel imlib2-devel"
short_desc="JPEG XL loader for imlib2"
maintainer="mustaqim <git@mustaqim.ml>"
license="BSD-3-Clause, custom: Alistair Barrow, custom: David Hauweele"
homepage="https://github.com/alistair7/imlib2-jxl"
changelog="https://raw.githubusercontent.com/alistair7/imlib2-jxl/main/CHANGELOG.md"
distfiles="https://github.com/alistair7/imlib2-jxl/archive/v${version}.tar.gz"
checksum=25d220e4638948174d5e76c66e2f0441ee41e0758fa63f065cdfd51bb76c1465

LDFLAGS="$(pkg-config imlib2 --libs) -ljxl_threads -ljxl $(pkg-config lcms2 --libs)"

do_install() {
	vinstall jxl.so 644 usr/lib/imlib2/loaders/
}

post_install() {
	vlicense LICENSE-BSD-ab
	vlicense LICENSE-BSD-dh
}
