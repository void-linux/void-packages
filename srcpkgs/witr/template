# Template file for 'witr'
pkgname=witr
version=0.1.3
revision=1
build_style=go
go_import_path=github.com/pranshuparmar/witr
go_package="./cmd/witr"
go_ldflags="-X main.version=v${version} -X main.commit=v${version}"
short_desc="Tool to determine why a process is running"
maintainer="Filip Rojek <filip@filiprojek.cz>"
license="Apache-2.0"
homepage="https://github.com/pranshuparmar/witr"
changelog="https://github.com/pranshuparmar/witr/releases"
distfiles="https://github.com/pranshuparmar/witr/archive/refs/tags/v${version}.tar.gz"
checksum=043092eab4cab11dd551b5eab051065abd8bec4f0257d48da6f3768d0cbb8981

pre_build() {
	local _date
	if [ "$SOURCE_DATE_EPOCH" ]; then
		_date="$(date --utc --date "@$SOURCE_DATE_EPOCH" "+%Y-%m-%d")"
		go_ldflags+=" -X main.buildDate=${_date}"
	fi
}

post_install() {
	vman docs/witr.1
}
