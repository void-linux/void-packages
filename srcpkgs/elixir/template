# Template file for 'elixir'
pkgname=elixir
version=1.19.4
revision=1
build_style=gnu-makefile
make_check_target="test_erlang test_elixir"
hostmakedepends="erlang"
depends="erlang>=26"
checkdepends="git"
short_desc="Functional, concurrent, general-purpose programming language"
maintainer="Duncaen <duncaen@voidlinux.org>"
license="Apache-2.0"
homepage="https://elixir-lang.org/"
changelog="https://raw.githubusercontent.com/elixir-lang/elixir/v${version%.*}/CHANGELOG.md"
distfiles="https://github.com/elixir-lang/elixir/archive/v${version}.tar.gz"
checksum=a2df9d5411fc53d97ec17c069765c8fb781f8dc36c4e06ec1cd4b189340d364b

do_check() {
	ERL_EPMD_PORT=5369 make ${make_check_target}
	# The elixir test suite starts up epmd and then doesn't kill it again afterwards.
	epmd -port 5369 -kill
}
