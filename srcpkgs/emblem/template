# Template file for 'emblem'
pkgname=emblem
version=1.2.0
revision=1
build_style=meson
build_helper=rust
hostmakedepends="rust cargo glib cmake pkg-config gettext desktop-file-utils glib-devel gtk4-update-icon-cache gtk-update-icon-cache"
makedepends="gtk4-devel libadwaita-devel rust-std"
short_desc="Generate project avatars"
maintainer="Bnyro <bnyro@tutanota.com>"
license="GPL-3.0-or-later"
homepage="https://apps.gnome.org/app/org.gnome.design.Emblem/"
distfiles="https://gitlab.gnome.org/World/design/emblem/-/archive/${version}/emblem-${version}.tar.gz"
checksum=186fb10640f90d9dd59015f64f538ad46092917f1dcd2f0e28bfb4f38852e676
make_check="no" # tests depend on clippy which would require to use rustup

pre_build() {
	if [ "$CROSS_BUILD" ]; then
		vsed -i src/meson.build \
			-e "s%rust_target /%'${RUST_TARGET}' / rust_target /%"
	fi
}
