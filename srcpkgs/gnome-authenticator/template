# Template file for 'gnome-authenticator'
pkgname=gnome-authenticator
version=4.1.6
revision=1
wrksrc="Authenticator-${version}"
build_style=meson
build_helper="rust"
hostmakedepends="pkg-config gettext glib-devel itstool cargo desktop-file-utils
 gtk-update-icon-cache clang"
makedepends="gtk4-devel libadwaita-devel libglib-devel libzbar-devel openssl-devel
 pipewire-devel rust-std"
short_desc="Two-factor authentication code generator for GNOME"
maintainer="Enno Boland <gottox@voidlinux.org>"
license="GPL-3.0-or-later"
homepage="https://gitlab.gnome.org/World/Authenticator"
distfiles="${homepage}/-/archive/${version}/Authenticator-${version}.tar.gz"
checksum="e1e4c01dcdb57dd51d5fb5ec8c60b4fa455b74b56a7e0130e88623f44b89fec9"

post_patch() {
	[ -z "$CROSS_BUILD" ] && return 0
	vsed -i src/meson.build \
		 -e "s%rust_target /%'${RUST_TARGET}' / rust_target /%"
}
