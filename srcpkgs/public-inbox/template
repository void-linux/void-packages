# Template file for 'public-inbox'
pkgname=public-inbox
version=2.0.0
revision=1
build_style=perl-module
hostmakedepends="git mdocml perl perl-DBD-SQLite perl-Email-Address-XS
 perl-HTTP-Date perl-Inline-C perl-Net-Server perl-Plack
 perl-Plack-Middleware-ReverseProxy perl-Linux-Inotify2
 perl-Search-Xapian perl-TimeDate perl-URI xapian-core"
makedepends="${hostmakedepends}"
depends="${hostmakedepends}"
checkdepends="${depends} curl perl-Email-MIME perl-HTTP-Message
 perl-Test-SharedFork"
short_desc="An 'archives first' approach to mailing lists"
maintainer="Leah Neukirchen <leah@vuxu.org>"
license="AGPL-3.0-or-later"
homepage="https://public-inbox.org/"
distfiles="https://public-inbox.org/public-inbox.git/snapshot/${pkgname}-${version}.tar.gz"
checksum=7b59c9962d479812856d1f90523b1a0b688a3ad3c0157a5c7d69e80bc616807b

pre_check() {
	mkdir -p ~/.public-inbox
}
post_install() {
	vsconf scripts/dupe-finder
	vsconf scripts/import_maildir
	vlicense COPYING
}
