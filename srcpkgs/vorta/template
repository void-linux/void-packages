# Template file for 'vorta'
pkgname=vorta
version=0.8.10
revision=1
build_style=python3-module
#'test_export_fail_unwritable' fails as root.
#'test_ssh_dialog' fails under xbps-src. 
make_check_args="
 --deselect=tests/test_import_export.py::test_export_fail_unwritable
 --deselect=tests/test_repo.py::test_ssh_dialog"
hostmakedepends="python3-setuptools python3-wheel"
depends="borg python3-peewee python3-appdirs python3-paramiko
 python3-SecretStorage python3-psutil python3-PyQt5"
checkdepends="${depends} dbus python3-pytest python3-pytest-qt
 python3-pytest-mock"
short_desc="GUI for Borg Backup"
maintainer="Alan Barros de Oliveira <alanbarros@protonmail.com>"
license="GPL-3.0-only"
homepage="https://github.com/borgbase/vorta"
distfiles="https://github.com/borgbase/vorta/archive/refs/tags/v${version}.tar.gz"
checksum=eb0a4db1e48943e7ca45937b4e4ebab57c0e7b61b378ee58d190fa7f7b31721e
make_check_pre="dbus-run-session" # needed to PASS test_notifications.py
