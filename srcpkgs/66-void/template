# Template file for '66-void'
# Based heavily on the runit-void package and reusing
# the void-runit repository.
pkgname=66-void
# This the not a released version but the date of the
# last commit at this time.
version=20230208
revision=1
# This the the last commit hash at this time.
_void_runit_version=e9d35904c8d5802b623c1c015eb155d1affdfcdf
wrksrc="void-runit-${_void_runit_version}"
build_style=gnu-makefile
short_desc="Void Linux base package, adapted for 66"
maintainer="mobinmob <mobinmob@disroot.org>"
license="CC0-1.0"
homepage="https://github.com/void-linux/void-runit"
# distfiles="https://github.com/void-linux/void-runit/archive/${_void_runit_version}.tar.gz"
distfiles="https://github.com/void-linux/void-runit/archive/${_void_runit_version}.tar.gz"
checksum=e3fd74416dce2f208fcd9dae45987c3221177974fc68ab75efcd54108f684951
replaces="runit-void>=0"

make_dirs="
	/etc/runit/core-services 755 root root
	/etc/zzz.d/suspend 0755 root root
	/etc/zzz.d/resume 0755 root root"

depends="boot-66serv"
conf_files="
 /etc/hostname
 /etc/locale.conf
 /etc/rc.conf
 /etc/rc.local"

post_install() {
	vconf ${FILESDIR}/hostname
	vconf ${FILESDIR}/locale.conf
	# Create symlinks for init and init utilities
	ln -s /usr/bin/66 "${DESTDIR}"/usr/bin/init
	for i in reboot poweroff halt shutdown;
		do
		ln -s /etc/66/${i} "${DESTDIR}"/usr/bin/${i}
	done
}
