# Template file for 'cdogs-sdl'
pkgname=cdogs-sdl
version=1.3.1
revision=1
build_style=cmake
configure_args="
 -DCMAKE_INSTALL_PREFIX=/usr/share/cdogs-sdl/
 -DCDOGS_DATA_DIR=/usr/share/cdogs-sdl/
"
hostmakedepends="pkg-config python3-protobuf protobuf"
makedepends="SDL2-devel SDL2_mixer-devel SDL2_image-devel SDL2_net-devel
 gtk+3-devel protobuf-devel"
short_desc="Classic overhead run-and-gun game"
maintainer="Enno Boland <gottox@voidlinux.org>"
license="GPL-2.0-or-later"
homepage="https://cxong.github.io/cdogs-sdl/"
distfiles="https://github.com/cxong/cdogs-sdl/archive/${version}.tar.gz"
checksum=3b863a092b23da8b210383831ff490a10dd6fda77b997fe2bf39cedcfa0a8937
replaces="cdogs-sdl-data<=0.7.3"

CFLAGS="-fcommon"

pre_configure() {
	vsed -i CMakeLists.txt -e "s; -Werror;;"
}

post_install() {
	mv "$DESTDIR"/usr/share/cdogs-sdl/bin/ "$DESTDIR"/usr/bin/
	mv "$DESTDIR"/usr/share/cdogs-sdl/share/* "$DESTDIR"/usr/share/
}
